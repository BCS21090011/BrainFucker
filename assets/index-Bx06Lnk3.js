var D0=Object.defineProperty;var lg=e=>{throw TypeError(e)};var k0=(e,i,n)=>i in e?D0(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;var hi=(e,i,n)=>k0(e,typeof i!="symbol"?i+"":i,n),Fc=(e,i,n)=>i.has(e)||lg("Cannot "+n);var ie=(e,i,n)=>(Fc(e,i,"read from private field"),n?n.call(e):i.get(e)),gt=(e,i,n)=>i.has(e)?lg("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(e):i.set(e,n),At=(e,i,n,a)=>(Fc(e,i,"write to private field"),a?a.call(e,n):i.set(e,n),n),Ci=(e,i,n)=>(Fc(e,i,"access private method"),n);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))a(h);new MutationObserver(h=>{for(const c of h)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function n(h){const c={};return h.integrity&&(c.integrity=h.integrity),h.referrerPolicy&&(c.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?c.credentials="include":h.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(h){if(h.ep)return;h.ep=!0;const c=n(h);fetch(h.href,c)}})();var Xc={exports:{}},al={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function T0(){if(ag)return al;ag=1;var e=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function n(a,h,c){var f=null;if(c!==void 0&&(f=""+c),h.key!==void 0&&(f=""+h.key),"key"in h){c={};for(var _ in h)_!=="key"&&(c[_]=h[_])}else c=h;return h=c.ref,{$$typeof:e,type:a,key:f,ref:h!==void 0?h:null,props:c}}return al.Fragment=i,al.jsx=n,al.jsxs=n,al}var og;function R0(){return og||(og=1,Xc.exports=T0()),Xc.exports}var Q=R0(),Gc={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg;function B0(){if(hg)return Se;hg=1;var e=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),S=Symbol.iterator;function E(b){return b===null||typeof b!="object"?null:(b=S&&b[S]||b["@@iterator"],typeof b=="function"?b:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function T(b,U,$){this.props=b,this.context=U,this.refs=C,this.updater=$||k}T.prototype.isReactComponent={},T.prototype.setState=function(b,U){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,U,"setState")},T.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function z(){}z.prototype=T.prototype;function ee(b,U,$){this.props=b,this.context=U,this.refs=C,this.updater=$||k}var F=ee.prototype=new z;F.constructor=ee,x(F,T.prototype),F.isPureReactComponent=!0;var j=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function ue(b,U,$,Y,J,fe){return $=fe.ref,{$$typeof:e,type:b,key:U,ref:$!==void 0?$:null,props:fe}}function pe(b,U){return ue(b.type,U,void 0,void 0,void 0,b.props)}function Te(b){return typeof b=="object"&&b!==null&&b.$$typeof===e}function lt(b){var U={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function($){return U[$]})}var ye=/\/+/g;function G(b,U){return typeof b=="object"&&b!==null&&b.key!=null?lt(""+b.key):U.toString(36)}function W(){}function Z(b){switch(b.status){case"fulfilled":return b.value;case"rejected":throw b.reason;default:switch(typeof b.status=="string"?b.then(W,W):(b.status="pending",b.then(function(U){b.status==="pending"&&(b.status="fulfilled",b.value=U)},function(U){b.status==="pending"&&(b.status="rejected",b.reason=U)})),b.status){case"fulfilled":return b.value;case"rejected":throw b.reason}}throw b}function I(b,U,$,Y,J){var fe=typeof b;(fe==="undefined"||fe==="boolean")&&(b=null);var le=!1;if(b===null)le=!0;else switch(fe){case"bigint":case"string":case"number":le=!0;break;case"object":switch(b.$$typeof){case e:case i:le=!0;break;case p:return le=b._init,I(le(b._payload),U,$,Y,J)}}if(le)return J=J(b),le=Y===""?"."+G(b,0):Y,j(J)?($="",le!=null&&($=le.replace(ye,"$&/")+"/"),I(J,U,$,"",function(Ye){return Ye})):J!=null&&(Te(J)&&(J=pe(J,$+(J.key==null||b&&b.key===J.key?"":(""+J.key).replace(ye,"$&/")+"/")+le)),U.push(J)),1;le=0;var Ie=Y===""?".":Y+":";if(j(b))for(var Be=0;Be<b.length;Be++)Y=b[Be],fe=Ie+G(Y,Be),le+=I(Y,U,$,fe,J);else if(Be=E(b),typeof Be=="function")for(b=Be.call(b),Be=0;!(Y=b.next()).done;)Y=Y.value,fe=Ie+G(Y,Be++),le+=I(Y,U,$,fe,J);else if(fe==="object"){if(typeof b.then=="function")return I(Z(b),U,$,Y,J);throw U=String(b),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return le}function M(b,U,$){if(b==null)return b;var Y=[],J=0;return I(b,Y,"","",function(fe){return U.call($,fe,J++)}),Y}function H(b){if(b._status===-1){var U=b._result;U=U(),U.then(function($){(b._status===0||b._status===-1)&&(b._status=1,b._result=$)},function($){(b._status===0||b._status===-1)&&(b._status=2,b._result=$)}),b._status===-1&&(b._status=0,b._result=U)}if(b._status===1)return b._result.default;throw b._result}var L=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)};function he(){}return Se.Children={map:M,forEach:function(b,U,$){M(b,function(){U.apply(this,arguments)},$)},count:function(b){var U=0;return M(b,function(){U++}),U},toArray:function(b){return M(b,function(U){return U})||[]},only:function(b){if(!Te(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Se.Component=T,Se.Fragment=n,Se.Profiler=h,Se.PureComponent=ee,Se.StrictMode=a,Se.Suspense=g,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,Se.__COMPILER_RUNTIME={__proto__:null,c:function(b){return K.H.useMemoCache(b)}},Se.cache=function(b){return function(){return b.apply(null,arguments)}},Se.cloneElement=function(b,U,$){if(b==null)throw Error("The argument must be a React element, but you passed "+b+".");var Y=x({},b.props),J=b.key,fe=void 0;if(U!=null)for(le in U.ref!==void 0&&(fe=void 0),U.key!==void 0&&(J=""+U.key),U)!te.call(U,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&U.ref===void 0||(Y[le]=U[le]);var le=arguments.length-2;if(le===1)Y.children=$;else if(1<le){for(var Ie=Array(le),Be=0;Be<le;Be++)Ie[Be]=arguments[Be+2];Y.children=Ie}return ue(b.type,J,void 0,void 0,fe,Y)},Se.createContext=function(b){return b={$$typeof:f,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null},b.Provider=b,b.Consumer={$$typeof:c,_context:b},b},Se.createElement=function(b,U,$){var Y,J={},fe=null;if(U!=null)for(Y in U.key!==void 0&&(fe=""+U.key),U)te.call(U,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(J[Y]=U[Y]);var le=arguments.length-2;if(le===1)J.children=$;else if(1<le){for(var Ie=Array(le),Be=0;Be<le;Be++)Ie[Be]=arguments[Be+2];J.children=Ie}if(b&&b.defaultProps)for(Y in le=b.defaultProps,le)J[Y]===void 0&&(J[Y]=le[Y]);return ue(b,fe,void 0,void 0,null,J)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(b){return{$$typeof:_,render:b}},Se.isValidElement=Te,Se.lazy=function(b){return{$$typeof:p,_payload:{_status:-1,_result:b},_init:H}},Se.memo=function(b,U){return{$$typeof:d,type:b,compare:U===void 0?null:U}},Se.startTransition=function(b){var U=K.T,$={};K.T=$;try{var Y=b(),J=K.S;J!==null&&J($,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(he,L)}catch(fe){L(fe)}finally{K.T=U}},Se.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},Se.use=function(b){return K.H.use(b)},Se.useActionState=function(b,U,$){return K.H.useActionState(b,U,$)},Se.useCallback=function(b,U){return K.H.useCallback(b,U)},Se.useContext=function(b){return K.H.useContext(b)},Se.useDebugValue=function(){},Se.useDeferredValue=function(b,U){return K.H.useDeferredValue(b,U)},Se.useEffect=function(b,U,$){var Y=K.H;if(typeof $=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(b,U)},Se.useId=function(){return K.H.useId()},Se.useImperativeHandle=function(b,U,$){return K.H.useImperativeHandle(b,U,$)},Se.useInsertionEffect=function(b,U){return K.H.useInsertionEffect(b,U)},Se.useLayoutEffect=function(b,U){return K.H.useLayoutEffect(b,U)},Se.useMemo=function(b,U){return K.H.useMemo(b,U)},Se.useOptimistic=function(b,U){return K.H.useOptimistic(b,U)},Se.useReducer=function(b,U,$){return K.H.useReducer(b,U,$)},Se.useRef=function(b){return K.H.useRef(b)},Se.useState=function(b){return K.H.useState(b)},Se.useSyncExternalStore=function(b,U,$){return K.H.useSyncExternalStore(b,U,$)},Se.useTransition=function(){return K.H.useTransition()},Se.version="19.1.0",Se}var cg;function af(){return cg||(cg=1,Gc.exports=B0()),Gc.exports}var oe=af(),$c={exports:{}},ol={},Zc={exports:{}},Qc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function A0(){return ug||(ug=1,function(e){function i(M,H){var L=M.length;M.push(H);e:for(;0<L;){var he=L-1>>>1,b=M[he];if(0<h(b,H))M[he]=H,M[L]=b,L=he;else break e}}function n(M){return M.length===0?null:M[0]}function a(M){if(M.length===0)return null;var H=M[0],L=M.pop();if(L!==H){M[0]=L;e:for(var he=0,b=M.length,U=b>>>1;he<U;){var $=2*(he+1)-1,Y=M[$],J=$+1,fe=M[J];if(0>h(Y,L))J<b&&0>h(fe,Y)?(M[he]=fe,M[J]=L,he=J):(M[he]=Y,M[$]=L,he=$);else if(J<b&&0>h(fe,L))M[he]=fe,M[J]=L,he=J;else break e}}return H}function h(M,H){var L=M.sortIndex-H.sortIndex;return L!==0?L:M.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var f=Date,_=f.now();e.unstable_now=function(){return f.now()-_}}var g=[],d=[],p=1,S=null,E=3,k=!1,x=!1,C=!1,T=!1,z=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function j(M){for(var H=n(d);H!==null;){if(H.callback===null)a(d);else if(H.startTime<=M)a(d),H.sortIndex=H.expirationTime,i(g,H);else break;H=n(d)}}function K(M){if(C=!1,j(M),!x)if(n(g)!==null)x=!0,te||(te=!0,G());else{var H=n(d);H!==null&&I(K,H.startTime-M)}}var te=!1,ue=-1,pe=5,Te=-1;function lt(){return T?!0:!(e.unstable_now()-Te<pe)}function ye(){if(T=!1,te){var M=e.unstable_now();Te=M;var H=!0;try{e:{x=!1,C&&(C=!1,ee(ue),ue=-1),k=!0;var L=E;try{t:{for(j(M),S=n(g);S!==null&&!(S.expirationTime>M&&lt());){var he=S.callback;if(typeof he=="function"){S.callback=null,E=S.priorityLevel;var b=he(S.expirationTime<=M);if(M=e.unstable_now(),typeof b=="function"){S.callback=b,j(M),H=!0;break t}S===n(g)&&a(g),j(M)}else a(g);S=n(g)}if(S!==null)H=!0;else{var U=n(d);U!==null&&I(K,U.startTime-M),H=!1}}break e}finally{S=null,E=L,k=!1}H=void 0}}finally{H?G():te=!1}}}var G;if(typeof F=="function")G=function(){F(ye)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Z=W.port2;W.port1.onmessage=ye,G=function(){Z.postMessage(null)}}else G=function(){z(ye,0)};function I(M,H){ue=z(function(){M(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(M){switch(E){case 1:case 2:case 3:var H=3;break;default:H=E}var L=E;E=H;try{return M()}finally{E=L}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(M,H){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var L=E;E=M;try{return H()}finally{E=L}},e.unstable_scheduleCallback=function(M,H,L){var he=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?he+L:he):L=he,M){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=L+b,M={id:p++,callback:H,priorityLevel:M,startTime:L,expirationTime:b,sortIndex:-1},L>he?(M.sortIndex=L,i(d,M),n(g)===null&&M===n(d)&&(C?(ee(ue),ue=-1):C=!0,I(K,L-he))):(M.sortIndex=b,i(g,M),x||k||(x=!0,te||(te=!0,G()))),M},e.unstable_shouldYield=lt,e.unstable_wrapCallback=function(M){var H=E;return function(){var L=E;E=H;try{return M.apply(this,arguments)}finally{E=L}}}}(Qc)),Qc}var fg;function O0(){return fg||(fg=1,Zc.exports=A0()),Zc.exports}var Jc={exports:{}},Ut={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function L0(){if(dg)return Ut;dg=1;var e=af();function i(g){var d="https://react.dev/errors/"+g;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+g+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(i(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},h=Symbol.for("react.portal");function c(g,d,p){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:S==null?null:""+S,children:g,containerInfo:d,implementation:p}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(g,d){if(g==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ut.createPortal=function(g,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(i(299));return c(g,d,null,p)},Ut.flushSync=function(g){var d=f.T,p=a.p;try{if(f.T=null,a.p=2,g)return g()}finally{f.T=d,a.p=p,a.d.f()}},Ut.preconnect=function(g,d){typeof g=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,a.d.C(g,d))},Ut.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Ut.preinit=function(g,d){if(typeof g=="string"&&d&&typeof d.as=="string"){var p=d.as,S=_(p,d.crossOrigin),E=typeof d.integrity=="string"?d.integrity:void 0,k=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?a.d.S(g,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:S,integrity:E,fetchPriority:k}):p==="script"&&a.d.X(g,{crossOrigin:S,integrity:E,fetchPriority:k,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ut.preinitModule=function(g,d){if(typeof g=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=_(d.as,d.crossOrigin);a.d.M(g,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&a.d.M(g)},Ut.preload=function(g,d){if(typeof g=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,S=_(p,d.crossOrigin);a.d.L(g,p,{crossOrigin:S,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ut.preloadModule=function(g,d){if(typeof g=="string")if(d){var p=_(d.as,d.crossOrigin);a.d.m(g,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else a.d.m(g)},Ut.requestFormReset=function(g){a.d.r(g)},Ut.unstable_batchedUpdates=function(g,d){return g(d)},Ut.useFormState=function(g,d,p){return f.H.useFormState(g,d,p)},Ut.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ut.version="19.1.0",Ut}var _g;function z0(){if(_g)return Jc.exports;_g=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}return e(),Jc.exports=L0(),Jc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg;function N0(){if(vg)return ol;vg=1;var e=O0(),i=af(),n=z0();function a(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function _(t){if(c(t)!==t)throw Error(a(188))}function g(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(a(188));return s!==t?null:t}for(var r=t,l=s;;){var o=r.return;if(o===null)break;var u=o.alternate;if(u===null){if(l=o.return,l!==null){r=l;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===r)return _(o),t;if(u===l)return _(o),s;u=u.sibling}throw Error(a(188))}if(r.return!==l.return)r=o,l=u;else{for(var v=!1,m=o.child;m;){if(m===r){v=!0,r=o,l=u;break}if(m===l){v=!0,l=o,r=u;break}m=m.sibling}if(!v){for(m=u.child;m;){if(m===r){v=!0,r=u,l=o;break}if(m===l){v=!0,l=u,r=o;break}m=m.sibling}if(!v)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:s}function d(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=d(t),s!==null)return s;t=t.sibling}return null}var p=Object.assign,S=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),ee=Symbol.for("react.consumer"),F=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Te=Symbol.for("react.activity"),lt=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function G(t){return t===null||typeof t!="object"?null:(t=ye&&t[ye]||t["@@iterator"],typeof t=="function"?t:null)}var W=Symbol.for("react.client.reference");function Z(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===W?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case T:return"Profiler";case C:return"StrictMode";case K:return"Suspense";case te:return"SuspenseList";case Te:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case F:return(t.displayName||"Context")+".Provider";case ee:return(t._context.displayName||"Context")+".Consumer";case j:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ue:return s=t.displayName||null,s!==null?s:Z(t.type)||"Memo";case pe:s=t._payload,t=t._init;try{return Z(t(s))}catch{}}return null}var I=Array.isArray,M=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},he=[],b=-1;function U(t){return{current:t}}function $(t){0>b||(t.current=he[b],he[b]=null,b--)}function Y(t,s){b++,he[b]=t.current,t.current=s}var J=U(null),fe=U(null),le=U(null),Ie=U(null);function Be(t,s){switch(Y(le,s),Y(fe,t),Y(J,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Lv(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Lv(s),t=zv(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(J),Y(J,t)}function Ye(){$(J),$(fe),$(le)}function Ae(t){t.memoizedState!==null&&Y(Ie,t);var s=J.current,r=zv(s,t.type);s!==r&&(Y(fe,t),Y(J,r))}function ti(t){fe.current===t&&($(J),$(fe)),Ie.current===t&&($(Ie),il._currentValue=L)}var at=Object.prototype.hasOwnProperty,me=e.unstable_scheduleCallback,Ai=e.unstable_cancelCallback,Ro=e.unstable_shouldYield,Kl=e.unstable_requestPaint,zt=e.unstable_now,Bo=e.unstable_getCurrentPriorityLevel,un=e.unstable_ImmediatePriority,fn=e.unstable_UserBlockingPriority,cs=e.unstable_NormalPriority,Yl=e.unstable_LowPriority,jl=e.unstable_IdlePriority,Ao=e.log,Oo=e.unstable_setDisableYieldValue,Vs=null,qt=null;function Oi(t){if(typeof Ao=="function"&&Oo(t),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Vs,t)}catch{}}var Vt=Math.clz32?Math.clz32:No,Lo=Math.log,zo=Math.LN2;function No(t){return t>>>=0,t===0?32:31-(Lo(t)/zo|0)|0}var Ws=256,Ks=4194304;function se(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ae(t,s,r){var l=t.pendingLanes;if(l===0)return 0;var o=0,u=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var m=l&134217727;return m!==0?(l=m&~u,l!==0?o=se(l):(v&=m,v!==0?o=se(v):r||(r=m&~t,r!==0&&(o=se(r))))):(m=l&~u,m!==0?o=se(m):v!==0?o=se(v):r||(r=l&~t,r!==0&&(o=se(r)))),o===0?0:s!==0&&s!==o&&(s&u)===0&&(u=o&-o,r=s&-s,u>=r||u===32&&(r&4194048)!==0)?s:o}function De(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Ve(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function it(){var t=Ws;return Ws<<=1,(Ws&4194048)===0&&(Ws=256),t}function ot(){var t=Ks;return Ks<<=1,(Ks&62914560)===0&&(Ks=4194304),t}function gr(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function us(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Il(t,s,r,l,o,u){var v=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var m=t.entanglements,y=t.expirationTimes,B=t.hiddenUpdates;for(r=v&~r;0<r;){var N=31-Vt(r),V=1<<N;m[N]=0,y[N]=-1;var A=B[N];if(A!==null)for(B[N]=null,N=0;N<A.length;N++){var O=A[N];O!==null&&(O.lane&=-536870913)}r&=~V}l!==0&&Sf(t,l,0),u!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=u&~(v&~s))}function Sf(t,s,r){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-Vt(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|r&4194090}function yf(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var l=31-Vt(r),o=1<<l;o&s|t[l]&s&&(t[l]|=s),r&=~o}}function Ho(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Uo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function bf(){var t=H.p;return t!==0?t:(t=window.event,t===void 0?32:eg(t.type))}function gp(t,s){var r=H.p;try{return H.p=t,s()}finally{H.p=r}}var fs=Math.random().toString(36).slice(2),Nt="__reactFiber$"+fs,It="__reactProps$"+fs,mr="__reactContainer$"+fs,Po="__reactEvents$"+fs,mp="__reactListeners$"+fs,pp="__reactHandles$"+fs,Cf="__reactResources$"+fs,dn="__reactMarker$"+fs;function qo(t){delete t[Nt],delete t[It],delete t[Po],delete t[mp],delete t[pp]}function pr(t){var s=t[Nt];if(s)return s;for(var r=t.parentNode;r;){if(s=r[mr]||r[Nt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Pv(t);t!==null;){if(r=t[Nt])return r;t=Pv(t)}return s}t=r,r=t.parentNode}return null}function Sr(t){if(t=t[Nt]||t[mr]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function _n(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(a(33))}function yr(t){var s=t[Cf];return s||(s=t[Cf]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function yt(t){t[dn]=!0}var wf=new Set,Ef={};function Ys(t,s){br(t,s),br(t+"Capture",s)}function br(t,s){for(Ef[t]=s,t=0;t<s.length;t++)wf.add(s[t])}var Sp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xf={},Mf={};function yp(t){return at.call(Mf,t)?!0:at.call(xf,t)?!1:Sp.test(t)?Mf[t]=!0:(xf[t]=!0,!1)}function Fl(t,s,r){if(yp(s))if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+r)}}function Xl(t,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+r)}}function ji(t,s,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(s,r,""+l)}}var Vo,Df;function Cr(t){if(Vo===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Vo=s&&s[1]||"",Df=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vo+t+Df}var Wo=!1;function Ko(t,s){if(!t||Wo)return"";Wo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(O){var A=O}Reflect.construct(t,[],V)}else{try{V.call()}catch(O){A=O}t.call(V.prototype)}}else{try{throw Error()}catch(O){A=O}(V=t())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(O){if(O&&A&&typeof O.stack=="string")return[O.stack,A.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=l.DetermineComponentFrameRoot(),v=u[0],m=u[1];if(v&&m){var y=v.split(`
`),B=m.split(`
`);for(o=l=0;l<y.length&&!y[l].includes("DetermineComponentFrameRoot");)l++;for(;o<B.length&&!B[o].includes("DetermineComponentFrameRoot");)o++;if(l===y.length||o===B.length)for(l=y.length-1,o=B.length-1;1<=l&&0<=o&&y[l]!==B[o];)o--;for(;1<=l&&0<=o;l--,o--)if(y[l]!==B[o]){if(l!==1||o!==1)do if(l--,o--,0>o||y[l]!==B[o]){var N=`
`+y[l].replace(" at new "," at ");return t.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",t.displayName)),N}while(1<=l&&0<=o);break}}}finally{Wo=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Cr(r):""}function bp(t){switch(t.tag){case 26:case 27:case 5:return Cr(t.type);case 16:return Cr("Lazy");case 13:return Cr("Suspense");case 19:return Cr("SuspenseList");case 0:case 15:return Ko(t.type,!1);case 11:return Ko(t.type.render,!1);case 1:return Ko(t.type,!0);case 31:return Cr("Activity");default:return""}}function kf(t){try{var s="";do s+=bp(t),t=t.return;while(t);return s}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function di(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tf(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Cp(t){var s=Tf(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),l=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,u=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return o.call(this)},set:function(v){l=""+v,u.call(this,v)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Gl(t){t._valueTracker||(t._valueTracker=Cp(t))}function Rf(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),l="";return t&&(l=Tf(t)?t.checked?"true":"false":t.value),t=l,t!==r?(s.setValue(t),!0):!1}function $l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var wp=/[\n"\\]/g;function _i(t){return t.replace(wp,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Yo(t,s,r,l,o,u,v,m){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+di(s)):t.value!==""+di(s)&&(t.value=""+di(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?jo(t,v,di(s)):r!=null?jo(t,v,di(r)):l!=null&&t.removeAttribute("value"),o==null&&u!=null&&(t.defaultChecked=!!u),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?t.name=""+di(m):t.removeAttribute("name")}function Bf(t,s,r,l,o,u,v,m){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(t.type=u),s!=null||r!=null){if(!(u!=="submit"&&u!=="reset"||s!=null))return;r=r!=null?""+di(r):"",s=s!=null?""+di(s):r,m||s===t.value||(t.value=s),t.defaultValue=s}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=m?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function jo(t,s,r){s==="number"&&$l(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function wr(t,s,r,l){if(t=t.options,s){s={};for(var o=0;o<r.length;o++)s["$"+r[o]]=!0;for(r=0;r<t.length;r++)o=s.hasOwnProperty("$"+t[r].value),t[r].selected!==o&&(t[r].selected=o),o&&l&&(t[r].defaultSelected=!0)}else{for(r=""+di(r),s=null,o=0;o<t.length;o++){if(t[o].value===r){t[o].selected=!0,l&&(t[o].defaultSelected=!0);return}s!==null||t[o].disabled||(s=t[o])}s!==null&&(s.selected=!0)}}function Af(t,s,r){if(s!=null&&(s=""+di(s),s!==t.value&&(t.value=s),r==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=r!=null?""+di(r):""}function Of(t,s,r,l){if(s==null){if(l!=null){if(r!=null)throw Error(a(92));if(I(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),s=r}r=di(s),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l)}function Er(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Ep=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lf(t,s,r){var l=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,r):typeof r!="number"||r===0||Ep.has(s)?s==="float"?t.cssFloat=r:t[s]=(""+r).trim():t[s]=r+"px"}function zf(t,s,r){if(s!=null&&typeof s!="object")throw Error(a(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var o in s)l=s[o],s.hasOwnProperty(o)&&r[o]!==l&&Lf(t,o,l)}else for(var u in s)s.hasOwnProperty(u)&&Lf(t,u,s[u])}function Io(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zl(t){return Mp.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Fo=null;function Xo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xr=null,Mr=null;function Nf(t){var s=Sr(t);if(s&&(t=s.stateNode)){var r=t[It]||null;e:switch(t=s.stateNode,s.type){case"input":if(Yo(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+_i(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var l=r[s];if(l!==t&&l.form===t.form){var o=l[It]||null;if(!o)throw Error(a(90));Yo(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(s=0;s<r.length;s++)l=r[s],l.form===t.form&&Rf(l)}break e;case"textarea":Af(t,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&wr(t,!!r.multiple,s,!1)}}}var Go=!1;function Hf(t,s,r){if(Go)return t(s,r);Go=!0;try{var l=t(s);return l}finally{if(Go=!1,(xr!==null||Mr!==null)&&(Na(),xr&&(s=xr,t=Mr,Mr=xr=null,Nf(s),t)))for(s=0;s<t.length;s++)Nf(t[s])}}function vn(t,s){var r=t.stateNode;if(r===null)return null;var l=r[It]||null;if(l===null)return null;r=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,s,typeof r));return r}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$o=!1;if(Ii)try{var gn={};Object.defineProperty(gn,"passive",{get:function(){$o=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch{$o=!1}var ds=null,Zo=null,Ql=null;function Uf(){if(Ql)return Ql;var t,s=Zo,r=s.length,l,o="value"in ds?ds.value:ds.textContent,u=o.length;for(t=0;t<r&&s[t]===o[t];t++);var v=r-t;for(l=1;l<=v&&s[r-l]===o[u-l];l++);return Ql=o.slice(t,1<l?1-l:void 0)}function Jl(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ea(){return!0}function Pf(){return!1}function Ft(t){function s(r,l,o,u,v){this._reactName=r,this._targetInst=o,this.type=l,this.nativeEvent=u,this.target=v,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(r=t[m],this[m]=r?r(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?ea:Pf,this.isPropagationStopped=Pf,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),s}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ta=Ft(js),mn=p({},js,{view:0,detail:0}),Dp=Ft(mn),Qo,Jo,pn,ia=p({},mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:th,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pn&&(pn&&t.type==="mousemove"?(Qo=t.screenX-pn.screenX,Jo=t.screenY-pn.screenY):Jo=Qo=0,pn=t),Qo)},movementY:function(t){return"movementY"in t?t.movementY:Jo}}),qf=Ft(ia),kp=p({},ia,{dataTransfer:0}),Tp=Ft(kp),Rp=p({},mn,{relatedTarget:0}),eh=Ft(Rp),Bp=p({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),Ap=Ft(Bp),Op=p({},js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lp=Ft(Op),zp=p({},js,{data:0}),Vf=Ft(zp),Np={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pp(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Up[t])?!!s[t]:!1}function th(){return Pp}var qp=p({},mn,{key:function(t){if(t.key){var s=Np[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:th,charCode:function(t){return t.type==="keypress"?Jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vp=Ft(qp),Wp=p({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wf=Ft(Wp),Kp=p({},mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:th}),Yp=Ft(Kp),jp=p({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ip=Ft(jp),Fp=p({},ia,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xp=Ft(Fp),Gp=p({},js,{newState:0,oldState:0}),$p=Ft(Gp),Zp=[9,13,27,32],ih=Ii&&"CompositionEvent"in window,Sn=null;Ii&&"documentMode"in document&&(Sn=document.documentMode);var Qp=Ii&&"TextEvent"in window&&!Sn,Kf=Ii&&(!ih||Sn&&8<Sn&&11>=Sn),Yf=" ",jf=!1;function If(t,s){switch(t){case"keyup":return Zp.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ff(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dr=!1;function Jp(t,s){switch(t){case"compositionend":return Ff(s);case"keypress":return s.which!==32?null:(jf=!0,Yf);case"textInput":return t=s.data,t===Yf&&jf?null:t;default:return null}}function eS(t,s){if(Dr)return t==="compositionend"||!ih&&If(t,s)?(t=Uf(),Ql=Zo=ds=null,Dr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Kf&&s.locale!=="ko"?null:s.data;default:return null}}var tS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!tS[t.type]:s==="textarea"}function Gf(t,s,r,l){xr?Mr?Mr.push(l):Mr=[l]:xr=l,s=Wa(s,"onChange"),0<s.length&&(r=new ta("onChange","change",null,r,l),t.push({event:r,listeners:s}))}var yn=null,bn=null;function iS(t){Tv(t,0)}function sa(t){var s=_n(t);if(Rf(s))return t}function $f(t,s){if(t==="change")return s}var Zf=!1;if(Ii){var sh;if(Ii){var rh="oninput"in document;if(!rh){var Qf=document.createElement("div");Qf.setAttribute("oninput","return;"),rh=typeof Qf.oninput=="function"}sh=rh}else sh=!1;Zf=sh&&(!document.documentMode||9<document.documentMode)}function Jf(){yn&&(yn.detachEvent("onpropertychange",ed),bn=yn=null)}function ed(t){if(t.propertyName==="value"&&sa(bn)){var s=[];Gf(s,bn,t,Xo(t)),Hf(iS,s)}}function sS(t,s,r){t==="focusin"?(Jf(),yn=s,bn=r,yn.attachEvent("onpropertychange",ed)):t==="focusout"&&Jf()}function rS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sa(bn)}function nS(t,s){if(t==="click")return sa(s)}function lS(t,s){if(t==="input"||t==="change")return sa(s)}function aS(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ii=typeof Object.is=="function"?Object.is:aS;function Cn(t,s){if(ii(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),l=Object.keys(s);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var o=r[l];if(!at.call(s,o)||!ii(t[o],s[o]))return!1}return!0}function td(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function id(t,s){var r=td(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=s&&l>=s)return{node:r,offset:s-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=td(r)}}function sd(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?sd(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function rd(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=$l(t.document);s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=$l(t.document)}return s}function nh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var oS=Ii&&"documentMode"in document&&11>=document.documentMode,kr=null,lh=null,wn=null,ah=!1;function nd(t,s,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ah||kr==null||kr!==$l(l)||(l=kr,"selectionStart"in l&&nh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),wn&&Cn(wn,l)||(wn=l,l=Wa(lh,"onSelect"),0<l.length&&(s=new ta("onSelect","select",null,s,r),t.push({event:s,listeners:l}),s.target=kr)))}function Is(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Tr={animationend:Is("Animation","AnimationEnd"),animationiteration:Is("Animation","AnimationIteration"),animationstart:Is("Animation","AnimationStart"),transitionrun:Is("Transition","TransitionRun"),transitionstart:Is("Transition","TransitionStart"),transitioncancel:Is("Transition","TransitionCancel"),transitionend:Is("Transition","TransitionEnd")},oh={},ld={};Ii&&(ld=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);function Fs(t){if(oh[t])return oh[t];if(!Tr[t])return t;var s=Tr[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in ld)return oh[t]=s[r];return t}var ad=Fs("animationend"),od=Fs("animationiteration"),hd=Fs("animationstart"),hS=Fs("transitionrun"),cS=Fs("transitionstart"),uS=Fs("transitioncancel"),cd=Fs("transitionend"),ud=new Map,hh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hh.push("scrollEnd");function ki(t,s){ud.set(t,s),Ys(s,[t])}var fd=new WeakMap;function vi(t,s){if(typeof t=="object"&&t!==null){var r=fd.get(t);return r!==void 0?r:(s={value:t,source:s,stack:kf(s)},fd.set(t,s),s)}return{value:t,source:s,stack:kf(s)}}var gi=[],Rr=0,ch=0;function ra(){for(var t=Rr,s=ch=Rr=0;s<t;){var r=gi[s];gi[s++]=null;var l=gi[s];gi[s++]=null;var o=gi[s];gi[s++]=null;var u=gi[s];if(gi[s++]=null,l!==null&&o!==null){var v=l.pending;v===null?o.next=o:(o.next=v.next,v.next=o),l.pending=o}u!==0&&dd(r,o,u)}}function na(t,s,r,l){gi[Rr++]=t,gi[Rr++]=s,gi[Rr++]=r,gi[Rr++]=l,ch|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function uh(t,s,r,l){return na(t,s,r,l),la(t)}function Br(t,s){return na(t,null,null,s),la(t)}function dd(t,s,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var o=!1,u=t.return;u!==null;)u.childLanes|=r,l=u.alternate,l!==null&&(l.childLanes|=r),u.tag===22&&(t=u.stateNode,t===null||t._visibility&1||(o=!0)),t=u,u=u.return;return t.tag===3?(u=t.stateNode,o&&s!==null&&(o=31-Vt(r),t=u.hiddenUpdates,l=t[o],l===null?t[o]=[s]:l.push(s),s.lane=r|536870912),u):null}function la(t){if(50<Xn)throw Xn=0,mc=null,Error(a(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Ar={};function fS(t,s,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(t,s,r,l){return new fS(t,s,r,l)}function fh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fi(t,s){var r=t.alternate;return r===null?(r=si(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function _d(t,s){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,s=r.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function aa(t,s,r,l,o,u){var v=0;if(l=t,typeof t=="function")fh(t)&&(v=1);else if(typeof t=="string")v=_0(t,r,J.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Te:return t=si(31,r,s,o),t.elementType=Te,t.lanes=u,t;case x:return Xs(r.children,o,u,s);case C:v=8,o|=24;break;case T:return t=si(12,r,s,o|2),t.elementType=T,t.lanes=u,t;case K:return t=si(13,r,s,o),t.elementType=K,t.lanes=u,t;case te:return t=si(19,r,s,o),t.elementType=te,t.lanes=u,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:case F:v=10;break e;case ee:v=9;break e;case j:v=11;break e;case ue:v=14;break e;case pe:v=16,l=null;break e}v=29,r=Error(a(130,t===null?"null":typeof t,"")),l=null}return s=si(v,r,s,o),s.elementType=t,s.type=l,s.lanes=u,s}function Xs(t,s,r,l){return t=si(7,t,l,s),t.lanes=r,t}function dh(t,s,r){return t=si(6,t,null,s),t.lanes=r,t}function _h(t,s,r){return s=si(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Or=[],Lr=0,oa=null,ha=0,mi=[],pi=0,Gs=null,Xi=1,Gi="";function $s(t,s){Or[Lr++]=ha,Or[Lr++]=oa,oa=t,ha=s}function vd(t,s,r){mi[pi++]=Xi,mi[pi++]=Gi,mi[pi++]=Gs,Gs=t;var l=Xi;t=Gi;var o=32-Vt(l)-1;l&=~(1<<o),r+=1;var u=32-Vt(s)+o;if(30<u){var v=o-o%5;u=(l&(1<<v)-1).toString(32),l>>=v,o-=v,Xi=1<<32-Vt(s)+o|r<<o|l,Gi=u+t}else Xi=1<<u|r<<o|l,Gi=t}function vh(t){t.return!==null&&($s(t,1),vd(t,1,0))}function gh(t){for(;t===oa;)oa=Or[--Lr],Or[Lr]=null,ha=Or[--Lr],Or[Lr]=null;for(;t===Gs;)Gs=mi[--pi],mi[pi]=null,Gi=mi[--pi],mi[pi]=null,Xi=mi[--pi],mi[pi]=null}var Wt=null,Qe=null,Oe=!1,Zs=null,Li=!1,mh=Error(a(519));function Qs(t){var s=Error(a(418,""));throw Mn(vi(s,t)),mh}function gd(t){var s=t.stateNode,r=t.type,l=t.memoizedProps;switch(s[Nt]=t,s[It]=l,r){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(r=0;r<$n.length;r++)Me($n[r],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":Me("invalid",s),Bf(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Gl(s);break;case"select":Me("invalid",s);break;case"textarea":Me("invalid",s),Of(s,l.value,l.defaultValue,l.children),Gl(s)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||l.suppressHydrationWarning===!0||Ov(s.textContent,r)?(l.popover!=null&&(Me("beforetoggle",s),Me("toggle",s)),l.onScroll!=null&&Me("scroll",s),l.onScrollEnd!=null&&Me("scrollend",s),l.onClick!=null&&(s.onclick=Ka),s=!0):s=!1,s||Qs(t)}function md(t){for(Wt=t.return;Wt;)switch(Wt.tag){case 5:case 13:Li=!1;return;case 27:case 3:Li=!0;return;default:Wt=Wt.return}}function En(t){if(t!==Wt)return!1;if(!Oe)return md(t),Oe=!0,!1;var s=t.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Oc(t.type,t.memoizedProps)),r=!r),r&&Qe&&Qs(t),md(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(r=t.data,r==="/$"){if(s===0){Qe=Ri(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++;t=t.nextSibling}Qe=null}}else s===27?(s=Qe,Ts(t.type)?(t=Hc,Hc=null,Qe=t):Qe=s):Qe=Wt?Ri(t.stateNode.nextSibling):null;return!0}function xn(){Qe=Wt=null,Oe=!1}function pd(){var t=Zs;return t!==null&&($t===null?$t=t:$t.push.apply($t,t),Zs=null),t}function Mn(t){Zs===null?Zs=[t]:Zs.push(t)}var ph=U(null),Js=null,$i=null;function _s(t,s,r){Y(ph,s._currentValue),s._currentValue=r}function Zi(t){t._currentValue=ph.current,$(ph)}function Sh(t,s,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===r)break;t=t.return}}function yh(t,s,r,l){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){var v=o.child;u=u.firstContext;e:for(;u!==null;){var m=u;u=o;for(var y=0;y<s.length;y++)if(m.context===s[y]){u.lanes|=r,m=u.alternate,m!==null&&(m.lanes|=r),Sh(u.return,r,t),l||(v=null);break e}u=m.next}}else if(o.tag===18){if(v=o.return,v===null)throw Error(a(341));v.lanes|=r,u=v.alternate,u!==null&&(u.lanes|=r),Sh(v,r,t),v=null}else v=o.child;if(v!==null)v.return=o;else for(v=o;v!==null;){if(v===t){v=null;break}if(o=v.sibling,o!==null){o.return=v.return,v=o;break}v=v.return}o=v}}function Dn(t,s,r,l){t=null;for(var o=s,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var v=o.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var m=o.type;ii(o.pendingProps.value,v.value)||(t!==null?t.push(m):t=[m])}}else if(o===Ie.current){if(v=o.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(il):t=[il])}o=o.return}t!==null&&yh(s,t,r,l),s.flags|=262144}function ca(t){for(t=t.firstContext;t!==null;){if(!ii(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function er(t){Js=t,$i=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ht(t){return Sd(Js,t)}function ua(t,s){return Js===null&&er(t),Sd(t,s)}function Sd(t,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},$i===null){if(t===null)throw Error(a(308));$i=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else $i=$i.next=s;return r}var dS=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(r){return r()})}},_S=e.unstable_scheduleCallback,vS=e.unstable_NormalPriority,_t={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bh(){return{controller:new dS,data:new Map,refCount:0}}function kn(t){t.refCount--,t.refCount===0&&_S(vS,function(){t.controller.abort()})}var Tn=null,Ch=0,zr=0,Nr=null;function gS(t,s){if(Tn===null){var r=Tn=[];Ch=0,zr=Ec(),Nr={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Ch++,s.then(yd,yd),s}function yd(){if(--Ch===0&&Tn!==null){Nr!==null&&(Nr.status="fulfilled");var t=Tn;Tn=null,zr=0,Nr=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function mS(t,s){var r=[],l={status:"pending",value:null,reason:null,then:function(o){r.push(o)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var o=0;o<r.length;o++)(0,r[o])(s)},function(o){for(l.status="rejected",l.reason=o,o=0;o<r.length;o++)(0,r[o])(void 0)}),l}var bd=M.S;M.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&gS(t,s),bd!==null&&bd(t,s)};var tr=U(null);function wh(){var t=tr.current;return t!==null?t:Ke.pooledCache}function fa(t,s){s===null?Y(tr,tr.current):Y(tr,s.pool)}function Cd(){var t=wh();return t===null?null:{parent:_t._currentValue,pool:t}}var Rn=Error(a(460)),wd=Error(a(474)),da=Error(a(542)),Eh={then:function(){}};function Ed(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _a(){}function xd(t,s,r){switch(r=t[r],r===void 0?t.push(s):r!==s&&(s.then(_a,_a),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Dd(t),t;default:if(typeof s.status=="string")s.then(_a,_a);else{if(t=Ke,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var o=s;o.status="fulfilled",o.value=l}},function(l){if(s.status==="pending"){var o=s;o.status="rejected",o.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Dd(t),t}throw Bn=s,Rn}}var Bn=null;function Md(){if(Bn===null)throw Error(a(459));var t=Bn;return Bn=null,t}function Dd(t){if(t===Rn||t===da)throw Error(a(483))}var vs=!1;function xh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function gs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ms(t,s,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Le&2)!==0){var o=l.pending;return o===null?s.next=s:(s.next=o.next,o.next=s),l.pending=s,s=la(t),dd(t,null,r),s}return na(t,l,s,r),la(t)}function An(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,r|=l,s.lanes=r,yf(t,r)}}function Dh(t,s){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var o=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};u===null?o=u=v:u=u.next=v,r=r.next}while(r!==null);u===null?o=u=s:u=u.next=s}else o=u=s;r={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}var kh=!1;function On(){if(kh){var t=Nr;if(t!==null)throw t}}function Ln(t,s,r,l){kh=!1;var o=t.updateQueue;vs=!1;var u=o.firstBaseUpdate,v=o.lastBaseUpdate,m=o.shared.pending;if(m!==null){o.shared.pending=null;var y=m,B=y.next;y.next=null,v===null?u=B:v.next=B,v=y;var N=t.alternate;N!==null&&(N=N.updateQueue,m=N.lastBaseUpdate,m!==v&&(m===null?N.firstBaseUpdate=B:m.next=B,N.lastBaseUpdate=y))}if(u!==null){var V=o.baseState;v=0,N=B=y=null,m=u;do{var A=m.lane&-536870913,O=A!==m.lane;if(O?(ke&A)===A:(l&A)===A){A!==0&&A===zr&&(kh=!0),N!==null&&(N=N.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var ve=t,de=m;A=s;var Ue=r;switch(de.tag){case 1:if(ve=de.payload,typeof ve=="function"){V=ve.call(Ue,V,A);break e}V=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=de.payload,A=typeof ve=="function"?ve.call(Ue,V,A):ve,A==null)break e;V=p({},V,A);break e;case 2:vs=!0}}A=m.callback,A!==null&&(t.flags|=64,O&&(t.flags|=8192),O=o.callbacks,O===null?o.callbacks=[A]:O.push(A))}else O={lane:A,tag:m.tag,payload:m.payload,callback:m.callback,next:null},N===null?(B=N=O,y=V):N=N.next=O,v|=A;if(m=m.next,m===null){if(m=o.shared.pending,m===null)break;O=m,m=O.next,O.next=null,o.lastBaseUpdate=O,o.shared.pending=null}}while(!0);N===null&&(y=V),o.baseState=y,o.firstBaseUpdate=B,o.lastBaseUpdate=N,u===null&&(o.shared.lanes=0),xs|=v,t.lanes=v,t.memoizedState=V}}function kd(t,s){if(typeof t!="function")throw Error(a(191,t));t.call(s)}function Td(t,s){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)kd(r[t],s)}var Hr=U(null),va=U(0);function Rd(t,s){t=rs,Y(va,t),Y(Hr,s),rs=t|s.baseLanes}function Th(){Y(va,rs),Y(Hr,Hr.current)}function Rh(){rs=va.current,$(Hr),$(va)}var ps=0,be=null,Ne=null,ht=null,ga=!1,Ur=!1,ir=!1,ma=0,zn=0,Pr=null,pS=0;function st(){throw Error(a(321))}function Bh(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!ii(t[r],s[r]))return!1;return!0}function Ah(t,s,r,l,o,u){return ps=u,be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,M.H=t===null||t.memoizedState===null?d_:__,ir=!1,u=r(l,o),ir=!1,Ur&&(u=Ad(s,r,l,o)),Bd(t),u}function Bd(t){M.H=wa;var s=Ne!==null&&Ne.next!==null;if(ps=0,ht=Ne=be=null,ga=!1,zn=0,Pr=null,s)throw Error(a(300));t===null||bt||(t=t.dependencies,t!==null&&ca(t)&&(bt=!0))}function Ad(t,s,r,l){be=t;var o=0;do{if(Ur&&(Pr=null),zn=0,Ur=!1,25<=o)throw Error(a(301));if(o+=1,ht=Ne=null,t.updateQueue!=null){var u=t.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}M.H=xS,u=s(r,l)}while(Ur);return u}function SS(){var t=M.H,s=t.useState()[0];return s=typeof s.then=="function"?Nn(s):s,t=t.useState()[0],(Ne!==null?Ne.memoizedState:null)!==t&&(be.flags|=1024),s}function Oh(){var t=ma!==0;return ma=0,t}function Lh(t,s,r){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r}function zh(t){if(ga){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}ga=!1}ps=0,ht=Ne=be=null,Ur=!1,zn=ma=0,Pr=null}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?be.memoizedState=ht=t:ht=ht.next=t,ht}function ct(){if(Ne===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Ne.next;var s=ht===null?be.memoizedState:ht.next;if(s!==null)ht=s,Ne=t;else{if(t===null)throw be.alternate===null?Error(a(467)):Error(a(310));Ne=t,t={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},ht===null?be.memoizedState=ht=t:ht=ht.next=t}return ht}function Nh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nn(t){var s=zn;return zn+=1,Pr===null&&(Pr=[]),t=xd(Pr,t,s),s=be,(ht===null?s.memoizedState:ht.next)===null&&(s=s.alternate,M.H=s===null||s.memoizedState===null?d_:__),t}function pa(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Nn(t);if(t.$$typeof===F)return Ht(t)}throw Error(a(438,String(t)))}function Hh(t){var s=null,r=be.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var l=be.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(o){return o.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Nh(),be.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(t),l=0;l<t;l++)r[l]=lt;return s.index++,r}function Qi(t,s){return typeof s=="function"?s(t):s}function Sa(t){var s=ct();return Uh(s,Ne,t)}function Uh(t,s,r){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var o=t.baseQueue,u=l.pending;if(u!==null){if(o!==null){var v=o.next;o.next=u.next,u.next=v}s.baseQueue=o=u,l.pending=null}if(u=t.baseState,o===null)t.memoizedState=u;else{s=o.next;var m=v=null,y=null,B=s,N=!1;do{var V=B.lane&-536870913;if(V!==B.lane?(ke&V)===V:(ps&V)===V){var A=B.revertLane;if(A===0)y!==null&&(y=y.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),V===zr&&(N=!0);else if((ps&A)===A){B=B.next,A===zr&&(N=!0);continue}else V={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},y===null?(m=y=V,v=u):y=y.next=V,be.lanes|=A,xs|=A;V=B.action,ir&&r(u,V),u=B.hasEagerState?B.eagerState:r(u,V)}else A={lane:V,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},y===null?(m=y=A,v=u):y=y.next=A,be.lanes|=V,xs|=V;B=B.next}while(B!==null&&B!==s);if(y===null?v=u:y.next=m,!ii(u,t.memoizedState)&&(bt=!0,N&&(r=Nr,r!==null)))throw r;t.memoizedState=u,t.baseState=v,t.baseQueue=y,l.lastRenderedState=u}return o===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ph(t){var s=ct(),r=s.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var l=r.dispatch,o=r.pending,u=s.memoizedState;if(o!==null){r.pending=null;var v=o=o.next;do u=t(u,v.action),v=v.next;while(v!==o);ii(u,s.memoizedState)||(bt=!0),s.memoizedState=u,s.baseQueue===null&&(s.baseState=u),r.lastRenderedState=u}return[u,l]}function Od(t,s,r){var l=be,o=ct(),u=Oe;if(u){if(r===void 0)throw Error(a(407));r=r()}else r=s();var v=!ii((Ne||o).memoizedState,r);v&&(o.memoizedState=r,bt=!0),o=o.queue;var m=Nd.bind(null,l,o,t);if(Hn(2048,8,m,[t]),o.getSnapshot!==s||v||ht!==null&&ht.memoizedState.tag&1){if(l.flags|=2048,qr(9,ya(),zd.bind(null,l,o,r,s),null),Ke===null)throw Error(a(349));u||(ps&124)!==0||Ld(l,s,r)}return r}function Ld(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=be.updateQueue,s===null?(s=Nh(),be.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function zd(t,s,r,l){s.value=r,s.getSnapshot=l,Hd(s)&&Ud(t)}function Nd(t,s,r){return r(function(){Hd(s)&&Ud(t)})}function Hd(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!ii(t,r)}catch{return!0}}function Ud(t){var s=Br(t,2);s!==null&&oi(s,t,2)}function qh(t){var s=Xt();if(typeof t=="function"){var r=t;if(t=r(),ir){Oi(!0);try{r()}finally{Oi(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:t},s}function Pd(t,s,r,l){return t.baseState=r,Uh(t,Ne,typeof l=="function"?l:Qi)}function yS(t,s,r,l,o){if(Ca(t))throw Error(a(485));if(t=s.action,t!==null){var u={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){u.listeners.push(v)}};M.T!==null?r(!0):u.isTransition=!1,l(u),r=s.pending,r===null?(u.next=s.pending=u,qd(s,u)):(u.next=r.next,s.pending=r.next=u)}}function qd(t,s){var r=s.action,l=s.payload,o=t.state;if(s.isTransition){var u=M.T,v={};M.T=v;try{var m=r(o,l),y=M.S;y!==null&&y(v,m),Vd(t,s,m)}catch(B){Vh(t,s,B)}finally{M.T=u}}else try{u=r(o,l),Vd(t,s,u)}catch(B){Vh(t,s,B)}}function Vd(t,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Wd(t,s,l)},function(l){return Vh(t,s,l)}):Wd(t,s,r)}function Wd(t,s,r){s.status="fulfilled",s.value=r,Kd(s),t.state=r,s=t.pending,s!==null&&(r=s.next,r===s?t.pending=null:(r=r.next,s.next=r,qd(t,r)))}function Vh(t,s,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=r,Kd(s),s=s.next;while(s!==l)}t.action=null}function Kd(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Yd(t,s){return s}function jd(t,s){if(Oe){var r=Ke.formState;if(r!==null){e:{var l=be;if(Oe){if(Qe){t:{for(var o=Qe,u=Li;o.nodeType!==8;){if(!u){o=null;break t}if(o=Ri(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){Qe=Ri(o.nextSibling),l=o.data==="F!";break e}}Qs(l)}l=!1}l&&(s=r[0])}}return r=Xt(),r.memoizedState=r.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:s},r.queue=l,r=c_.bind(null,be,l),l.dispatch=r,l=qh(!1),u=Ih.bind(null,be,!1,l.queue),l=Xt(),o={state:s,dispatch:null,action:t,pending:null},l.queue=o,r=yS.bind(null,be,o,u,r),o.dispatch=r,l.memoizedState=t,[s,r,!1]}function Id(t){var s=ct();return Fd(s,Ne,t)}function Fd(t,s,r){if(s=Uh(t,s,Yd)[0],t=Sa(Qi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Nn(s)}catch(v){throw v===Rn?da:v}else l=s;s=ct();var o=s.queue,u=o.dispatch;return r!==s.memoizedState&&(be.flags|=2048,qr(9,ya(),bS.bind(null,o,r),null)),[l,u,t]}function bS(t,s){t.action=s}function Xd(t){var s=ct(),r=Ne;if(r!==null)return Fd(s,r,t);ct(),s=s.memoizedState,r=ct();var l=r.queue.dispatch;return r.memoizedState=t,[s,l,!1]}function qr(t,s,r,l){return t={tag:t,create:r,deps:l,inst:s,next:null},s=be.updateQueue,s===null&&(s=Nh(),be.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,s.lastEffect=t),t}function ya(){return{destroy:void 0,resource:void 0}}function Gd(){return ct().memoizedState}function ba(t,s,r,l){var o=Xt();l=l===void 0?null:l,be.flags|=t,o.memoizedState=qr(1|s,ya(),r,l)}function Hn(t,s,r,l){var o=ct();l=l===void 0?null:l;var u=o.memoizedState.inst;Ne!==null&&l!==null&&Bh(l,Ne.memoizedState.deps)?o.memoizedState=qr(s,u,r,l):(be.flags|=t,o.memoizedState=qr(1|s,u,r,l))}function $d(t,s){ba(8390656,8,t,s)}function Zd(t,s){Hn(2048,8,t,s)}function Qd(t,s){return Hn(4,2,t,s)}function Jd(t,s){return Hn(4,4,t,s)}function e_(t,s){if(typeof s=="function"){t=t();var r=s(t);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function t_(t,s,r){r=r!=null?r.concat([t]):null,Hn(4,4,e_.bind(null,s,t),r)}function Wh(){}function i_(t,s){var r=ct();s=s===void 0?null:s;var l=r.memoizedState;return s!==null&&Bh(s,l[1])?l[0]:(r.memoizedState=[t,s],t)}function s_(t,s){var r=ct();s=s===void 0?null:s;var l=r.memoizedState;if(s!==null&&Bh(s,l[1]))return l[0];if(l=t(),ir){Oi(!0);try{t()}finally{Oi(!1)}}return r.memoizedState=[l,s],l}function Kh(t,s,r){return r===void 0||(ps&1073741824)!==0?t.memoizedState=s:(t.memoizedState=r,t=lv(),be.lanes|=t,xs|=t,r)}function r_(t,s,r,l){return ii(r,s)?r:Hr.current!==null?(t=Kh(t,r,l),ii(t,s)||(bt=!0),t):(ps&42)===0?(bt=!0,t.memoizedState=r):(t=lv(),be.lanes|=t,xs|=t,s)}function n_(t,s,r,l,o){var u=H.p;H.p=u!==0&&8>u?u:8;var v=M.T,m={};M.T=m,Ih(t,!1,s,r);try{var y=o(),B=M.S;if(B!==null&&B(m,y),y!==null&&typeof y=="object"&&typeof y.then=="function"){var N=mS(y,l);Un(t,s,N,ai(t))}else Un(t,s,l,ai(t))}catch(V){Un(t,s,{then:function(){},status:"rejected",reason:V},ai())}finally{H.p=u,M.T=v}}function CS(){}function Yh(t,s,r,l){if(t.tag!==5)throw Error(a(476));var o=l_(t).queue;n_(t,o,s,L,r===null?CS:function(){return a_(t),r(l)})}function l_(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:L},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:r},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function a_(t){var s=l_(t).next.queue;Un(t,s,{},ai())}function jh(){return Ht(il)}function o_(){return ct().memoizedState}function h_(){return ct().memoizedState}function wS(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var r=ai();t=gs(r);var l=ms(s,t,r);l!==null&&(oi(l,s,r),An(l,s,r)),s={cache:bh()},t.payload=s;return}s=s.return}}function ES(t,s,r){var l=ai();r={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Ca(t)?u_(s,r):(r=uh(t,s,r,l),r!==null&&(oi(r,t,l),f_(r,s,l)))}function c_(t,s,r){var l=ai();Un(t,s,r,l)}function Un(t,s,r,l){var o={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ca(t))u_(s,o);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=s.lastRenderedReducer,u!==null))try{var v=s.lastRenderedState,m=u(v,r);if(o.hasEagerState=!0,o.eagerState=m,ii(m,v))return na(t,s,o,0),Ke===null&&ra(),!1}catch{}finally{}if(r=uh(t,s,o,l),r!==null)return oi(r,t,l),f_(r,s,l),!0}return!1}function Ih(t,s,r,l){if(l={lane:2,revertLane:Ec(),action:l,hasEagerState:!1,eagerState:null,next:null},Ca(t)){if(s)throw Error(a(479))}else s=uh(t,r,l,2),s!==null&&oi(s,t,2)}function Ca(t){var s=t.alternate;return t===be||s!==null&&s===be}function u_(t,s){Ur=ga=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function f_(t,s,r){if((r&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,r|=l,s.lanes=r,yf(t,r)}}var wa={readContext:Ht,use:pa,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st},d_={readContext:Ht,use:pa,useCallback:function(t,s){return Xt().memoizedState=[t,s===void 0?null:s],t},useContext:Ht,useEffect:$d,useImperativeHandle:function(t,s,r){r=r!=null?r.concat([t]):null,ba(4194308,4,e_.bind(null,s,t),r)},useLayoutEffect:function(t,s){return ba(4194308,4,t,s)},useInsertionEffect:function(t,s){ba(4,2,t,s)},useMemo:function(t,s){var r=Xt();s=s===void 0?null:s;var l=t();if(ir){Oi(!0);try{t()}finally{Oi(!1)}}return r.memoizedState=[l,s],l},useReducer:function(t,s,r){var l=Xt();if(r!==void 0){var o=r(s);if(ir){Oi(!0);try{r(s)}finally{Oi(!1)}}}else o=s;return l.memoizedState=l.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},l.queue=t,t=t.dispatch=ES.bind(null,be,t),[l.memoizedState,t]},useRef:function(t){var s=Xt();return t={current:t},s.memoizedState=t},useState:function(t){t=qh(t);var s=t.queue,r=c_.bind(null,be,s);return s.dispatch=r,[t.memoizedState,r]},useDebugValue:Wh,useDeferredValue:function(t,s){var r=Xt();return Kh(r,t,s)},useTransition:function(){var t=qh(!1);return t=n_.bind(null,be,t.queue,!0,!1),Xt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,r){var l=be,o=Xt();if(Oe){if(r===void 0)throw Error(a(407));r=r()}else{if(r=s(),Ke===null)throw Error(a(349));(ke&124)!==0||Ld(l,s,r)}o.memoizedState=r;var u={value:r,getSnapshot:s};return o.queue=u,$d(Nd.bind(null,l,u,t),[t]),l.flags|=2048,qr(9,ya(),zd.bind(null,l,u,r,s),null),r},useId:function(){var t=Xt(),s=Ke.identifierPrefix;if(Oe){var r=Gi,l=Xi;r=(l&~(1<<32-Vt(l)-1)).toString(32)+r,s=""+s+"R"+r,r=ma++,0<r&&(s+="H"+r.toString(32)),s+=""}else r=pS++,s=""+s+"r"+r.toString(32)+"";return t.memoizedState=s},useHostTransitionStatus:jh,useFormState:jd,useActionState:jd,useOptimistic:function(t){var s=Xt();s.memoizedState=s.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Ih.bind(null,be,!0,r),r.dispatch=s,[t,s]},useMemoCache:Hh,useCacheRefresh:function(){return Xt().memoizedState=wS.bind(null,be)}},__={readContext:Ht,use:pa,useCallback:i_,useContext:Ht,useEffect:Zd,useImperativeHandle:t_,useInsertionEffect:Qd,useLayoutEffect:Jd,useMemo:s_,useReducer:Sa,useRef:Gd,useState:function(){return Sa(Qi)},useDebugValue:Wh,useDeferredValue:function(t,s){var r=ct();return r_(r,Ne.memoizedState,t,s)},useTransition:function(){var t=Sa(Qi)[0],s=ct().memoizedState;return[typeof t=="boolean"?t:Nn(t),s]},useSyncExternalStore:Od,useId:o_,useHostTransitionStatus:jh,useFormState:Id,useActionState:Id,useOptimistic:function(t,s){var r=ct();return Pd(r,Ne,t,s)},useMemoCache:Hh,useCacheRefresh:h_},xS={readContext:Ht,use:pa,useCallback:i_,useContext:Ht,useEffect:Zd,useImperativeHandle:t_,useInsertionEffect:Qd,useLayoutEffect:Jd,useMemo:s_,useReducer:Ph,useRef:Gd,useState:function(){return Ph(Qi)},useDebugValue:Wh,useDeferredValue:function(t,s){var r=ct();return Ne===null?Kh(r,t,s):r_(r,Ne.memoizedState,t,s)},useTransition:function(){var t=Ph(Qi)[0],s=ct().memoizedState;return[typeof t=="boolean"?t:Nn(t),s]},useSyncExternalStore:Od,useId:o_,useHostTransitionStatus:jh,useFormState:Xd,useActionState:Xd,useOptimistic:function(t,s){var r=ct();return Ne!==null?Pd(r,Ne,t,s):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Hh,useCacheRefresh:h_},Vr=null,Pn=0;function Ea(t){var s=Pn;return Pn+=1,Vr===null&&(Vr=[]),xd(Vr,t,s)}function qn(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function xa(t,s){throw s.$$typeof===S?Error(a(525)):(t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function v_(t){var s=t._init;return s(t._payload)}function g_(t){function s(D,w){if(t){var R=D.deletions;R===null?(D.deletions=[w],D.flags|=16):R.push(w)}}function r(D,w){if(!t)return null;for(;w!==null;)s(D,w),w=w.sibling;return null}function l(D){for(var w=new Map;D!==null;)D.key!==null?w.set(D.key,D):w.set(D.index,D),D=D.sibling;return w}function o(D,w){return D=Fi(D,w),D.index=0,D.sibling=null,D}function u(D,w,R){return D.index=R,t?(R=D.alternate,R!==null?(R=R.index,R<w?(D.flags|=67108866,w):R):(D.flags|=67108866,w)):(D.flags|=1048576,w)}function v(D){return t&&D.alternate===null&&(D.flags|=67108866),D}function m(D,w,R,P){return w===null||w.tag!==6?(w=dh(R,D.mode,P),w.return=D,w):(w=o(w,R),w.return=D,w)}function y(D,w,R,P){var ne=R.type;return ne===x?N(D,w,R.props.children,P,R.key):w!==null&&(w.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===pe&&v_(ne)===w.type)?(w=o(w,R.props),qn(w,R),w.return=D,w):(w=aa(R.type,R.key,R.props,null,D.mode,P),qn(w,R),w.return=D,w)}function B(D,w,R,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==R.containerInfo||w.stateNode.implementation!==R.implementation?(w=_h(R,D.mode,P),w.return=D,w):(w=o(w,R.children||[]),w.return=D,w)}function N(D,w,R,P,ne){return w===null||w.tag!==7?(w=Xs(R,D.mode,P,ne),w.return=D,w):(w=o(w,R),w.return=D,w)}function V(D,w,R){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=dh(""+w,D.mode,R),w.return=D,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case E:return R=aa(w.type,w.key,w.props,null,D.mode,R),qn(R,w),R.return=D,R;case k:return w=_h(w,D.mode,R),w.return=D,w;case pe:var P=w._init;return w=P(w._payload),V(D,w,R)}if(I(w)||G(w))return w=Xs(w,D.mode,R,null),w.return=D,w;if(typeof w.then=="function")return V(D,Ea(w),R);if(w.$$typeof===F)return V(D,ua(D,w),R);xa(D,w)}return null}function A(D,w,R,P){var ne=w!==null?w.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return ne!==null?null:m(D,w,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case E:return R.key===ne?y(D,w,R,P):null;case k:return R.key===ne?B(D,w,R,P):null;case pe:return ne=R._init,R=ne(R._payload),A(D,w,R,P)}if(I(R)||G(R))return ne!==null?null:N(D,w,R,P,null);if(typeof R.then=="function")return A(D,w,Ea(R),P);if(R.$$typeof===F)return A(D,w,ua(D,R),P);xa(D,R)}return null}function O(D,w,R,P,ne){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return D=D.get(R)||null,m(w,D,""+P,ne);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case E:return D=D.get(P.key===null?R:P.key)||null,y(w,D,P,ne);case k:return D=D.get(P.key===null?R:P.key)||null,B(w,D,P,ne);case pe:var Ee=P._init;return P=Ee(P._payload),O(D,w,R,P,ne)}if(I(P)||G(P))return D=D.get(R)||null,N(w,D,P,ne,null);if(typeof P.then=="function")return O(D,w,R,Ea(P),ne);if(P.$$typeof===F)return O(D,w,R,ua(w,P),ne);xa(w,P)}return null}function ve(D,w,R,P){for(var ne=null,Ee=null,ce=w,_e=w=0,wt=null;ce!==null&&_e<R.length;_e++){ce.index>_e?(wt=ce,ce=null):wt=ce.sibling;var Re=A(D,ce,R[_e],P);if(Re===null){ce===null&&(ce=wt);break}t&&ce&&Re.alternate===null&&s(D,ce),w=u(Re,w,_e),Ee===null?ne=Re:Ee.sibling=Re,Ee=Re,ce=wt}if(_e===R.length)return r(D,ce),Oe&&$s(D,_e),ne;if(ce===null){for(;_e<R.length;_e++)ce=V(D,R[_e],P),ce!==null&&(w=u(ce,w,_e),Ee===null?ne=ce:Ee.sibling=ce,Ee=ce);return Oe&&$s(D,_e),ne}for(ce=l(ce);_e<R.length;_e++)wt=O(ce,D,_e,R[_e],P),wt!==null&&(t&&wt.alternate!==null&&ce.delete(wt.key===null?_e:wt.key),w=u(wt,w,_e),Ee===null?ne=wt:Ee.sibling=wt,Ee=wt);return t&&ce.forEach(function(Ls){return s(D,Ls)}),Oe&&$s(D,_e),ne}function de(D,w,R,P){if(R==null)throw Error(a(151));for(var ne=null,Ee=null,ce=w,_e=w=0,wt=null,Re=R.next();ce!==null&&!Re.done;_e++,Re=R.next()){ce.index>_e?(wt=ce,ce=null):wt=ce.sibling;var Ls=A(D,ce,Re.value,P);if(Ls===null){ce===null&&(ce=wt);break}t&&ce&&Ls.alternate===null&&s(D,ce),w=u(Ls,w,_e),Ee===null?ne=Ls:Ee.sibling=Ls,Ee=Ls,ce=wt}if(Re.done)return r(D,ce),Oe&&$s(D,_e),ne;if(ce===null){for(;!Re.done;_e++,Re=R.next())Re=V(D,Re.value,P),Re!==null&&(w=u(Re,w,_e),Ee===null?ne=Re:Ee.sibling=Re,Ee=Re);return Oe&&$s(D,_e),ne}for(ce=l(ce);!Re.done;_e++,Re=R.next())Re=O(ce,D,_e,Re.value,P),Re!==null&&(t&&Re.alternate!==null&&ce.delete(Re.key===null?_e:Re.key),w=u(Re,w,_e),Ee===null?ne=Re:Ee.sibling=Re,Ee=Re);return t&&ce.forEach(function(M0){return s(D,M0)}),Oe&&$s(D,_e),ne}function Ue(D,w,R,P){if(typeof R=="object"&&R!==null&&R.type===x&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case E:e:{for(var ne=R.key;w!==null;){if(w.key===ne){if(ne=R.type,ne===x){if(w.tag===7){r(D,w.sibling),P=o(w,R.props.children),P.return=D,D=P;break e}}else if(w.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===pe&&v_(ne)===w.type){r(D,w.sibling),P=o(w,R.props),qn(P,R),P.return=D,D=P;break e}r(D,w);break}else s(D,w);w=w.sibling}R.type===x?(P=Xs(R.props.children,D.mode,P,R.key),P.return=D,D=P):(P=aa(R.type,R.key,R.props,null,D.mode,P),qn(P,R),P.return=D,D=P)}return v(D);case k:e:{for(ne=R.key;w!==null;){if(w.key===ne)if(w.tag===4&&w.stateNode.containerInfo===R.containerInfo&&w.stateNode.implementation===R.implementation){r(D,w.sibling),P=o(w,R.children||[]),P.return=D,D=P;break e}else{r(D,w);break}else s(D,w);w=w.sibling}P=_h(R,D.mode,P),P.return=D,D=P}return v(D);case pe:return ne=R._init,R=ne(R._payload),Ue(D,w,R,P)}if(I(R))return ve(D,w,R,P);if(G(R)){if(ne=G(R),typeof ne!="function")throw Error(a(150));return R=ne.call(R),de(D,w,R,P)}if(typeof R.then=="function")return Ue(D,w,Ea(R),P);if(R.$$typeof===F)return Ue(D,w,ua(D,R),P);xa(D,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,w!==null&&w.tag===6?(r(D,w.sibling),P=o(w,R),P.return=D,D=P):(r(D,w),P=dh(R,D.mode,P),P.return=D,D=P),v(D)):r(D,w)}return function(D,w,R,P){try{Pn=0;var ne=Ue(D,w,R,P);return Vr=null,ne}catch(ce){if(ce===Rn||ce===da)throw ce;var Ee=si(29,ce,null,D.mode);return Ee.lanes=P,Ee.return=D,Ee}finally{}}}var Wr=g_(!0),m_=g_(!1),Si=U(null),zi=null;function Ss(t){var s=t.alternate;Y(vt,vt.current&1),Y(Si,t),zi===null&&(s===null||Hr.current!==null||s.memoizedState!==null)&&(zi=t)}function p_(t){if(t.tag===22){if(Y(vt,vt.current),Y(Si,t),zi===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(zi=t)}}else ys()}function ys(){Y(vt,vt.current),Y(Si,Si.current)}function Ji(t){$(Si),zi===t&&(zi=null),$(vt)}var vt=U(0);function Ma(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Nc(r)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Fh(t,s,r,l){s=t.memoizedState,r=r(l,s),r=r==null?s:p({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Xh={enqueueSetState:function(t,s,r){t=t._reactInternals;var l=ai(),o=gs(l);o.payload=s,r!=null&&(o.callback=r),s=ms(t,o,l),s!==null&&(oi(s,t,l),An(s,t,l))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var l=ai(),o=gs(l);o.tag=1,o.payload=s,r!=null&&(o.callback=r),s=ms(t,o,l),s!==null&&(oi(s,t,l),An(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=ai(),l=gs(r);l.tag=2,s!=null&&(l.callback=s),s=ms(t,l,r),s!==null&&(oi(s,t,r),An(s,t,r))}};function S_(t,s,r,l,o,u,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,u,v):s.prototype&&s.prototype.isPureReactComponent?!Cn(r,l)||!Cn(o,u):!0}function y_(t,s,r,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,l),s.state!==t&&Xh.enqueueReplaceState(s,s.state,null)}function sr(t,s){var r=s;if("ref"in s){r={};for(var l in s)l!=="ref"&&(r[l]=s[l])}if(t=t.defaultProps){r===s&&(r=p({},r));for(var o in t)r[o]===void 0&&(r[o]=t[o])}return r}var Da=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function b_(t){Da(t)}function C_(t){console.error(t)}function w_(t){Da(t)}function ka(t,s){try{var r=t.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function E_(t,s,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Gh(t,s,r){return r=gs(r),r.tag=3,r.payload={element:null},r.callback=function(){ka(t,s)},r}function x_(t){return t=gs(t),t.tag=3,t}function M_(t,s,r,l){var o=r.type.getDerivedStateFromError;if(typeof o=="function"){var u=l.value;t.payload=function(){return o(u)},t.callback=function(){E_(s,r,l)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){E_(s,r,l),typeof o!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var m=l.stack;this.componentDidCatch(l.value,{componentStack:m!==null?m:""})})}function MS(t,s,r,l,o){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=r.alternate,s!==null&&Dn(s,r,o,!0),r=Si.current,r!==null){switch(r.tag){case 13:return zi===null?Sc():r.alternate===null&&Je===0&&(Je=3),r.flags&=-257,r.flags|=65536,r.lanes=o,l===Eh?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([l]):s.add(l),bc(t,l,o)),!1;case 22:return r.flags|=65536,l===Eh?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([l]):r.add(l)),bc(t,l,o)),!1}throw Error(a(435,r.tag))}return bc(t,l,o),Sc(),!1}if(Oe)return s=Si.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=o,l!==mh&&(t=Error(a(422),{cause:l}),Mn(vi(t,r)))):(l!==mh&&(s=Error(a(423),{cause:l}),Mn(vi(s,r))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,l=vi(l,r),o=Gh(t.stateNode,l,o),Dh(t,o),Je!==4&&(Je=2)),!1;var u=Error(a(520),{cause:l});if(u=vi(u,r),Fn===null?Fn=[u]:Fn.push(u),Je!==4&&(Je=2),s===null)return!0;l=vi(l,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,t=o&-o,r.lanes|=t,t=Gh(r.stateNode,l,t),Dh(r,t),!1;case 1:if(s=r.type,u=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Ms===null||!Ms.has(u))))return r.flags|=65536,o&=-o,r.lanes|=o,o=x_(o),M_(o,t,r,l),Dh(r,o),!1}r=r.return}while(r!==null);return!1}var D_=Error(a(461)),bt=!1;function Tt(t,s,r,l){s.child=t===null?m_(s,null,r,l):Wr(s,t.child,r,l)}function k_(t,s,r,l,o){r=r.render;var u=s.ref;if("ref"in l){var v={};for(var m in l)m!=="ref"&&(v[m]=l[m])}else v=l;return er(s),l=Ah(t,s,r,v,u,o),m=Oh(),t!==null&&!bt?(Lh(t,s,o),es(t,s,o)):(Oe&&m&&vh(s),s.flags|=1,Tt(t,s,l,o),s.child)}function T_(t,s,r,l,o){if(t===null){var u=r.type;return typeof u=="function"&&!fh(u)&&u.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=u,R_(t,s,u,l,o)):(t=aa(r.type,null,l,s,s.mode,o),t.ref=s.ref,t.return=s,s.child=t)}if(u=t.child,!sc(t,o)){var v=u.memoizedProps;if(r=r.compare,r=r!==null?r:Cn,r(v,l)&&t.ref===s.ref)return es(t,s,o)}return s.flags|=1,t=Fi(u,l),t.ref=s.ref,t.return=s,s.child=t}function R_(t,s,r,l,o){if(t!==null){var u=t.memoizedProps;if(Cn(u,l)&&t.ref===s.ref)if(bt=!1,s.pendingProps=l=u,sc(t,o))(t.flags&131072)!==0&&(bt=!0);else return s.lanes=t.lanes,es(t,s,o)}return $h(t,s,r,l,o)}function B_(t,s,r){var l=s.pendingProps,o=l.children,u=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=u!==null?u.baseLanes|r:r,t!==null){for(o=s.child=t.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;s.childLanes=u&~l}else s.childLanes=0,s.child=null;return A_(t,s,l,r)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&fa(s,u!==null?u.cachePool:null),u!==null?Rd(s,u):Th(),p_(s);else return s.lanes=s.childLanes=536870912,A_(t,s,u!==null?u.baseLanes|r:r,r)}else u!==null?(fa(s,u.cachePool),Rd(s,u),ys(),s.memoizedState=null):(t!==null&&fa(s,null),Th(),ys());return Tt(t,s,o,r),s.child}function A_(t,s,r,l){var o=wh();return o=o===null?null:{parent:_t._currentValue,pool:o},s.memoizedState={baseLanes:r,cachePool:o},t!==null&&fa(s,null),Th(),p_(s),t!==null&&Dn(t,s,l,!0),null}function Ta(t,s){var r=s.ref;if(r===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(s.flags|=4194816)}}function $h(t,s,r,l,o){return er(s),r=Ah(t,s,r,l,void 0,o),l=Oh(),t!==null&&!bt?(Lh(t,s,o),es(t,s,o)):(Oe&&l&&vh(s),s.flags|=1,Tt(t,s,r,o),s.child)}function O_(t,s,r,l,o,u){return er(s),s.updateQueue=null,r=Ad(s,l,r,o),Bd(t),l=Oh(),t!==null&&!bt?(Lh(t,s,u),es(t,s,u)):(Oe&&l&&vh(s),s.flags|=1,Tt(t,s,r,u),s.child)}function L_(t,s,r,l,o){if(er(s),s.stateNode===null){var u=Ar,v=r.contextType;typeof v=="object"&&v!==null&&(u=Ht(v)),u=new r(l,u),s.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Xh,s.stateNode=u,u._reactInternals=s,u=s.stateNode,u.props=l,u.state=s.memoizedState,u.refs={},xh(s),v=r.contextType,u.context=typeof v=="object"&&v!==null?Ht(v):Ar,u.state=s.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Fh(s,r,v,l),u.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(v=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),v!==u.state&&Xh.enqueueReplaceState(u,u.state,null),Ln(s,l,u,o),On(),u.state=s.memoizedState),typeof u.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){u=s.stateNode;var m=s.memoizedProps,y=sr(r,m);u.props=y;var B=u.context,N=r.contextType;v=Ar,typeof N=="object"&&N!==null&&(v=Ht(N));var V=r.getDerivedStateFromProps;N=typeof V=="function"||typeof u.getSnapshotBeforeUpdate=="function",m=s.pendingProps!==m,N||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(m||B!==v)&&y_(s,u,l,v),vs=!1;var A=s.memoizedState;u.state=A,Ln(s,l,u,o),On(),B=s.memoizedState,m||A!==B||vs?(typeof V=="function"&&(Fh(s,r,V,l),B=s.memoizedState),(y=vs||S_(s,r,y,l,A,B,v))?(N||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(s.flags|=4194308)):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=B),u.props=l,u.state=B,u.context=v,l=y):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{u=s.stateNode,Mh(t,s),v=s.memoizedProps,N=sr(r,v),u.props=N,V=s.pendingProps,A=u.context,B=r.contextType,y=Ar,typeof B=="object"&&B!==null&&(y=Ht(B)),m=r.getDerivedStateFromProps,(B=typeof m=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v!==V||A!==y)&&y_(s,u,l,y),vs=!1,A=s.memoizedState,u.state=A,Ln(s,l,u,o),On();var O=s.memoizedState;v!==V||A!==O||vs||t!==null&&t.dependencies!==null&&ca(t.dependencies)?(typeof m=="function"&&(Fh(s,r,m,l),O=s.memoizedState),(N=vs||S_(s,r,N,l,A,O,y)||t!==null&&t.dependencies!==null&&ca(t.dependencies))?(B||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(l,O,y),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(l,O,y)),typeof u.componentDidUpdate=="function"&&(s.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof u.componentDidUpdate!="function"||v===t.memoizedProps&&A===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&A===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=O),u.props=l,u.state=O,u.context=y,l=N):(typeof u.componentDidUpdate!="function"||v===t.memoizedProps&&A===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&A===t.memoizedState||(s.flags|=1024),l=!1)}return u=l,Ta(t,s),l=(s.flags&128)!==0,u||l?(u=s.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:u.render(),s.flags|=1,t!==null&&l?(s.child=Wr(s,t.child,null,o),s.child=Wr(s,null,r,o)):Tt(t,s,r,o),s.memoizedState=u.state,t=s.child):t=es(t,s,o),t}function z_(t,s,r,l){return xn(),s.flags|=256,Tt(t,s,r,l),s.child}var Zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qh(t){return{baseLanes:t,cachePool:Cd()}}function Jh(t,s,r){return t=t!==null?t.childLanes&~r:0,s&&(t|=yi),t}function N_(t,s,r){var l=s.pendingProps,o=!1,u=(s.flags&128)!==0,v;if((v=u)||(v=t!==null&&t.memoizedState===null?!1:(vt.current&2)!==0),v&&(o=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if(Oe){if(o?Ss(s):ys(),Oe){var m=Qe,y;if(y=m){e:{for(y=m,m=Li;y.nodeType!==8;){if(!m){m=null;break e}if(y=Ri(y.nextSibling),y===null){m=null;break e}}m=y}m!==null?(s.memoizedState={dehydrated:m,treeContext:Gs!==null?{id:Xi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},y=si(18,null,null,0),y.stateNode=m,y.return=s,s.child=y,Wt=s,Qe=null,y=!0):y=!1}y||Qs(s)}if(m=s.memoizedState,m!==null&&(m=m.dehydrated,m!==null))return Nc(m)?s.lanes=32:s.lanes=536870912,null;Ji(s)}return m=l.children,l=l.fallback,o?(ys(),o=s.mode,m=Ra({mode:"hidden",children:m},o),l=Xs(l,o,r,null),m.return=s,l.return=s,m.sibling=l,s.child=m,o=s.child,o.memoizedState=Qh(r),o.childLanes=Jh(t,v,r),s.memoizedState=Zh,l):(Ss(s),ec(s,m))}if(y=t.memoizedState,y!==null&&(m=y.dehydrated,m!==null)){if(u)s.flags&256?(Ss(s),s.flags&=-257,s=tc(t,s,r)):s.memoizedState!==null?(ys(),s.child=t.child,s.flags|=128,s=null):(ys(),o=l.fallback,m=s.mode,l=Ra({mode:"visible",children:l.children},m),o=Xs(o,m,r,null),o.flags|=2,l.return=s,o.return=s,l.sibling=o,s.child=l,Wr(s,t.child,null,r),l=s.child,l.memoizedState=Qh(r),l.childLanes=Jh(t,v,r),s.memoizedState=Zh,s=o);else if(Ss(s),Nc(m)){if(v=m.nextSibling&&m.nextSibling.dataset,v)var B=v.dgst;v=B,l=Error(a(419)),l.stack="",l.digest=v,Mn({value:l,source:null,stack:null}),s=tc(t,s,r)}else if(bt||Dn(t,s,r,!1),v=(r&t.childLanes)!==0,bt||v){if(v=Ke,v!==null&&(l=r&-r,l=(l&42)!==0?1:Ho(l),l=(l&(v.suspendedLanes|r))!==0?0:l,l!==0&&l!==y.retryLane))throw y.retryLane=l,Br(t,l),oi(v,t,l),D_;m.data==="$?"||Sc(),s=tc(t,s,r)}else m.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=y.treeContext,Qe=Ri(m.nextSibling),Wt=s,Oe=!0,Zs=null,Li=!1,t!==null&&(mi[pi++]=Xi,mi[pi++]=Gi,mi[pi++]=Gs,Xi=t.id,Gi=t.overflow,Gs=s),s=ec(s,l.children),s.flags|=4096);return s}return o?(ys(),o=l.fallback,m=s.mode,y=t.child,B=y.sibling,l=Fi(y,{mode:"hidden",children:l.children}),l.subtreeFlags=y.subtreeFlags&65011712,B!==null?o=Fi(B,o):(o=Xs(o,m,r,null),o.flags|=2),o.return=s,l.return=s,l.sibling=o,s.child=l,l=o,o=s.child,m=t.child.memoizedState,m===null?m=Qh(r):(y=m.cachePool,y!==null?(B=_t._currentValue,y=y.parent!==B?{parent:B,pool:B}:y):y=Cd(),m={baseLanes:m.baseLanes|r,cachePool:y}),o.memoizedState=m,o.childLanes=Jh(t,v,r),s.memoizedState=Zh,l):(Ss(s),r=t.child,t=r.sibling,r=Fi(r,{mode:"visible",children:l.children}),r.return=s,r.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=r,s.memoizedState=null,r)}function ec(t,s){return s=Ra({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Ra(t,s){return t=si(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function tc(t,s,r){return Wr(s,t.child,null,r),t=ec(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function H_(t,s,r){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Sh(t.return,s,r)}function ic(t,s,r,l,o){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:o}:(u.isBackwards=s,u.rendering=null,u.renderingStartTime=0,u.last=l,u.tail=r,u.tailMode=o)}function U_(t,s,r){var l=s.pendingProps,o=l.revealOrder,u=l.tail;if(Tt(t,s,l.children,r),l=vt.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&H_(t,r,s);else if(t.tag===19)H_(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(Y(vt,l),o){case"forwards":for(r=s.child,o=null;r!==null;)t=r.alternate,t!==null&&Ma(t)===null&&(o=r),r=r.sibling;r=o,r===null?(o=s.child,s.child=null):(o=r.sibling,r.sibling=null),ic(s,!1,o,r,u);break;case"backwards":for(r=null,o=s.child,s.child=null;o!==null;){if(t=o.alternate,t!==null&&Ma(t)===null){s.child=o;break}t=o.sibling,o.sibling=r,r=o,o=t}ic(s,!0,r,null,u);break;case"together":ic(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function es(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),xs|=s.lanes,(r&s.childLanes)===0)if(t!==null){if(Dn(t,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,r=Fi(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Fi(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function sc(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&ca(t)))}function DS(t,s,r){switch(s.tag){case 3:Be(s,s.stateNode.containerInfo),_s(s,_t,t.memoizedState.cache),xn();break;case 27:case 5:Ae(s);break;case 4:Be(s,s.stateNode.containerInfo);break;case 10:_s(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ss(s),s.flags|=128,null):(r&s.child.childLanes)!==0?N_(t,s,r):(Ss(s),t=es(t,s,r),t!==null?t.sibling:null);Ss(s);break;case 19:var o=(t.flags&128)!==0;if(l=(r&s.childLanes)!==0,l||(Dn(t,s,r,!1),l=(r&s.childLanes)!==0),o){if(l)return U_(t,s,r);s.flags|=128}if(o=s.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Y(vt,vt.current),l)break;return null;case 22:case 23:return s.lanes=0,B_(t,s,r);case 24:_s(s,_t,t.memoizedState.cache)}return es(t,s,r)}function P_(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps)bt=!0;else{if(!sc(t,r)&&(s.flags&128)===0)return bt=!1,DS(t,s,r);bt=(t.flags&131072)!==0}else bt=!1,Oe&&(s.flags&1048576)!==0&&vd(s,ha,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var l=s.elementType,o=l._init;if(l=o(l._payload),s.type=l,typeof l=="function")fh(l)?(t=sr(l,t),s.tag=1,s=L_(null,s,l,t,r)):(s.tag=0,s=$h(null,s,l,t,r));else{if(l!=null){if(o=l.$$typeof,o===j){s.tag=11,s=k_(null,s,l,t,r);break e}else if(o===ue){s.tag=14,s=T_(null,s,l,t,r);break e}}throw s=Z(l)||l,Error(a(306,s,""))}}return s;case 0:return $h(t,s,s.type,s.pendingProps,r);case 1:return l=s.type,o=sr(l,s.pendingProps),L_(t,s,l,o,r);case 3:e:{if(Be(s,s.stateNode.containerInfo),t===null)throw Error(a(387));l=s.pendingProps;var u=s.memoizedState;o=u.element,Mh(t,s),Ln(s,l,null,r);var v=s.memoizedState;if(l=v.cache,_s(s,_t,l),l!==u.cache&&yh(s,[_t],r,!0),On(),l=v.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=u,s.memoizedState=u,s.flags&256){s=z_(t,s,l,r);break e}else if(l!==o){o=vi(Error(a(424)),s),Mn(o),s=z_(t,s,l,r);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Qe=Ri(t.firstChild),Wt=s,Oe=!0,Zs=null,Li=!0,r=m_(s,null,l,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(xn(),l===o){s=es(t,s,r);break e}Tt(t,s,l,r)}s=s.child}return s;case 26:return Ta(t,s),t===null?(r=Kv(s.type,null,s.pendingProps,null))?s.memoizedState=r:Oe||(r=s.type,t=s.pendingProps,l=Ya(le.current).createElement(r),l[Nt]=s,l[It]=t,Bt(l,r,t),yt(l),s.stateNode=l):s.memoizedState=Kv(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Ae(s),t===null&&Oe&&(l=s.stateNode=qv(s.type,s.pendingProps,le.current),Wt=s,Li=!0,o=Qe,Ts(s.type)?(Hc=o,Qe=Ri(l.firstChild)):Qe=o),Tt(t,s,s.pendingProps.children,r),Ta(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Oe&&((o=l=Qe)&&(l=t0(l,s.type,s.pendingProps,Li),l!==null?(s.stateNode=l,Wt=s,Qe=Ri(l.firstChild),Li=!1,o=!0):o=!1),o||Qs(s)),Ae(s),o=s.type,u=s.pendingProps,v=t!==null?t.memoizedProps:null,l=u.children,Oc(o,u)?l=null:v!==null&&Oc(o,v)&&(s.flags|=32),s.memoizedState!==null&&(o=Ah(t,s,SS,null,null,r),il._currentValue=o),Ta(t,s),Tt(t,s,l,r),s.child;case 6:return t===null&&Oe&&((t=r=Qe)&&(r=i0(r,s.pendingProps,Li),r!==null?(s.stateNode=r,Wt=s,Qe=null,t=!0):t=!1),t||Qs(s)),null;case 13:return N_(t,s,r);case 4:return Be(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Wr(s,null,l,r):Tt(t,s,l,r),s.child;case 11:return k_(t,s,s.type,s.pendingProps,r);case 7:return Tt(t,s,s.pendingProps,r),s.child;case 8:return Tt(t,s,s.pendingProps.children,r),s.child;case 12:return Tt(t,s,s.pendingProps.children,r),s.child;case 10:return l=s.pendingProps,_s(s,s.type,l.value),Tt(t,s,l.children,r),s.child;case 9:return o=s.type._context,l=s.pendingProps.children,er(s),o=Ht(o),l=l(o),s.flags|=1,Tt(t,s,l,r),s.child;case 14:return T_(t,s,s.type,s.pendingProps,r);case 15:return R_(t,s,s.type,s.pendingProps,r);case 19:return U_(t,s,r);case 31:return l=s.pendingProps,r=s.mode,l={mode:l.mode,children:l.children},t===null?(r=Ra(l,r),r.ref=s.ref,s.child=r,r.return=s,s=r):(r=Fi(t.child,l),r.ref=s.ref,s.child=r,r.return=s,s=r),s;case 22:return B_(t,s,r);case 24:return er(s),l=Ht(_t),t===null?(o=wh(),o===null&&(o=Ke,u=bh(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=r),o=u),s.memoizedState={parent:l,cache:o},xh(s),_s(s,_t,o)):((t.lanes&r)!==0&&(Mh(t,s),Ln(s,null,null,r),On()),o=t.memoizedState,u=s.memoizedState,o.parent!==l?(o={parent:l,cache:l},s.memoizedState=o,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=o),_s(s,_t,l)):(l=u.cache,_s(s,_t,l),l!==o.cache&&yh(s,[_t],r,!0))),Tt(t,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function ts(t){t.flags|=4}function q_(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Xv(s)){if(s=Si.current,s!==null&&((ke&4194048)===ke?zi!==null:(ke&62914560)!==ke&&(ke&536870912)===0||s!==zi))throw Bn=Eh,wd;t.flags|=8192}}function Ba(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?ot():536870912,t.lanes|=s,Ir|=s)}function Vn(t,s){if(!Oe)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ge(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(s)for(var o=t.child;o!==null;)r|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)r|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=l,t.childLanes=r,s}function kS(t,s,r){var l=s.pendingProps;switch(gh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(s),null;case 1:return Ge(s),null;case 3:return r=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Zi(_t),Ye(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(En(s)?ts(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,pd())),Ge(s),null;case 26:return r=s.memoizedState,t===null?(ts(s),r!==null?(Ge(s),q_(s,r)):(Ge(s),s.flags&=-16777217)):r?r!==t.memoizedState?(ts(s),Ge(s),q_(s,r)):(Ge(s),s.flags&=-16777217):(t.memoizedProps!==l&&ts(s),Ge(s),s.flags&=-16777217),null;case 27:ti(s),r=le.current;var o=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==l&&ts(s);else{if(!l){if(s.stateNode===null)throw Error(a(166));return Ge(s),null}t=J.current,En(s)?gd(s):(t=qv(o,l,r),s.stateNode=t,ts(s))}return Ge(s),null;case 5:if(ti(s),r=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&ts(s);else{if(!l){if(s.stateNode===null)throw Error(a(166));return Ge(s),null}if(t=J.current,En(s))gd(s);else{switch(o=Ya(le.current),t){case 1:t=o.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:t=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":t=o.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":t=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?o.createElement("select",{is:l.is}):o.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?o.createElement(r,{is:l.is}):o.createElement(r)}}t[Nt]=s,t[It]=l;e:for(o=s.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}s.stateNode=t;e:switch(Bt(t,r,l),r){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ts(s)}}return Ge(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&ts(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(a(166));if(t=le.current,En(s)){if(t=s.stateNode,r=s.memoizedProps,l=null,o=Wt,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}t[Nt]=s,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Ov(t.nodeValue,r)),t||Qs(s)}else t=Ya(t).createTextNode(l),t[Nt]=s,s.stateNode=t}return Ge(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=En(s),l!==null&&l.dehydrated!==null){if(t===null){if(!o)throw Error(a(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));o[Nt]=s}else xn(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ge(s),o=!1}else o=pd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return s.flags&256?(Ji(s),s):(Ji(s),null)}if(Ji(s),(s.flags&128)!==0)return s.lanes=r,s;if(r=l!==null,t=t!==null&&t.memoizedState!==null,r){l=s.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool);var u=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==o&&(l.flags|=2048)}return r!==t&&r&&(s.child.flags|=8192),Ba(s,s.updateQueue),Ge(s),null;case 4:return Ye(),t===null&&kc(s.stateNode.containerInfo),Ge(s),null;case 10:return Zi(s.type),Ge(s),null;case 19:if($(vt),o=s.memoizedState,o===null)return Ge(s),null;if(l=(s.flags&128)!==0,u=o.rendering,u===null)if(l)Vn(o,!1);else{if(Je!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(u=Ma(t),u!==null){for(s.flags|=128,Vn(o,!1),t=u.updateQueue,s.updateQueue=t,Ba(s,t),s.subtreeFlags=0,t=r,r=s.child;r!==null;)_d(r,t),r=r.sibling;return Y(vt,vt.current&1|2),s.child}t=t.sibling}o.tail!==null&&zt()>La&&(s.flags|=128,l=!0,Vn(o,!1),s.lanes=4194304)}else{if(!l)if(t=Ma(u),t!==null){if(s.flags|=128,l=!0,t=t.updateQueue,s.updateQueue=t,Ba(s,t),Vn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Oe)return Ge(s),null}else 2*zt()-o.renderingStartTime>La&&r!==536870912&&(s.flags|=128,l=!0,Vn(o,!1),s.lanes=4194304);o.isBackwards?(u.sibling=s.child,s.child=u):(t=o.last,t!==null?t.sibling=u:s.child=u,o.last=u)}return o.tail!==null?(s=o.tail,o.rendering=s,o.tail=s.sibling,o.renderingStartTime=zt(),s.sibling=null,t=vt.current,Y(vt,l?t&1|2:t&1),s):(Ge(s),null);case 22:case 23:return Ji(s),Rh(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(r&536870912)!==0&&(s.flags&128)===0&&(Ge(s),s.subtreeFlags&6&&(s.flags|=8192)):Ge(s),r=s.updateQueue,r!==null&&Ba(s,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==r&&(s.flags|=2048),t!==null&&$(tr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),Zi(_t),Ge(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function TS(t,s){switch(gh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Zi(_t),Ye(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return ti(s),null;case 13:if(Ji(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));xn()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return $(vt),null;case 4:return Ye(),null;case 10:return Zi(s.type),null;case 22:case 23:return Ji(s),Rh(),t!==null&&$(tr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Zi(_t),null;case 25:return null;default:return null}}function V_(t,s){switch(gh(s),s.tag){case 3:Zi(_t),Ye();break;case 26:case 27:case 5:ti(s);break;case 4:Ye();break;case 13:Ji(s);break;case 19:$(vt);break;case 10:Zi(s.type);break;case 22:case 23:Ji(s),Rh(),t!==null&&$(tr);break;case 24:Zi(_t)}}function Wn(t,s){try{var r=s.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var o=l.next;r=o;do{if((r.tag&t)===t){l=void 0;var u=r.create,v=r.inst;l=u(),v.destroy=l}r=r.next}while(r!==o)}}catch(m){We(s,s.return,m)}}function bs(t,s,r){try{var l=s.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var u=o.next;l=u;do{if((l.tag&t)===t){var v=l.inst,m=v.destroy;if(m!==void 0){v.destroy=void 0,o=s;var y=r,B=m;try{B()}catch(N){We(o,y,N)}}}l=l.next}while(l!==u)}}catch(N){We(s,s.return,N)}}function W_(t){var s=t.updateQueue;if(s!==null){var r=t.stateNode;try{Td(s,r)}catch(l){We(t,t.return,l)}}}function K_(t,s,r){r.props=sr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){We(t,s,l)}}function Kn(t,s){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(o){We(t,s,o)}}function Ni(t,s){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(o){We(t,s,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(o){We(t,s,o)}else r.current=null}function Y_(t){var s=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(o){We(t,t.return,o)}}function rc(t,s,r){try{var l=t.stateNode;$S(l,t.type,r,s),l[It]=s}catch(o){We(t,t.return,o)}}function j_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ts(t.type)||t.tag===4}function nc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||j_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ts(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lc(t,s,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(t),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Ka));else if(l!==4&&(l===27&&Ts(t.type)&&(r=t.stateNode,s=null),t=t.child,t!==null))for(lc(t,s,r),t=t.sibling;t!==null;)lc(t,s,r),t=t.sibling}function Aa(t,s,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(l!==4&&(l===27&&Ts(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Aa(t,s,r),t=t.sibling;t!==null;)Aa(t,s,r),t=t.sibling}function I_(t){var s=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Bt(s,l,r),s[Nt]=t,s[It]=r}catch(u){We(t,t.return,u)}}var is=!1,rt=!1,ac=!1,F_=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function RS(t,s){if(t=t.containerInfo,Bc=$a,t=rd(t),nh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var o=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var v=0,m=-1,y=-1,B=0,N=0,V=t,A=null;t:for(;;){for(var O;V!==r||o!==0&&V.nodeType!==3||(m=v+o),V!==u||l!==0&&V.nodeType!==3||(y=v+l),V.nodeType===3&&(v+=V.nodeValue.length),(O=V.firstChild)!==null;)A=V,V=O;for(;;){if(V===t)break t;if(A===r&&++B===o&&(m=v),A===u&&++N===l&&(y=v),(O=V.nextSibling)!==null)break;V=A,A=V.parentNode}V=O}r=m===-1||y===-1?null:{start:m,end:y}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ac={focusedElem:t,selectionRange:r},$a=!1,Ct=s;Ct!==null;)if(s=Ct,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,Ct=t;else for(;Ct!==null;){switch(s=Ct,u=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&u!==null){t=void 0,r=s,o=u.memoizedProps,u=u.memoizedState,l=r.stateNode;try{var ve=sr(r.type,o,r.elementType===r.type);t=l.getSnapshotBeforeUpdate(ve,u),l.__reactInternalSnapshotBeforeUpdate=t}catch(de){We(r,r.return,de)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,r=t.nodeType,r===9)zc(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":zc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=s.sibling,t!==null){t.return=s.return,Ct=t;break}Ct=s.return}}function X_(t,s,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:Cs(t,r),l&4&&Wn(5,r);break;case 1:if(Cs(t,r),l&4)if(t=r.stateNode,s===null)try{t.componentDidMount()}catch(v){We(r,r.return,v)}else{var o=sr(r.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(o,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){We(r,r.return,v)}}l&64&&W_(r),l&512&&Kn(r,r.return);break;case 3:if(Cs(t,r),l&64&&(t=r.updateQueue,t!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{Td(t,s)}catch(v){We(r,r.return,v)}}break;case 27:s===null&&l&4&&I_(r);case 26:case 5:Cs(t,r),s===null&&l&4&&Y_(r),l&512&&Kn(r,r.return);break;case 12:Cs(t,r);break;case 13:Cs(t,r),l&4&&Z_(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=PS.bind(null,r),s0(t,r))));break;case 22:if(l=r.memoizedState!==null||is,!l){s=s!==null&&s.memoizedState!==null||rt,o=is;var u=rt;is=l,(rt=s)&&!u?ws(t,r,(r.subtreeFlags&8772)!==0):Cs(t,r),is=o,rt=u}break;case 30:break;default:Cs(t,r)}}function G_(t){var s=t.alternate;s!==null&&(t.alternate=null,G_(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&qo(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fe=null,Gt=!1;function ss(t,s,r){for(r=r.child;r!==null;)$_(t,s,r),r=r.sibling}function $_(t,s,r){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Vs,r)}catch{}switch(r.tag){case 26:rt||Ni(r,s),ss(t,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:rt||Ni(r,s);var l=Fe,o=Gt;Ts(r.type)&&(Fe=r.stateNode,Gt=!1),ss(t,s,r),Qn(r.stateNode),Fe=l,Gt=o;break;case 5:rt||Ni(r,s);case 6:if(l=Fe,o=Gt,Fe=null,ss(t,s,r),Fe=l,Gt=o,Fe!==null)if(Gt)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(r.stateNode)}catch(u){We(r,s,u)}else try{Fe.removeChild(r.stateNode)}catch(u){We(r,s,u)}break;case 18:Fe!==null&&(Gt?(t=Fe,Uv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),ll(t)):Uv(Fe,r.stateNode));break;case 4:l=Fe,o=Gt,Fe=r.stateNode.containerInfo,Gt=!0,ss(t,s,r),Fe=l,Gt=o;break;case 0:case 11:case 14:case 15:rt||bs(2,r,s),rt||bs(4,r,s),ss(t,s,r);break;case 1:rt||(Ni(r,s),l=r.stateNode,typeof l.componentWillUnmount=="function"&&K_(r,s,l)),ss(t,s,r);break;case 21:ss(t,s,r);break;case 22:rt=(l=rt)||r.memoizedState!==null,ss(t,s,r),rt=l;break;default:ss(t,s,r)}}function Z_(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ll(t)}catch(r){We(s,s.return,r)}}function BS(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new F_),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new F_),s;default:throw Error(a(435,t.tag))}}function oc(t,s){var r=BS(t);s.forEach(function(l){var o=qS.bind(null,t,l);r.has(l)||(r.add(l),l.then(o,o))})}function ri(t,s){var r=s.deletions;if(r!==null)for(var l=0;l<r.length;l++){var o=r[l],u=t,v=s,m=v;e:for(;m!==null;){switch(m.tag){case 27:if(Ts(m.type)){Fe=m.stateNode,Gt=!1;break e}break;case 5:Fe=m.stateNode,Gt=!1;break e;case 3:case 4:Fe=m.stateNode.containerInfo,Gt=!0;break e}m=m.return}if(Fe===null)throw Error(a(160));$_(u,v,o),Fe=null,Gt=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Q_(s,t),s=s.sibling}var Ti=null;function Q_(t,s){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ri(s,t),ni(t),l&4&&(bs(3,t,t.return),Wn(3,t),bs(5,t,t.return));break;case 1:ri(s,t),ni(t),l&512&&(rt||r===null||Ni(r,r.return)),l&64&&is&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var o=Ti;if(ri(s,t),ni(t),l&512&&(rt||r===null||Ni(r,r.return)),l&4){var u=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":u=o.getElementsByTagName("title")[0],(!u||u[dn]||u[Nt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(l),o.head.insertBefore(u,o.querySelector("head > title"))),Bt(u,l,r),u[Nt]=t,yt(u),l=u;break e;case"link":var v=Iv("link","href",o).get(l+(r.href||""));if(v){for(var m=0;m<v.length;m++)if(u=v[m],u.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&u.getAttribute("rel")===(r.rel==null?null:r.rel)&&u.getAttribute("title")===(r.title==null?null:r.title)&&u.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(m,1);break t}}u=o.createElement(l),Bt(u,l,r),o.head.appendChild(u);break;case"meta":if(v=Iv("meta","content",o).get(l+(r.content||""))){for(m=0;m<v.length;m++)if(u=v[m],u.getAttribute("content")===(r.content==null?null:""+r.content)&&u.getAttribute("name")===(r.name==null?null:r.name)&&u.getAttribute("property")===(r.property==null?null:r.property)&&u.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&u.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(m,1);break t}}u=o.createElement(l),Bt(u,l,r),o.head.appendChild(u);break;default:throw Error(a(468,l))}u[Nt]=t,yt(u),l=u}t.stateNode=l}else Fv(o,t.type,t.stateNode);else t.stateNode=jv(o,l,t.memoizedProps);else u!==l?(u===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):u.count--,l===null?Fv(o,t.type,t.stateNode):jv(o,l,t.memoizedProps)):l===null&&t.stateNode!==null&&rc(t,t.memoizedProps,r.memoizedProps)}break;case 27:ri(s,t),ni(t),l&512&&(rt||r===null||Ni(r,r.return)),r!==null&&l&4&&rc(t,t.memoizedProps,r.memoizedProps);break;case 5:if(ri(s,t),ni(t),l&512&&(rt||r===null||Ni(r,r.return)),t.flags&32){o=t.stateNode;try{Er(o,"")}catch(O){We(t,t.return,O)}}l&4&&t.stateNode!=null&&(o=t.memoizedProps,rc(t,o,r!==null?r.memoizedProps:o)),l&1024&&(ac=!0);break;case 6:if(ri(s,t),ni(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(O){We(t,t.return,O)}}break;case 3:if(Fa=null,o=Ti,Ti=ja(s.containerInfo),ri(s,t),Ti=o,ni(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{ll(s.containerInfo)}catch(O){We(t,t.return,O)}ac&&(ac=!1,J_(t));break;case 4:l=Ti,Ti=ja(t.stateNode.containerInfo),ri(s,t),ni(t),Ti=l;break;case 12:ri(s,t),ni(t);break;case 13:ri(s,t),ni(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(_c=zt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oc(t,l)));break;case 22:o=t.memoizedState!==null;var y=r!==null&&r.memoizedState!==null,B=is,N=rt;if(is=B||o,rt=N||y,ri(s,t),rt=N,is=B,ni(t),l&8192)e:for(s=t.stateNode,s._visibility=o?s._visibility&-2:s._visibility|1,o&&(r===null||y||is||rt||rr(t)),r=null,s=t;;){if(s.tag===5||s.tag===26){if(r===null){y=r=s;try{if(u=y.stateNode,o)v=u.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{m=y.stateNode;var V=y.memoizedProps.style,A=V!=null&&V.hasOwnProperty("display")?V.display:null;m.style.display=A==null||typeof A=="boolean"?"":(""+A).trim()}}catch(O){We(y,y.return,O)}}}else if(s.tag===6){if(r===null){y=s;try{y.stateNode.nodeValue=o?"":y.memoizedProps}catch(O){We(y,y.return,O)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,oc(t,r))));break;case 19:ri(s,t),ni(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oc(t,l)));break;case 30:break;case 21:break;default:ri(s,t),ni(t)}}function ni(t){var s=t.flags;if(s&2){try{for(var r,l=t.return;l!==null;){if(j_(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var o=r.stateNode,u=nc(t);Aa(t,u,o);break;case 5:var v=r.stateNode;r.flags&32&&(Er(v,""),r.flags&=-33);var m=nc(t);Aa(t,m,v);break;case 3:case 4:var y=r.stateNode.containerInfo,B=nc(t);lc(t,B,y);break;default:throw Error(a(161))}}catch(N){We(t,t.return,N)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function J_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;J_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Cs(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)X_(t,s.alternate,s),s=s.sibling}function rr(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:bs(4,s,s.return),rr(s);break;case 1:Ni(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&K_(s,s.return,r),rr(s);break;case 27:Qn(s.stateNode);case 26:case 5:Ni(s,s.return),rr(s);break;case 22:s.memoizedState===null&&rr(s);break;case 30:rr(s);break;default:rr(s)}t=t.sibling}}function ws(t,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,o=t,u=s,v=u.flags;switch(u.tag){case 0:case 11:case 15:ws(o,u,r),Wn(4,u);break;case 1:if(ws(o,u,r),l=u,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(B){We(l,l.return,B)}if(l=u,o=l.updateQueue,o!==null){var m=l.stateNode;try{var y=o.shared.hiddenCallbacks;if(y!==null)for(o.shared.hiddenCallbacks=null,o=0;o<y.length;o++)kd(y[o],m)}catch(B){We(l,l.return,B)}}r&&v&64&&W_(u),Kn(u,u.return);break;case 27:I_(u);case 26:case 5:ws(o,u,r),r&&l===null&&v&4&&Y_(u),Kn(u,u.return);break;case 12:ws(o,u,r);break;case 13:ws(o,u,r),r&&v&4&&Z_(o,u);break;case 22:u.memoizedState===null&&ws(o,u,r),Kn(u,u.return);break;case 30:break;default:ws(o,u,r)}s=s.sibling}}function hc(t,s){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&kn(r))}function cc(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&kn(t))}function Hi(t,s,r,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ev(t,s,r,l),s=s.sibling}function ev(t,s,r,l){var o=s.flags;switch(s.tag){case 0:case 11:case 15:Hi(t,s,r,l),o&2048&&Wn(9,s);break;case 1:Hi(t,s,r,l);break;case 3:Hi(t,s,r,l),o&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&kn(t)));break;case 12:if(o&2048){Hi(t,s,r,l),t=s.stateNode;try{var u=s.memoizedProps,v=u.id,m=u.onPostCommit;typeof m=="function"&&m(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(y){We(s,s.return,y)}}else Hi(t,s,r,l);break;case 13:Hi(t,s,r,l);break;case 23:break;case 22:u=s.stateNode,v=s.alternate,s.memoizedState!==null?u._visibility&2?Hi(t,s,r,l):Yn(t,s):u._visibility&2?Hi(t,s,r,l):(u._visibility|=2,Kr(t,s,r,l,(s.subtreeFlags&10256)!==0)),o&2048&&hc(v,s);break;case 24:Hi(t,s,r,l),o&2048&&cc(s.alternate,s);break;default:Hi(t,s,r,l)}}function Kr(t,s,r,l,o){for(o=o&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var u=t,v=s,m=r,y=l,B=v.flags;switch(v.tag){case 0:case 11:case 15:Kr(u,v,m,y,o),Wn(8,v);break;case 23:break;case 22:var N=v.stateNode;v.memoizedState!==null?N._visibility&2?Kr(u,v,m,y,o):Yn(u,v):(N._visibility|=2,Kr(u,v,m,y,o)),o&&B&2048&&hc(v.alternate,v);break;case 24:Kr(u,v,m,y,o),o&&B&2048&&cc(v.alternate,v);break;default:Kr(u,v,m,y,o)}s=s.sibling}}function Yn(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=t,l=s,o=l.flags;switch(l.tag){case 22:Yn(r,l),o&2048&&hc(l.alternate,l);break;case 24:Yn(r,l),o&2048&&cc(l.alternate,l);break;default:Yn(r,l)}s=s.sibling}}var jn=8192;function Yr(t){if(t.subtreeFlags&jn)for(t=t.child;t!==null;)tv(t),t=t.sibling}function tv(t){switch(t.tag){case 26:Yr(t),t.flags&jn&&t.memoizedState!==null&&g0(Ti,t.memoizedState,t.memoizedProps);break;case 5:Yr(t);break;case 3:case 4:var s=Ti;Ti=ja(t.stateNode.containerInfo),Yr(t),Ti=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=jn,jn=16777216,Yr(t),jn=s):Yr(t));break;default:Yr(t)}}function iv(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function In(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];Ct=l,rv(l,t)}iv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)sv(t),t=t.sibling}function sv(t){switch(t.tag){case 0:case 11:case 15:In(t),t.flags&2048&&bs(9,t,t.return);break;case 3:In(t);break;case 12:In(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Oa(t)):In(t);break;default:In(t)}}function Oa(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];Ct=l,rv(l,t)}iv(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:bs(8,s,s.return),Oa(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Oa(s));break;default:Oa(s)}t=t.sibling}}function rv(t,s){for(;Ct!==null;){var r=Ct;switch(r.tag){case 0:case 11:case 15:bs(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:kn(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,Ct=l;else e:for(r=t;Ct!==null;){l=Ct;var o=l.sibling,u=l.return;if(G_(l),l===r){Ct=null;break e}if(o!==null){o.return=u,Ct=o;break e}Ct=u}}}var AS={getCacheForType:function(t){var s=Ht(_t),r=s.data.get(t);return r===void 0&&(r=t(),s.data.set(t,r)),r}},OS=typeof WeakMap=="function"?WeakMap:Map,Le=0,Ke=null,xe=null,ke=0,ze=0,li=null,Es=!1,jr=!1,uc=!1,rs=0,Je=0,xs=0,nr=0,fc=0,yi=0,Ir=0,Fn=null,$t=null,dc=!1,_c=0,La=1/0,za=null,Ms=null,Rt=0,Ds=null,Fr=null,Xr=0,vc=0,gc=null,nv=null,Xn=0,mc=null;function ai(){if((Le&2)!==0&&ke!==0)return ke&-ke;if(M.T!==null){var t=zr;return t!==0?t:Ec()}return bf()}function lv(){yi===0&&(yi=(ke&536870912)===0||Oe?it():536870912);var t=Si.current;return t!==null&&(t.flags|=32),yi}function oi(t,s,r){(t===Ke&&(ze===2||ze===9)||t.cancelPendingCommit!==null)&&(Gr(t,0),ks(t,ke,yi,!1)),us(t,r),((Le&2)===0||t!==Ke)&&(t===Ke&&((Le&2)===0&&(nr|=r),Je===4&&ks(t,ke,yi,!1)),Ui(t))}function av(t,s,r){if((Le&6)!==0)throw Error(a(327));var l=!r&&(s&124)===0&&(s&t.expiredLanes)===0||De(t,s),o=l?NS(t,s):yc(t,s,!0),u=l;do{if(o===0){jr&&!l&&ks(t,s,0,!1);break}else{if(r=t.current.alternate,u&&!LS(r)){o=yc(t,s,!1),u=!1;continue}if(o===2){if(u=s,t.errorRecoveryDisabledLanes&u)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var m=t;o=Fn;var y=m.current.memoizedState.isDehydrated;if(y&&(Gr(m,v).flags|=256),v=yc(m,v,!1),v!==2){if(uc&&!y){m.errorRecoveryDisabledLanes|=u,nr|=u,o=4;break e}u=$t,$t=o,u!==null&&($t===null?$t=u:$t.push.apply($t,u))}o=v}if(u=!1,o!==2)continue}}if(o===1){Gr(t,0),ks(t,s,0,!0);break}e:{switch(l=t,u=o,u){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:ks(l,s,yi,!Es);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(o=_c+300-zt(),10<o)){if(ks(l,s,yi,!Es),ae(l,0,!0)!==0)break e;l.timeoutHandle=Nv(ov.bind(null,l,r,$t,za,dc,s,yi,nr,Ir,Es,u,2,-0,0),o);break e}ov(l,r,$t,za,dc,s,yi,nr,Ir,Es,u,0,-0,0)}}break}while(!0);Ui(t)}function ov(t,s,r,l,o,u,v,m,y,B,N,V,A,O){if(t.timeoutHandle=-1,V=s.subtreeFlags,(V&8192||(V&16785408)===16785408)&&(tl={stylesheets:null,count:0,unsuspend:v0},tv(s),V=m0(),V!==null)){t.cancelPendingCommit=V(vv.bind(null,t,s,u,r,l,o,v,m,y,N,1,A,O)),ks(t,u,v,!B);return}vv(t,s,u,r,l,o,v,m,y)}function LS(t){for(var s=t;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var o=r[l],u=o.getSnapshot;o=o.value;try{if(!ii(u(),o))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ks(t,s,r,l){s&=~fc,s&=~nr,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var o=s;0<o;){var u=31-Vt(o),v=1<<u;l[u]=-1,o&=~v}r!==0&&Sf(t,r,s)}function Na(){return(Le&6)===0?(Gn(0),!1):!0}function pc(){if(xe!==null){if(ze===0)var t=xe.return;else t=xe,$i=Js=null,zh(t),Vr=null,Pn=0,t=xe;for(;t!==null;)V_(t.alternate,t),t=t.return;xe=null}}function Gr(t,s){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,QS(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),pc(),Ke=t,xe=r=Fi(t.current,null),ke=s,ze=0,li=null,Es=!1,jr=De(t,s),uc=!1,Ir=yi=fc=nr=xs=Je=0,$t=Fn=null,dc=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var o=31-Vt(l),u=1<<o;s|=t[o],l&=~u}return rs=s,ra(),r}function hv(t,s){be=null,M.H=wa,s===Rn||s===da?(s=Md(),ze=3):s===wd?(s=Md(),ze=4):ze=s===D_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,li=s,xe===null&&(Je=1,ka(t,vi(s,t.current)))}function cv(){var t=M.H;return M.H=wa,t===null?wa:t}function uv(){var t=M.A;return M.A=AS,t}function Sc(){Je=4,Es||(ke&4194048)!==ke&&Si.current!==null||(jr=!0),(xs&134217727)===0&&(nr&134217727)===0||Ke===null||ks(Ke,ke,yi,!1)}function yc(t,s,r){var l=Le;Le|=2;var o=cv(),u=uv();(Ke!==t||ke!==s)&&(za=null,Gr(t,s)),s=!1;var v=Je;e:do try{if(ze!==0&&xe!==null){var m=xe,y=li;switch(ze){case 8:pc(),v=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(s=!0);var B=ze;if(ze=0,li=null,$r(t,m,y,B),r&&jr){v=0;break e}break;default:B=ze,ze=0,li=null,$r(t,m,y,B)}}zS(),v=Je;break}catch(N){hv(t,N)}while(!0);return s&&t.shellSuspendCounter++,$i=Js=null,Le=l,M.H=o,M.A=u,xe===null&&(Ke=null,ke=0,ra()),v}function zS(){for(;xe!==null;)fv(xe)}function NS(t,s){var r=Le;Le|=2;var l=cv(),o=uv();Ke!==t||ke!==s?(za=null,La=zt()+500,Gr(t,s)):jr=De(t,s);e:do try{if(ze!==0&&xe!==null){s=xe;var u=li;t:switch(ze){case 1:ze=0,li=null,$r(t,s,u,1);break;case 2:case 9:if(Ed(u)){ze=0,li=null,dv(s);break}s=function(){ze!==2&&ze!==9||Ke!==t||(ze=7),Ui(t)},u.then(s,s);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:Ed(u)?(ze=0,li=null,dv(s)):(ze=0,li=null,$r(t,s,u,7));break;case 5:var v=null;switch(xe.tag){case 26:v=xe.memoizedState;case 5:case 27:var m=xe;if(!v||Xv(v)){ze=0,li=null;var y=m.sibling;if(y!==null)xe=y;else{var B=m.return;B!==null?(xe=B,Ha(B)):xe=null}break t}}ze=0,li=null,$r(t,s,u,5);break;case 6:ze=0,li=null,$r(t,s,u,6);break;case 8:pc(),Je=6;break e;default:throw Error(a(462))}}HS();break}catch(N){hv(t,N)}while(!0);return $i=Js=null,M.H=l,M.A=o,Le=r,xe!==null?0:(Ke=null,ke=0,ra(),Je)}function HS(){for(;xe!==null&&!Ro();)fv(xe)}function fv(t){var s=P_(t.alternate,t,rs);t.memoizedProps=t.pendingProps,s===null?Ha(t):xe=s}function dv(t){var s=t,r=s.alternate;switch(s.tag){case 15:case 0:s=O_(r,s,s.pendingProps,s.type,void 0,ke);break;case 11:s=O_(r,s,s.pendingProps,s.type.render,s.ref,ke);break;case 5:zh(s);default:V_(r,s),s=xe=_d(s,rs),s=P_(r,s,rs)}t.memoizedProps=t.pendingProps,s===null?Ha(t):xe=s}function $r(t,s,r,l){$i=Js=null,zh(s),Vr=null,Pn=0;var o=s.return;try{if(MS(t,o,s,r,ke)){Je=1,ka(t,vi(r,t.current)),xe=null;return}}catch(u){if(o!==null)throw xe=o,u;Je=1,ka(t,vi(r,t.current)),xe=null;return}s.flags&32768?(Oe||l===1?t=!0:jr||(ke&536870912)!==0?t=!1:(Es=t=!0,(l===2||l===9||l===3||l===6)&&(l=Si.current,l!==null&&l.tag===13&&(l.flags|=16384))),_v(s,t)):Ha(s)}function Ha(t){var s=t;do{if((s.flags&32768)!==0){_v(s,Es);return}t=s.return;var r=kS(s.alternate,s,rs);if(r!==null){xe=r;return}if(s=s.sibling,s!==null){xe=s;return}xe=s=t}while(s!==null);Je===0&&(Je=5)}function _v(t,s){do{var r=TS(t.alternate,t);if(r!==null){r.flags&=32767,xe=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(t=t.sibling,t!==null)){xe=t;return}xe=t=r}while(t!==null);Je=6,xe=null}function vv(t,s,r,l,o,u,v,m,y){t.cancelPendingCommit=null;do Ua();while(Rt!==0);if((Le&6)!==0)throw Error(a(327));if(s!==null){if(s===t.current)throw Error(a(177));if(u=s.lanes|s.childLanes,u|=ch,Il(t,r,u,v,m,y),t===Ke&&(xe=Ke=null,ke=0),Fr=s,Ds=t,Xr=r,vc=u,gc=o,nv=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,VS(cs,function(){return yv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=M.T,M.T=null,o=H.p,H.p=2,v=Le,Le|=4;try{RS(t,s,r)}finally{Le=v,H.p=o,M.T=l}}Rt=1,gv(),mv(),pv()}}function gv(){if(Rt===1){Rt=0;var t=Ds,s=Fr,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=M.T,M.T=null;var l=H.p;H.p=2;var o=Le;Le|=4;try{Q_(s,t);var u=Ac,v=rd(t.containerInfo),m=u.focusedElem,y=u.selectionRange;if(v!==m&&m&&m.ownerDocument&&sd(m.ownerDocument.documentElement,m)){if(y!==null&&nh(m)){var B=y.start,N=y.end;if(N===void 0&&(N=B),"selectionStart"in m)m.selectionStart=B,m.selectionEnd=Math.min(N,m.value.length);else{var V=m.ownerDocument||document,A=V&&V.defaultView||window;if(A.getSelection){var O=A.getSelection(),ve=m.textContent.length,de=Math.min(y.start,ve),Ue=y.end===void 0?de:Math.min(y.end,ve);!O.extend&&de>Ue&&(v=Ue,Ue=de,de=v);var D=id(m,de),w=id(m,Ue);if(D&&w&&(O.rangeCount!==1||O.anchorNode!==D.node||O.anchorOffset!==D.offset||O.focusNode!==w.node||O.focusOffset!==w.offset)){var R=V.createRange();R.setStart(D.node,D.offset),O.removeAllRanges(),de>Ue?(O.addRange(R),O.extend(w.node,w.offset)):(R.setEnd(w.node,w.offset),O.addRange(R))}}}}for(V=[],O=m;O=O.parentNode;)O.nodeType===1&&V.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<V.length;m++){var P=V[m];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}$a=!!Bc,Ac=Bc=null}finally{Le=o,H.p=l,M.T=r}}t.current=s,Rt=2}}function mv(){if(Rt===2){Rt=0;var t=Ds,s=Fr,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=M.T,M.T=null;var l=H.p;H.p=2;var o=Le;Le|=4;try{X_(t,s.alternate,s)}finally{Le=o,H.p=l,M.T=r}}Rt=3}}function pv(){if(Rt===4||Rt===3){Rt=0,Kl();var t=Ds,s=Fr,r=Xr,l=nv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Rt=5:(Rt=0,Fr=Ds=null,Sv(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(Ms=null),Uo(r),s=s.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Vs,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=M.T,o=H.p,H.p=2,M.T=null;try{for(var u=t.onRecoverableError,v=0;v<l.length;v++){var m=l[v];u(m.value,{componentStack:m.stack})}}finally{M.T=s,H.p=o}}(Xr&3)!==0&&Ua(),Ui(t),o=t.pendingLanes,(r&4194090)!==0&&(o&42)!==0?t===mc?Xn++:(Xn=0,mc=t):Xn=0,Gn(0)}}function Sv(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,kn(s)))}function Ua(t){return gv(),mv(),pv(),yv()}function yv(){if(Rt!==5)return!1;var t=Ds,s=vc;vc=0;var r=Uo(Xr),l=M.T,o=H.p;try{H.p=32>r?32:r,M.T=null,r=gc,gc=null;var u=Ds,v=Xr;if(Rt=0,Fr=Ds=null,Xr=0,(Le&6)!==0)throw Error(a(331));var m=Le;if(Le|=4,sv(u.current),ev(u,u.current,v,r),Le=m,Gn(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Vs,u)}catch{}return!0}finally{H.p=o,M.T=l,Sv(t,s)}}function bv(t,s,r){s=vi(r,s),s=Gh(t.stateNode,s,2),t=ms(t,s,2),t!==null&&(us(t,2),Ui(t))}function We(t,s,r){if(t.tag===3)bv(t,t,r);else for(;s!==null;){if(s.tag===3){bv(s,t,r);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ms===null||!Ms.has(l))){t=vi(r,t),r=x_(2),l=ms(s,r,2),l!==null&&(M_(r,l,s,t),us(l,2),Ui(l));break}}s=s.return}}function bc(t,s,r){var l=t.pingCache;if(l===null){l=t.pingCache=new OS;var o=new Set;l.set(s,o)}else o=l.get(s),o===void 0&&(o=new Set,l.set(s,o));o.has(r)||(uc=!0,o.add(r),t=US.bind(null,t,s,r),s.then(t,t))}function US(t,s,r){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Ke===t&&(ke&r)===r&&(Je===4||Je===3&&(ke&62914560)===ke&&300>zt()-_c?(Le&2)===0&&Gr(t,0):fc|=r,Ir===ke&&(Ir=0)),Ui(t)}function Cv(t,s){s===0&&(s=ot()),t=Br(t,s),t!==null&&(us(t,s),Ui(t))}function PS(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),Cv(t,r)}function qS(t,s){var r=0;switch(t.tag){case 13:var l=t.stateNode,o=t.memoizedState;o!==null&&(r=o.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(s),Cv(t,r)}function VS(t,s){return me(t,s)}var Pa=null,Zr=null,Cc=!1,qa=!1,wc=!1,lr=0;function Ui(t){t!==Zr&&t.next===null&&(Zr===null?Pa=Zr=t:Zr=Zr.next=t),qa=!0,Cc||(Cc=!0,KS())}function Gn(t,s){if(!wc&&qa){wc=!0;do for(var r=!1,l=Pa;l!==null;){if(t!==0){var o=l.pendingLanes;if(o===0)var u=0;else{var v=l.suspendedLanes,m=l.pingedLanes;u=(1<<31-Vt(42|t)+1)-1,u&=o&~(v&~m),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(r=!0,Mv(l,u))}else u=ke,u=ae(l,l===Ke?u:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(u&3)===0||De(l,u)||(r=!0,Mv(l,u));l=l.next}while(r);wc=!1}}function WS(){wv()}function wv(){qa=Cc=!1;var t=0;lr!==0&&(ZS()&&(t=lr),lr=0);for(var s=zt(),r=null,l=Pa;l!==null;){var o=l.next,u=Ev(l,s);u===0?(l.next=null,r===null?Pa=o:r.next=o,o===null&&(Zr=r)):(r=l,(t!==0||(u&3)!==0)&&(qa=!0)),l=o}Gn(t)}function Ev(t,s){for(var r=t.suspendedLanes,l=t.pingedLanes,o=t.expirationTimes,u=t.pendingLanes&-62914561;0<u;){var v=31-Vt(u),m=1<<v,y=o[v];y===-1?((m&r)===0||(m&l)!==0)&&(o[v]=Ve(m,s)):y<=s&&(t.expiredLanes|=m),u&=~m}if(s=Ke,r=ke,r=ae(t,t===s?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===s&&(ze===2||ze===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ai(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||De(t,r)){if(s=r&-r,s===t.callbackPriority)return s;switch(l!==null&&Ai(l),Uo(r)){case 2:case 8:r=fn;break;case 32:r=cs;break;case 268435456:r=jl;break;default:r=cs}return l=xv.bind(null,t),r=me(r,l),t.callbackPriority=s,t.callbackNode=r,s}return l!==null&&l!==null&&Ai(l),t.callbackPriority=2,t.callbackNode=null,2}function xv(t,s){if(Rt!==0&&Rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Ua()&&t.callbackNode!==r)return null;var l=ke;return l=ae(t,t===Ke?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(av(t,l,s),Ev(t,zt()),t.callbackNode!=null&&t.callbackNode===r?xv.bind(null,t):null)}function Mv(t,s){if(Ua())return null;av(t,s,!0)}function KS(){JS(function(){(Le&6)!==0?me(un,WS):wv()})}function Ec(){return lr===0&&(lr=it()),lr}function Dv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Zl(""+t)}function kv(t,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,t.id&&r.setAttribute("form",t.id),s.parentNode.insertBefore(r,s),t=new FormData(t),r.parentNode.removeChild(r),t}function YS(t,s,r,l,o){if(s==="submit"&&r&&r.stateNode===o){var u=Dv((o[It]||null).action),v=l.submitter;v&&(s=(s=v[It]||null)?Dv(s.formAction):v.getAttribute("formAction"),s!==null&&(u=s,v=null));var m=new ta("action","action",null,l,o);t.push({event:m,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(lr!==0){var y=v?kv(o,v):new FormData(o);Yh(r,{pending:!0,data:y,method:o.method,action:u},null,y)}}else typeof u=="function"&&(m.preventDefault(),y=v?kv(o,v):new FormData(o),Yh(r,{pending:!0,data:y,method:o.method,action:u},u,y))},currentTarget:o}]})}}for(var xc=0;xc<hh.length;xc++){var Mc=hh[xc],jS=Mc.toLowerCase(),IS=Mc[0].toUpperCase()+Mc.slice(1);ki(jS,"on"+IS)}ki(ad,"onAnimationEnd"),ki(od,"onAnimationIteration"),ki(hd,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(hS,"onTransitionRun"),ki(cS,"onTransitionStart"),ki(uS,"onTransitionCancel"),ki(cd,"onTransitionEnd"),br("onMouseEnter",["mouseout","mouseover"]),br("onMouseLeave",["mouseout","mouseover"]),br("onPointerEnter",["pointerout","pointerover"]),br("onPointerLeave",["pointerout","pointerover"]),Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($n));function Tv(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],o=l.event;l=l.listeners;e:{var u=void 0;if(s)for(var v=l.length-1;0<=v;v--){var m=l[v],y=m.instance,B=m.currentTarget;if(m=m.listener,y!==u&&o.isPropagationStopped())break e;u=m,o.currentTarget=B;try{u(o)}catch(N){Da(N)}o.currentTarget=null,u=y}else for(v=0;v<l.length;v++){if(m=l[v],y=m.instance,B=m.currentTarget,m=m.listener,y!==u&&o.isPropagationStopped())break e;u=m,o.currentTarget=B;try{u(o)}catch(N){Da(N)}o.currentTarget=null,u=y}}}}function Me(t,s){var r=s[Po];r===void 0&&(r=s[Po]=new Set);var l=t+"__bubble";r.has(l)||(Rv(s,t,2,!1),r.add(l))}function Dc(t,s,r){var l=0;s&&(l|=4),Rv(r,t,l,s)}var Va="_reactListening"+Math.random().toString(36).slice(2);function kc(t){if(!t[Va]){t[Va]=!0,wf.forEach(function(r){r!=="selectionchange"&&(FS.has(r)||Dc(r,!1,t),Dc(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Va]||(s[Va]=!0,Dc("selectionchange",!1,s))}}function Rv(t,s,r,l){switch(eg(s)){case 2:var o=y0;break;case 8:o=b0;break;default:o=Wc}r=o.bind(null,s,r,t),o=void 0,!$o||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(o=!0),l?o!==void 0?t.addEventListener(s,r,{capture:!0,passive:o}):t.addEventListener(s,r,!0):o!==void 0?t.addEventListener(s,r,{passive:o}):t.addEventListener(s,r,!1)}function Tc(t,s,r,l,o){var u=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var m=l.stateNode.containerInfo;if(m===o)break;if(v===4)for(v=l.return;v!==null;){var y=v.tag;if((y===3||y===4)&&v.stateNode.containerInfo===o)return;v=v.return}for(;m!==null;){if(v=pr(m),v===null)return;if(y=v.tag,y===5||y===6||y===26||y===27){l=u=v;continue e}m=m.parentNode}}l=l.return}Hf(function(){var B=u,N=Xo(r),V=[];e:{var A=ud.get(t);if(A!==void 0){var O=ta,ve=t;switch(t){case"keypress":if(Jl(r)===0)break e;case"keydown":case"keyup":O=Vp;break;case"focusin":ve="focus",O=eh;break;case"focusout":ve="blur",O=eh;break;case"beforeblur":case"afterblur":O=eh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=qf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=Tp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=Yp;break;case ad:case od:case hd:O=Ap;break;case cd:O=Ip;break;case"scroll":case"scrollend":O=Dp;break;case"wheel":O=Xp;break;case"copy":case"cut":case"paste":O=Lp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Wf;break;case"toggle":case"beforetoggle":O=$p}var de=(s&4)!==0,Ue=!de&&(t==="scroll"||t==="scrollend"),D=de?A!==null?A+"Capture":null:A;de=[];for(var w=B,R;w!==null;){var P=w;if(R=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||R===null||D===null||(P=vn(w,D),P!=null&&de.push(Zn(w,P,R))),Ue)break;w=w.return}0<de.length&&(A=new O(A,ve,null,r,N),V.push({event:A,listeners:de}))}}if((s&7)===0){e:{if(A=t==="mouseover"||t==="pointerover",O=t==="mouseout"||t==="pointerout",A&&r!==Fo&&(ve=r.relatedTarget||r.fromElement)&&(pr(ve)||ve[mr]))break e;if((O||A)&&(A=N.window===N?N:(A=N.ownerDocument)?A.defaultView||A.parentWindow:window,O?(ve=r.relatedTarget||r.toElement,O=B,ve=ve?pr(ve):null,ve!==null&&(Ue=c(ve),de=ve.tag,ve!==Ue||de!==5&&de!==27&&de!==6)&&(ve=null)):(O=null,ve=B),O!==ve)){if(de=qf,P="onMouseLeave",D="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(de=Wf,P="onPointerLeave",D="onPointerEnter",w="pointer"),Ue=O==null?A:_n(O),R=ve==null?A:_n(ve),A=new de(P,w+"leave",O,r,N),A.target=Ue,A.relatedTarget=R,P=null,pr(N)===B&&(de=new de(D,w+"enter",ve,r,N),de.target=R,de.relatedTarget=Ue,P=de),Ue=P,O&&ve)t:{for(de=O,D=ve,w=0,R=de;R;R=Qr(R))w++;for(R=0,P=D;P;P=Qr(P))R++;for(;0<w-R;)de=Qr(de),w--;for(;0<R-w;)D=Qr(D),R--;for(;w--;){if(de===D||D!==null&&de===D.alternate)break t;de=Qr(de),D=Qr(D)}de=null}else de=null;O!==null&&Bv(V,A,O,de,!1),ve!==null&&Ue!==null&&Bv(V,Ue,ve,de,!0)}}e:{if(A=B?_n(B):window,O=A.nodeName&&A.nodeName.toLowerCase(),O==="select"||O==="input"&&A.type==="file")var ne=$f;else if(Xf(A))if(Zf)ne=lS;else{ne=rS;var Ee=sS}else O=A.nodeName,!O||O.toLowerCase()!=="input"||A.type!=="checkbox"&&A.type!=="radio"?B&&Io(B.elementType)&&(ne=$f):ne=nS;if(ne&&(ne=ne(t,B))){Gf(V,ne,r,N);break e}Ee&&Ee(t,A,B),t==="focusout"&&B&&A.type==="number"&&B.memoizedProps.value!=null&&jo(A,"number",A.value)}switch(Ee=B?_n(B):window,t){case"focusin":(Xf(Ee)||Ee.contentEditable==="true")&&(kr=Ee,lh=B,wn=null);break;case"focusout":wn=lh=kr=null;break;case"mousedown":ah=!0;break;case"contextmenu":case"mouseup":case"dragend":ah=!1,nd(V,r,N);break;case"selectionchange":if(oS)break;case"keydown":case"keyup":nd(V,r,N)}var ce;if(ih)e:{switch(t){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Dr?If(t,r)&&(_e="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_e="onCompositionStart");_e&&(Kf&&r.locale!=="ko"&&(Dr||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Dr&&(ce=Uf()):(ds=N,Zo="value"in ds?ds.value:ds.textContent,Dr=!0)),Ee=Wa(B,_e),0<Ee.length&&(_e=new Vf(_e,t,null,r,N),V.push({event:_e,listeners:Ee}),ce?_e.data=ce:(ce=Ff(r),ce!==null&&(_e.data=ce)))),(ce=Qp?Jp(t,r):eS(t,r))&&(_e=Wa(B,"onBeforeInput"),0<_e.length&&(Ee=new Vf("onBeforeInput","beforeinput",null,r,N),V.push({event:Ee,listeners:_e}),Ee.data=ce)),YS(V,t,B,r,N)}Tv(V,s)})}function Zn(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Wa(t,s){for(var r=s+"Capture",l=[];t!==null;){var o=t,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=vn(t,r),o!=null&&l.unshift(Zn(t,o,u)),o=vn(t,s),o!=null&&l.push(Zn(t,o,u))),t.tag===3)return l;t=t.return}return[]}function Qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Bv(t,s,r,l,o){for(var u=s._reactName,v=[];r!==null&&r!==l;){var m=r,y=m.alternate,B=m.stateNode;if(m=m.tag,y!==null&&y===l)break;m!==5&&m!==26&&m!==27||B===null||(y=B,o?(B=vn(r,u),B!=null&&v.unshift(Zn(r,B,y))):o||(B=vn(r,u),B!=null&&v.push(Zn(r,B,y)))),r=r.return}v.length!==0&&t.push({event:s,listeners:v})}var XS=/\r\n?/g,GS=/\u0000|\uFFFD/g;function Av(t){return(typeof t=="string"?t:""+t).replace(XS,`
`).replace(GS,"")}function Ov(t,s){return s=Av(s),Av(t)===s}function Ka(){}function He(t,s,r,l,o,u){switch(r){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Er(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Er(t,""+l);break;case"className":Xl(t,"class",l);break;case"tabIndex":Xl(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Xl(t,r,l);break;case"style":zf(t,l,u);break;case"data":if(s!=="object"){Xl(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Zl(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(r==="formAction"?(s!=="input"&&He(t,s,"name",o.name,o,null),He(t,s,"formEncType",o.formEncType,o,null),He(t,s,"formMethod",o.formMethod,o,null),He(t,s,"formTarget",o.formTarget,o,null)):(He(t,s,"encType",o.encType,o,null),He(t,s,"method",o.method,o,null),He(t,s,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Zl(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=Ka);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(o.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=Zl(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":Me("beforetoggle",t),Me("toggle",t),Fl(t,"popover",l);break;case"xlinkActuate":ji(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ji(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ji(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ji(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ji(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ji(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ji(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ji(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ji(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Fl(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=xp.get(r)||r,Fl(t,r,l))}}function Rc(t,s,r,l,o,u){switch(r){case"style":zf(t,l,u);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(o.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof l=="string"?Er(t,l):(typeof l=="number"||typeof l=="bigint")&&Er(t,""+l);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ef.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(o=r.endsWith("Capture"),s=r.slice(2,o?r.length-7:void 0),u=t[It]||null,u=u!=null?u[r]:null,typeof u=="function"&&t.removeEventListener(s,u,o),typeof l=="function")){typeof u!="function"&&u!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(s,l,o);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):Fl(t,r,l)}}}function Bt(t,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var l=!1,o=!1,u;for(u in r)if(r.hasOwnProperty(u)){var v=r[u];if(v!=null)switch(u){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:He(t,s,u,v,r,null)}}o&&He(t,s,"srcSet",r.srcSet,r,null),l&&He(t,s,"src",r.src,r,null);return;case"input":Me("invalid",t);var m=u=v=o=null,y=null,B=null;for(l in r)if(r.hasOwnProperty(l)){var N=r[l];if(N!=null)switch(l){case"name":o=N;break;case"type":v=N;break;case"checked":y=N;break;case"defaultChecked":B=N;break;case"value":u=N;break;case"defaultValue":m=N;break;case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(a(137,s));break;default:He(t,s,l,N,r,null)}}Bf(t,u,m,y,B,v,o,!1),Gl(t);return;case"select":Me("invalid",t),l=v=u=null;for(o in r)if(r.hasOwnProperty(o)&&(m=r[o],m!=null))switch(o){case"value":u=m;break;case"defaultValue":v=m;break;case"multiple":l=m;default:He(t,s,o,m,r,null)}s=u,r=v,t.multiple=!!l,s!=null?wr(t,!!l,s,!1):r!=null&&wr(t,!!l,r,!0);return;case"textarea":Me("invalid",t),u=o=l=null;for(v in r)if(r.hasOwnProperty(v)&&(m=r[v],m!=null))switch(v){case"value":l=m;break;case"defaultValue":o=m;break;case"children":u=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(a(91));break;default:He(t,s,v,m,r,null)}Of(t,l,o,u),Gl(t);return;case"option":for(y in r)if(r.hasOwnProperty(y)&&(l=r[y],l!=null))switch(y){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:He(t,s,y,l,r,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(l=0;l<$n.length;l++)Me($n[l],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in r)if(r.hasOwnProperty(B)&&(l=r[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:He(t,s,B,l,r,null)}return;default:if(Io(s)){for(N in r)r.hasOwnProperty(N)&&(l=r[N],l!==void 0&&Rc(t,s,N,l,r,void 0));return}}for(m in r)r.hasOwnProperty(m)&&(l=r[m],l!=null&&He(t,s,m,l,r,null))}function $S(t,s,r,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,v=null,m=null,y=null,B=null,N=null;for(O in r){var V=r[O];if(r.hasOwnProperty(O)&&V!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":y=V;default:l.hasOwnProperty(O)||He(t,s,O,null,l,V)}}for(var A in l){var O=l[A];if(V=r[A],l.hasOwnProperty(A)&&(O!=null||V!=null))switch(A){case"type":u=O;break;case"name":o=O;break;case"checked":B=O;break;case"defaultChecked":N=O;break;case"value":v=O;break;case"defaultValue":m=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(137,s));break;default:O!==V&&He(t,s,A,O,l,V)}}Yo(t,v,m,y,B,N,u,o);return;case"select":O=v=m=A=null;for(u in r)if(y=r[u],r.hasOwnProperty(u)&&y!=null)switch(u){case"value":break;case"multiple":O=y;default:l.hasOwnProperty(u)||He(t,s,u,null,l,y)}for(o in l)if(u=l[o],y=r[o],l.hasOwnProperty(o)&&(u!=null||y!=null))switch(o){case"value":A=u;break;case"defaultValue":m=u;break;case"multiple":v=u;default:u!==y&&He(t,s,o,u,l,y)}s=m,r=v,l=O,A!=null?wr(t,!!r,A,!1):!!l!=!!r&&(s!=null?wr(t,!!r,s,!0):wr(t,!!r,r?[]:"",!1));return;case"textarea":O=A=null;for(m in r)if(o=r[m],r.hasOwnProperty(m)&&o!=null&&!l.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:He(t,s,m,null,l,o)}for(v in l)if(o=l[v],u=r[v],l.hasOwnProperty(v)&&(o!=null||u!=null))switch(v){case"value":A=o;break;case"defaultValue":O=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(a(91));break;default:o!==u&&He(t,s,v,o,l,u)}Af(t,A,O);return;case"option":for(var ve in r)if(A=r[ve],r.hasOwnProperty(ve)&&A!=null&&!l.hasOwnProperty(ve))switch(ve){case"selected":t.selected=!1;break;default:He(t,s,ve,null,l,A)}for(y in l)if(A=l[y],O=r[y],l.hasOwnProperty(y)&&A!==O&&(A!=null||O!=null))switch(y){case"selected":t.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:He(t,s,y,A,l,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in r)A=r[de],r.hasOwnProperty(de)&&A!=null&&!l.hasOwnProperty(de)&&He(t,s,de,null,l,A);for(B in l)if(A=l[B],O=r[B],l.hasOwnProperty(B)&&A!==O&&(A!=null||O!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(137,s));break;default:He(t,s,B,A,l,O)}return;default:if(Io(s)){for(var Ue in r)A=r[Ue],r.hasOwnProperty(Ue)&&A!==void 0&&!l.hasOwnProperty(Ue)&&Rc(t,s,Ue,void 0,l,A);for(N in l)A=l[N],O=r[N],!l.hasOwnProperty(N)||A===O||A===void 0&&O===void 0||Rc(t,s,N,A,l,O);return}}for(var D in r)A=r[D],r.hasOwnProperty(D)&&A!=null&&!l.hasOwnProperty(D)&&He(t,s,D,null,l,A);for(V in l)A=l[V],O=r[V],!l.hasOwnProperty(V)||A===O||A==null&&O==null||He(t,s,V,A,l,O)}var Bc=null,Ac=null;function Ya(t){return t.nodeType===9?t:t.ownerDocument}function Lv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zv(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Oc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lc=null;function ZS(){var t=window.event;return t&&t.type==="popstate"?t===Lc?!1:(Lc=t,!0):(Lc=null,!1)}var Nv=typeof setTimeout=="function"?setTimeout:void 0,QS=typeof clearTimeout=="function"?clearTimeout:void 0,Hv=typeof Promise=="function"?Promise:void 0,JS=typeof queueMicrotask=="function"?queueMicrotask:typeof Hv<"u"?function(t){return Hv.resolve(null).then(t).catch(e0)}:Nv;function e0(t){setTimeout(function(){throw t})}function Ts(t){return t==="head"}function Uv(t,s){var r=s,l=0,o=0;do{var u=r.nextSibling;if(t.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(0<l&&8>l){r=l;var v=t.ownerDocument;if(r&1&&Qn(v.documentElement),r&2&&Qn(v.body),r&4)for(r=v.head,Qn(r),v=r.firstChild;v;){var m=v.nextSibling,y=v.nodeName;v[dn]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&v.rel.toLowerCase()==="stylesheet"||r.removeChild(v),v=m}}if(o===0){t.removeChild(u),ll(s);return}o--}else r==="$"||r==="$?"||r==="$!"?o++:l=r.charCodeAt(0)-48;else l=0;r=u}while(r);ll(s)}function zc(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":zc(r),qo(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function t0(t,s,r,l){for(;t.nodeType===1;){var o=r;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[dn])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(u=t.getAttribute("rel"),u==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(u!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(u=t.getAttribute("src"),(u!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===u)return t}else return t;if(t=Ri(t.nextSibling),t===null)break}return null}function i0(t,s,r){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ri(t.nextSibling),t===null))return null;return t}function Nc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function s0(t,s){var r=t.ownerDocument;if(t.data!=="$?"||r.readyState==="complete")s();else{var l=function(){s(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ri(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var Hc=null;function Pv(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}function qv(t,s,r){switch(s=Ya(r),t){case"html":if(t=s.documentElement,!t)throw Error(a(452));return t;case"head":if(t=s.head,!t)throw Error(a(453));return t;case"body":if(t=s.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Qn(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);qo(t)}var bi=new Map,Vv=new Set;function ja(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ns=H.d;H.d={f:r0,r:n0,D:l0,C:a0,L:o0,m:h0,X:u0,S:c0,M:f0};function r0(){var t=ns.f(),s=Na();return t||s}function n0(t){var s=Sr(t);s!==null&&s.tag===5&&s.type==="form"?a_(s):ns.r(t)}var Jr=typeof document>"u"?null:document;function Wv(t,s,r){var l=Jr;if(l&&typeof s=="string"&&s){var o=_i(s);o='link[rel="'+t+'"][href="'+o+'"]',typeof r=="string"&&(o+='[crossorigin="'+r+'"]'),Vv.has(o)||(Vv.add(o),t={rel:t,crossOrigin:r,href:s},l.querySelector(o)===null&&(s=l.createElement("link"),Bt(s,"link",t),yt(s),l.head.appendChild(s)))}}function l0(t){ns.D(t),Wv("dns-prefetch",t,null)}function a0(t,s){ns.C(t,s),Wv("preconnect",t,s)}function o0(t,s,r){ns.L(t,s,r);var l=Jr;if(l&&t&&s){var o='link[rel="preload"][as="'+_i(s)+'"]';s==="image"&&r&&r.imageSrcSet?(o+='[imagesrcset="'+_i(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(o+='[imagesizes="'+_i(r.imageSizes)+'"]')):o+='[href="'+_i(t)+'"]';var u=o;switch(s){case"style":u=en(t);break;case"script":u=tn(t)}bi.has(u)||(t=p({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:t,as:s},r),bi.set(u,t),l.querySelector(o)!==null||s==="style"&&l.querySelector(Jn(u))||s==="script"&&l.querySelector(el(u))||(s=l.createElement("link"),Bt(s,"link",t),yt(s),l.head.appendChild(s)))}}function h0(t,s){ns.m(t,s);var r=Jr;if(r&&t){var l=s&&typeof s.as=="string"?s.as:"script",o='link[rel="modulepreload"][as="'+_i(l)+'"][href="'+_i(t)+'"]',u=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=tn(t)}if(!bi.has(u)&&(t=p({rel:"modulepreload",href:t},s),bi.set(u,t),r.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(el(u)))return}l=r.createElement("link"),Bt(l,"link",t),yt(l),r.head.appendChild(l)}}}function c0(t,s,r){ns.S(t,s,r);var l=Jr;if(l&&t){var o=yr(l).hoistableStyles,u=en(t);s=s||"default";var v=o.get(u);if(!v){var m={loading:0,preload:null};if(v=l.querySelector(Jn(u)))m.loading=5;else{t=p({rel:"stylesheet",href:t,"data-precedence":s},r),(r=bi.get(u))&&Uc(t,r);var y=v=l.createElement("link");yt(y),Bt(y,"link",t),y._p=new Promise(function(B,N){y.onload=B,y.onerror=N}),y.addEventListener("load",function(){m.loading|=1}),y.addEventListener("error",function(){m.loading|=2}),m.loading|=4,Ia(v,s,l)}v={type:"stylesheet",instance:v,count:1,state:m},o.set(u,v)}}}function u0(t,s){ns.X(t,s);var r=Jr;if(r&&t){var l=yr(r).hoistableScripts,o=tn(t),u=l.get(o);u||(u=r.querySelector(el(o)),u||(t=p({src:t,async:!0},s),(s=bi.get(o))&&Pc(t,s),u=r.createElement("script"),yt(u),Bt(u,"link",t),r.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(o,u))}}function f0(t,s){ns.M(t,s);var r=Jr;if(r&&t){var l=yr(r).hoistableScripts,o=tn(t),u=l.get(o);u||(u=r.querySelector(el(o)),u||(t=p({src:t,async:!0,type:"module"},s),(s=bi.get(o))&&Pc(t,s),u=r.createElement("script"),yt(u),Bt(u,"link",t),r.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(o,u))}}function Kv(t,s,r,l){var o=(o=le.current)?ja(o):null;if(!o)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=en(r.href),r=yr(o).hoistableStyles,l=r.get(s),l||(l={type:"style",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=en(r.href);var u=yr(o).hoistableStyles,v=u.get(t);if(v||(o=o.ownerDocument||o,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(t,v),(u=o.querySelector(Jn(t)))&&!u._p&&(v.instance=u,v.state.loading=5),bi.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},bi.set(t,r),u||d0(o,t,r,v.state))),s&&l===null)throw Error(a(528,""));return v}if(s&&l!==null)throw Error(a(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=tn(r),r=yr(o).hoistableScripts,l=r.get(s),l||(l={type:"script",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function en(t){return'href="'+_i(t)+'"'}function Jn(t){return'link[rel="stylesheet"]['+t+"]"}function Yv(t){return p({},t,{"data-precedence":t.precedence,precedence:null})}function d0(t,s,r,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Bt(s,"link",r),yt(s),t.head.appendChild(s))}function tn(t){return'[src="'+_i(t)+'"]'}function el(t){return"script[async]"+t}function jv(t,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+_i(r.href)+'"]');if(l)return s.instance=l,yt(l),l;var o=p({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),yt(l),Bt(l,"style",o),Ia(l,r.precedence,t),s.instance=l;case"stylesheet":o=en(r.href);var u=t.querySelector(Jn(o));if(u)return s.state.loading|=4,s.instance=u,yt(u),u;l=Yv(r),(o=bi.get(o))&&Uc(l,o),u=(t.ownerDocument||t).createElement("link"),yt(u);var v=u;return v._p=new Promise(function(m,y){v.onload=m,v.onerror=y}),Bt(u,"link",l),s.state.loading|=4,Ia(u,r.precedence,t),s.instance=u;case"script":return u=tn(r.src),(o=t.querySelector(el(u)))?(s.instance=o,yt(o),o):(l=r,(o=bi.get(u))&&(l=p({},r),Pc(l,o)),t=t.ownerDocument||t,o=t.createElement("script"),yt(o),Bt(o,"link",l),t.head.appendChild(o),s.instance=o);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Ia(l,r.precedence,t));return s.instance}function Ia(t,s,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,u=o,v=0;v<l.length;v++){var m=l[v];if(m.dataset.precedence===s)u=m;else if(u!==o)break}u?u.parentNode.insertBefore(t,u.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(t,s.firstChild))}function Uc(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Pc(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Fa=null;function Iv(t,s,r){if(Fa===null){var l=new Map,o=Fa=new Map;o.set(r,l)}else o=Fa,l=o.get(r),l||(l=new Map,o.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),o=0;o<r.length;o++){var u=r[o];if(!(u[dn]||u[Nt]||t==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var v=u.getAttribute(s)||"";v=t+v;var m=l.get(v);m?m.push(u):l.set(v,[u])}}return l}function Fv(t,s,r){t=t.ownerDocument||t,t.head.insertBefore(r,s==="title"?t.querySelector("head > title"):null)}function _0(t,s,r){if(r===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Xv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var tl=null;function v0(){}function g0(t,s,r){if(tl===null)throw Error(a(475));var l=tl;if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var o=en(r.href),u=t.querySelector(Jn(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Xa.bind(l),t.then(l,l)),s.state.loading|=4,s.instance=u,yt(u);return}u=t.ownerDocument||t,r=Yv(r),(o=bi.get(o))&&Uc(r,o),u=u.createElement("link"),yt(u);var v=u;v._p=new Promise(function(m,y){v.onload=m,v.onerror=y}),Bt(u,"link",r),s.instance=u}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=Xa.bind(l),t.addEventListener("load",s),t.addEventListener("error",s))}}function m0(){if(tl===null)throw Error(a(475));var t=tl;return t.stylesheets&&t.count===0&&qc(t,t.stylesheets),0<t.count?function(s){var r=setTimeout(function(){if(t.stylesheets&&qc(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(r)}}:null}function Xa(){if(this.count--,this.count===0){if(this.stylesheets)qc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ga=null;function qc(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ga=new Map,s.forEach(p0,t),Ga=null,Xa.call(t))}function p0(t,s){if(!(s.state.loading&4)){var r=Ga.get(t);if(r)var l=r.get(null);else{r=new Map,Ga.set(t,r);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var v=o[u];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),l=v)}l&&r.set(null,l)}o=s.instance,v=o.getAttribute("data-precedence"),u=r.get(v)||l,u===l&&r.set(null,o),r.set(v,o),this.count++,l=Xa.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),u?u.parentNode.insertBefore(o,u.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),s.state.loading|=4}}var il={$$typeof:F,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function S0(t,s,r,l,o,u,v,m){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gr(0),this.hiddenUpdates=gr(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=m,this.incompleteTransitions=new Map}function Gv(t,s,r,l,o,u,v,m,y,B,N,V){return t=new S0(t,s,r,v,m,y,B,V),s=1,u===!0&&(s|=24),u=si(3,null,null,s),t.current=u,u.stateNode=t,s=bh(),s.refCount++,t.pooledCache=s,s.refCount++,u.memoizedState={element:l,isDehydrated:r,cache:s},xh(u),t}function $v(t){return t?(t=Ar,t):Ar}function Zv(t,s,r,l,o,u){o=$v(o),l.context===null?l.context=o:l.pendingContext=o,l=gs(s),l.payload={element:r},u=u===void 0?null:u,u!==null&&(l.callback=u),r=ms(t,l,s),r!==null&&(oi(r,t,s),An(r,t,s))}function Qv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Vc(t,s){Qv(t,s),(t=t.alternate)&&Qv(t,s)}function Jv(t){if(t.tag===13){var s=Br(t,67108864);s!==null&&oi(s,t,67108864),Vc(t,67108864)}}var $a=!0;function y0(t,s,r,l){var o=M.T;M.T=null;var u=H.p;try{H.p=2,Wc(t,s,r,l)}finally{H.p=u,M.T=o}}function b0(t,s,r,l){var o=M.T;M.T=null;var u=H.p;try{H.p=8,Wc(t,s,r,l)}finally{H.p=u,M.T=o}}function Wc(t,s,r,l){if($a){var o=Kc(l);if(o===null)Tc(t,s,l,Za,r),tg(t,l);else if(w0(o,t,s,r,l))l.stopPropagation();else if(tg(t,l),s&4&&-1<C0.indexOf(t)){for(;o!==null;){var u=Sr(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var v=se(u.pendingLanes);if(v!==0){var m=u;for(m.pendingLanes|=2,m.entangledLanes|=2;v;){var y=1<<31-Vt(v);m.entanglements[1]|=y,v&=~y}Ui(u),(Le&6)===0&&(La=zt()+500,Gn(0))}}break;case 13:m=Br(u,2),m!==null&&oi(m,u,2),Na(),Vc(u,2)}if(u=Kc(l),u===null&&Tc(t,s,l,Za,r),u===o)break;o=u}o!==null&&l.stopPropagation()}else Tc(t,s,l,null,r)}}function Kc(t){return t=Xo(t),Yc(t)}var Za=null;function Yc(t){if(Za=null,t=pr(t),t!==null){var s=c(t);if(s===null)t=null;else{var r=s.tag;if(r===13){if(t=f(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Za=t,null}function eg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bo()){case un:return 2;case fn:return 8;case cs:case Yl:return 32;case jl:return 268435456;default:return 32}default:return 32}}var jc=!1,Rs=null,Bs=null,As=null,sl=new Map,rl=new Map,Os=[],C0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tg(t,s){switch(t){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":sl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(s.pointerId)}}function nl(t,s,r,l,o,u){return t===null||t.nativeEvent!==u?(t={blockedOn:s,domEventName:r,eventSystemFlags:l,nativeEvent:u,targetContainers:[o]},s!==null&&(s=Sr(s),s!==null&&Jv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,o!==null&&s.indexOf(o)===-1&&s.push(o),t)}function w0(t,s,r,l,o){switch(s){case"focusin":return Rs=nl(Rs,t,s,r,l,o),!0;case"dragenter":return Bs=nl(Bs,t,s,r,l,o),!0;case"mouseover":return As=nl(As,t,s,r,l,o),!0;case"pointerover":var u=o.pointerId;return sl.set(u,nl(sl.get(u)||null,t,s,r,l,o)),!0;case"gotpointercapture":return u=o.pointerId,rl.set(u,nl(rl.get(u)||null,t,s,r,l,o)),!0}return!1}function ig(t){var s=pr(t.target);if(s!==null){var r=c(s);if(r!==null){if(s=r.tag,s===13){if(s=f(r),s!==null){t.blockedOn=s,gp(t.priority,function(){if(r.tag===13){var l=ai();l=Ho(l);var o=Br(r,l);o!==null&&oi(o,r,l),Vc(r,l)}});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qa(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Kc(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);Fo=l,r.target.dispatchEvent(l),Fo=null}else return s=Sr(r),s!==null&&Jv(s),t.blockedOn=r,!1;s.shift()}return!0}function sg(t,s,r){Qa(t)&&r.delete(s)}function E0(){jc=!1,Rs!==null&&Qa(Rs)&&(Rs=null),Bs!==null&&Qa(Bs)&&(Bs=null),As!==null&&Qa(As)&&(As=null),sl.forEach(sg),rl.forEach(sg)}function Ja(t,s){t.blockedOn===s&&(t.blockedOn=null,jc||(jc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,E0)))}var eo=null;function rg(t){eo!==t&&(eo=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){eo===t&&(eo=null);for(var s=0;s<t.length;s+=3){var r=t[s],l=t[s+1],o=t[s+2];if(typeof l!="function"){if(Yc(l||r)===null)continue;break}var u=Sr(r);u!==null&&(t.splice(s,3),s-=3,Yh(u,{pending:!0,data:o,method:r.method,action:l},l,o))}}))}function ll(t){function s(y){return Ja(y,t)}Rs!==null&&Ja(Rs,t),Bs!==null&&Ja(Bs,t),As!==null&&Ja(As,t),sl.forEach(s),rl.forEach(s);for(var r=0;r<Os.length;r++){var l=Os[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Os.length&&(r=Os[0],r.blockedOn===null);)ig(r),r.blockedOn===null&&Os.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var o=r[l],u=r[l+1],v=o[It]||null;if(typeof u=="function")v||rg(r);else if(v){var m=null;if(u&&u.hasAttribute("formAction")){if(o=u,v=u[It]||null)m=v.formAction;else if(Yc(o)!==null)continue}else m=v.action;typeof m=="function"?r[l+1]=m:(r.splice(l,3),l-=3),rg(r)}}}function Ic(t){this._internalRoot=t}to.prototype.render=Ic.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));var r=s.current,l=ai();Zv(r,l,t,s,null,null)},to.prototype.unmount=Ic.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Zv(t.current,2,null,t,null,null),Na(),s[mr]=null}};function to(t){this._internalRoot=t}to.prototype.unstable_scheduleHydration=function(t){if(t){var s=bf();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Os.length&&s!==0&&s<Os[r].priority;r++);Os.splice(r,0,t),r===0&&ig(t)}};var ng=i.version;if(ng!=="19.1.0")throw Error(a(527,ng,"19.1.0"));H.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=g(s),t=t!==null?d(t):null,t=t===null?null:t.stateNode,t};var x0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!io.isDisabled&&io.supportsFiber)try{Vs=io.inject(x0),qt=io}catch{}}return ol.createRoot=function(t,s){if(!h(t))throw Error(a(299));var r=!1,l="",o=b_,u=C_,v=w_,m=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(o=s.onUncaughtError),s.onCaughtError!==void 0&&(u=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(m=s.unstable_transitionCallbacks)),s=Gv(t,1,!1,null,null,r,l,o,u,v,m,null),t[mr]=s.current,kc(t),new Ic(s)},ol.hydrateRoot=function(t,s,r){if(!h(t))throw Error(a(299));var l=!1,o="",u=b_,v=C_,m=w_,y=null,B=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onUncaughtError!==void 0&&(u=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(m=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(y=r.unstable_transitionCallbacks),r.formState!==void 0&&(B=r.formState)),s=Gv(t,1,!0,s,r??null,l,o,u,v,m,y,B),s.context=$v(null),r=s.current,l=ai(),l=Ho(l),o=gs(l),o.callback=null,ms(r,o,l),r=l,s.current.lanes=r,us(s,r),Ui(s),t[mr]=s.current,kc(t),new to(s)},ol.version="19.1.0",ol}var gg;function H0(){if(gg)return $c.exports;gg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}return e(),$c.exports=N0(),$c.exports}var U0=H0(),kl,Tl;class wm extends Error{constructor(n,a=void 0){super(n);gt(this,kl,"CustomError");gt(this,Tl);this.name=this.constructor.name,At(this,kl,this.constructor.name),At(this,Tl,a)}get ErrorName(){return ie(this,kl)}get Identifier(){return ie(this,Tl)}}kl=new WeakMap,Tl=new WeakMap;class of extends wm{constructor(i,n=void 0,a=void 0){super(i,a),this.CarryValue=n}}class xo extends of{constructor(i=void 0,n=void 0,a=void 0,h=void 0){n!=null&&(i=i??`Val, ${n}, is invalid.`),super(i,a,h),this.Val=n}}class P0 extends xo{constructor(i=void 0,n=void 0,a=void 0,h=void 0,c=void 0){n!=null&&a!=null&&(i=i??`Val, ${n}, shouldn't be smaller than ${a}.`),super(i,n,h,c),this.Min=a}}class q0 extends xo{constructor(i=void 0,n=void 0,a=void 0,h=void 0,c=void 0){n!=null&&a!=null&&(i=i??`Val, ${n}, shouldn't be larger than ${a}.`),super(i,n,h,c),this.Max=a}}class Em extends of{}class V0 extends of{constructor(i,n=void 0,a=void 0,h=void 0){n!=null&&(i=i??`Argument, ${n}, is required.`),super(i,a,h),this.ArgumentName=n}}function W0(e,i=void 0){if(i=i??`${e} is not a string.`,typeof e!="string")throw new Em(i)}function ft(e,i=void 0){if(i=i??`${e} is not an integer.`,Number.isInteger(e)!=!0)throw new Em(i)}function cr(e,i,n=void 0){if(n=n??`min, ${e}, shouldn't be bigger than max, ${i}.`,e>i)throw new xo(n)}function so(e,i=void 0,n=void 0,a=void 0,h=void 0){if(i!=null&&n!=null&&cr(i,n),a=a??`val, ${e}, shouldn't be smaller than min, ${i}.`,h=h??`val, ${e}, shouldn't be larger than max, ${n}.`,i!=null&&e<i)throw new P0(a,e,i);if(n!=null&&e>n)throw new q0(h,e,n)}var xi;class hl{constructor(i,n=void 0,a=void 0,h=void 0){gt(this,xi);At(this,xi,i),this.ValOnChangeCallback=n??((c,f)=>{}),this.ValOnSetCallback=a??(c=>{}),this.ValChangesCheckerCallback=h??((c,f)=>c!==f)}get Val(){return ie(this,xi)}set Val(i){if(this.ValChangesCheckerCallback(ie(this,xi),i)){const n=ie(this,xi);At(this,xi,i),this.ValOnChangeCallback(n,ie(this,xi))}this.ValOnSetCallback(ie(this,xi))}toString(){return ie(this,xi).toString()}valueOf(){return ie(this,xi)}}xi=new WeakMap;var Qt,Jt,qe,an,co;const wl=class wl{constructor(i=0,n=0,a=0,h=void 0,c=void 0,f=void 0,_=void 0){gt(this,an);gt(this,Qt,0);gt(this,Jt,0);gt(this,qe,0);ft(i),ft(n),ft(a),cr(n,a),At(this,Qt,n),At(this,Jt,a),this.UnderflowCallBack=h??((g,d,p)=>{}),this.OverflowCallBack=c??((g,d,p)=>{}),this.ValOnChangeCallback=f??((g,d,p)=>{}),this.ValOnSetCallback=_??((g,d)=>{}),At(this,qe,wl.Wrap(i,ie(this,Qt),ie(this,Jt)))}get Min(){return ie(this,Qt)}set Min(i){if(ft(i),cr(i,ie(this,Jt)),ie(this,Qt)!==i){At(this,Qt,i);const n=ie(this,qe);Ci(this,an,co).call(this),n!==ie(this,qe)&&this.ValOnChangeCallback(n,ie(this,qe),this)}}get Max(){return ie(this,Jt)}set Max(i){if(ft(i),cr(ie(this,Qt),i),ie(this,Jt)!==i){At(this,Jt,i);const n=ie(this,qe);Ci(this,an,co).call(this),n!==ie(this,qe)&&this.ValOnChangeCallback(n,ie(this,qe),this)}}get Val(){return ie(this,qe)}set Val(i){ft(i);const n=ie(this,qe);At(this,qe,i),Ci(this,an,co).call(this),n!==ie(this,qe)&&this.ValOnChangeCallback(n,ie(this,qe),this),this.ValOnSetCallback(ie(this,qe),this)}static Wrap(i,n,a){ft(i),ft(n),ft(a),cr(n,a);const h=a-n+1;return((i-n)%h+h)%h+n}Copy(i=!0){return new wl(ie(this,qe),ie(this,Qt),ie(this,Jt),i?this.UnderflowCallBack:void 0,i?this.OverflowCallBack:void 0,i?this.ValOnChangeCallback:void 0,i?this.ValOnSetCallback:void 0)}toString(){return`WrappedInt(${ie(this,qe)} [${ie(this,Qt)}~${ie(this,Jt)}])`}valueOf(){return ie(this,qe)}toJSON(){return{Val:ie(this,qe),Min:ie(this,Qt),Max:ie(this,Jt)}}};Qt=new WeakMap,Jt=new WeakMap,qe=new WeakMap,an=new WeakSet,co=function(){let i=!1,n=!1;const a=ie(this,qe);ie(this,qe)<ie(this,Qt)&&(i=!0),ie(this,qe)>ie(this,Jt)&&(n=!0),At(this,qe,wl.Wrap(ie(this,qe),ie(this,Qt),ie(this,Jt))),i===!0&&this.UnderflowCallBack(a,ie(this,qe),this),n===!0&&this.OverflowCallBack(a,ie(this,qe),ie(this,qe),this)};let gu=wl;class mu extends xo{constructor(i=void 0,n=void 0,a=void 0,h=void 0,c=void 0){n!=null&&(i=i??`Memory pointer, ${n}, is out of range.`),super(i,n,h,c),this.MemSize=a}}const pu=3e4;var Rl,Bl,Al,fi,Ol,Ll,zl,Nl,Hl,Ul,ei,Su,uo,yu,xm;const El=class El{constructor(i="",n=3e4,a={}){gt(this,ei);gt(this,Rl,new hl("",(i,n)=>{const a=El.MapLoopPairs(n);At(this,Hl,a.LoopPairs),At(this,Ul,a.LeftOutLoops)}));gt(this,Bl,new hl(0,(i,n)=>{this.CIndexOnChangeCallback(i,n,this),this.CodeEnded===!0&&this.CodeEndedCallback(this)}));gt(this,Al,new hl(0,(i,n)=>{Ci(this,ei,uo).call(this),this.MemPtrOnChangeCallback(i,n,this)}));gt(this,fi,[]);gt(this,Ol,new hl(0,(i,n)=>{for(let a=0;a<this.MemSize;a++)ie(this,fi)[a].Min=n}));gt(this,Ll,new hl(255,(i,n)=>{for(let a=0;a<this.MemSize;a++)ie(this,fi)[a].Max=n}));gt(this,zl,0);gt(this,Nl,!1);gt(this,Hl,{});gt(this,Ul,[]);hi(this,"InputCallback",i=>i.CellMinVal);hi(this,"OutputCallback",(i,n)=>{});hi(this,"CIndexOnChangeCallback",(i,n,a)=>{});hi(this,"MemPtrOnChangeCallback",(i,n,a)=>{});hi(this,"MemPtrUnderflowCallback",(i,n)=>{throw new mu(void 0,i,n.MemSize,void 0,"MemPtrUnderflow")});hi(this,"MemPtrOverflowCallback",(i,n)=>{throw new mu(void 0,i,n.MemSize,void 0,"MemPtrOverflow")});hi(this,"CodeEndedCallback",i=>{});hi(this,"CellUnderflowCallback",(i,n,a,h)=>{});hi(this,"CellOverflowCallback",(i,n,a,h)=>{});hi(this,"MemCellOnChangeCallback",(i,n,a,h)=>{});hi(this,"MemCellOnSetCallback",(i,n,a)=>{});hi(this,"CodeExecuteOperation");if(a.mem==null&&n==null)throw new V0("Must provide either memSize or mem.","memSize or mem");this.SetConfig(i,n,a)}get BFCode(){return ie(this,Rl).Val}set BFCode(i){W0(i),ie(this,Rl).Val=i,this.CodeEnded=!1}get MemSize(){return ie(this,fi).length}set MemSize(i){Ci(this,ei,yu).call(this,i)}get LoopPairs(){return{...ie(this,Hl)}}get LeftOutLoops(){return[...ie(this,Ul)]}get CIndex(){return ie(this,Bl).Val}set CIndex(i){ft(i),ie(this,Bl).Val=i}get MemPtr(){return ie(this,Al).Val}set MemPtr(i){ft(i),ie(this,Al).Val=i}get MemArr(){const i=[];for(let n=0;n<this.MemSize;n++)i.push(this.GetCellVal(n));return i}set MemArr(i){El.ValidateMemArg(i),so(i.length,1,pu),At(this,fi,[]);for(let n=0;n<i.length;n++)ie(this,fi).push(Ci(this,ei,Su).call(this,n,i[n]));Ci(this,ei,uo).call(this)}get CellMinVal(){return ie(this,Ol).Val}set CellMinVal(i){ft(i),cr(i,this.CellMaxVal),ie(this,Ol).Val=i}get CellMaxVal(){return ie(this,Ll).Val}set CellMaxVal(i){ft(i),cr(this.CellMinVal,i),ie(this,Ll).Val=i}get ConditionVal(){return ie(this,zl)}set ConditionVal(i){ft(i),At(this,zl,i)}get CodeEnded(){return ie(this,Nl)===!0?!0:this.CIndex>=this.BFCode.length}set CodeEnded(i){At(this,Nl,i)}GetCellVal(i){return ie(this,fi)[i].Val}SetCellVal(i,n){ft(n),ie(this,fi)[i].Val=n}get CurrentCellVal(){return this.GetCellVal(this.MemPtr)}set CurrentCellVal(i){this.SetCellVal(this.MemPtr,i)}set AllCellVal(i){ft(i),ie(this,fi).forEach(n=>{n.Val=i})}SetAllCellVal(i){return this.AllCellVal=i,this}static ValidateMemArg(i){for(let n=0;n<i.length;n++){const a=i[n];ft(a)}}static MapLoopPairs(i){const n=[],a={},h=[];for(let c=0;c<i.length;c++){const f=i[c];if(f==="[")n.push(c);else if(f==="]")if(n.length>0){const _=n.pop();a[_]=c,a[c]=_}else h.push(c)}return h.push(...n),{LoopPairs:a,LeftOutLoops:h}}static StripBFCode(i){return i.replace(/[^\[\]\+\-\>\<\.\,]/g,"")}SetConfig(i=void 0,n=void 0,a={}){const{cIndex:h=void 0,memPtr:c=void 0,mem:f=void 0,cellMinVal:_=void 0,cellMaxVal:g=void 0,conditionVal:d=void 0,defaultVal:p=void 0,inputCallback:S=void 0,outputCallback:E=void 0,cIndexOnChangeCallback:k=void 0,memPtrOnChangeCallback:x=void 0,memPtrUnderflowCallback:C=void 0,memPtrOverflowCallback:T=void 0,codeEndedCallback:z=void 0,cellUnderflowCallback:ee=void 0,cellOverflowCallback:F=void 0,memCellOnChangeCallback:j=void 0,memCellOnSetCallback:K=void 0,codeExecuteOperation:te=void 0}=a;return this.SubscribeCallbacks(S,E,k,x,C,T,z,ee,F,j,K,te),i!=null&&(this.BFCode=i),h!=null?this.CIndex=h:this.CodeEnded===!0&&this.CodeEndedCallback(this),c!=null&&(this.MemPtr=c),_!=null&&(this.CellMinVal=_),g!=null&&(this.CellMaxVal=g),d!=null&&(this.ConditionVal=d),f!=null&&(this.MemArr=f),n!=null&&Ci(this,ei,yu).call(this,n,p),this}SubscribeCallbacks(i=void 0,n=void 0,a=void 0,h=void 0,c=void 0,f=void 0,_=void 0,g=void 0,d=void 0,p=void 0,S=void 0,E=void 0){return i!=null&&(this.InputCallback=i),n!=null&&(this.OutputCallback=n),a!=null&&(this.CIndexOnChangeCallback=a),h!=null&&(this.MemPtrOnChangeCallback=h),c!=null&&(this.MemPtrUnderflowCallback=c),f!=null&&(this.MemPtrOverflowCallback=f),_!=null&&(this.CodeEndedCallback=_),g!=null&&(this.CellUnderflowCallback=g),d!=null&&(this.CellOverflowCallback=d),p!=null&&(this.MemCellOnChangeCallback=p),S!=null&&(this.MemCellOnSetCallback=S),this.CodeExecuteOperation=E,this}Reset(i=void 0,n=void 0,a=void 0){return i==null&&(i=0),n==null&&(n=0),a==null&&(a=this.CellMinVal),this.CIndex=i,this.MemPtr=n,this.AllCellVal=a,this}toJSON(){return{BFCode:this.BFCode,CIndex:this.CIndex,MemPtr:this.MemPtr,MemSize:this.MemSize,MemArr:this.MemArr,CodeEnded:this.CodeEnded,CellMinVal:this.CellMinVal,CellMaxVal:this.CellMaxVal,ConditionVal:this.ConditionVal,LoopPairs:this.LoopPairs,LeftOutLoops:this.LeftOutLoops}}Copy(i=!0){return new El(this.BFCode,this.MemSize,{cIndex:this.CIndex,memPtr:this.MemPtr,mem:this.MemArr,cellMinVal:this.CellMinVal,cellMaxVal:this.CellMaxVal,conditionVal:this.ConditionVal,inputCallback:i?this.InputCallback:void 0,outputCallback:i?this.OutputCallback:void 0,cIndexOnChangeCallback:i?this.CIndexOnChangeCallback:void 0,memPtrOnChangeCallback:i?this.MemPtrOnChangeCallback:void 0,memPtrUnderflowCallback:i?this.MemPtrUnderflowCallback:void 0,memPtrOverflowCallback:i?this.MemPtrOverflowCallback:void 0,codeEndedCallback:i?this.CodeEndedCallback:void 0,cellUnderflowCallback:i?this.CellUnderflowCallback:void 0,cellOverflowCallback:i?this.CellOverflowCallback:void 0,memCellOnChangeCallback:i?this.MemCellOnChangeCallback:void 0,memCellOnSetCallback:i?this.MemCellOnSetCallback:void 0,codeExecuteOperation:i?this.CodeExecuteOperation:void 0})}async BF_Execute(){if(this.CodeEnded===!1){const i=this.BFCode[this.CIndex];this.CodeExecuteOperation==null?this.CIndex=await Ci(this,ei,xm).call(this,i):this.CIndex=await this.CodeExecuteOperation(i,this)}return this}async BF_Execute_Until_End(i=void 0){let n=0;for(i!=null&&(ft(i),so(i,0));!this.CodeEnded&&!(i!=null&&n>=i);)await this.BF_Execute(),n+=1;return this}async*BF_Execute_Generator(){for(;!this.CodeEnded;)yield await this.BF_Execute()}BF_IncrementCellVal_Operation(){return this.CurrentCellVal+=1,this}BF_DecrementCellVal_Operation(){return this.CurrentCellVal-=1,this}BF_NextCell_Operation(){return this.MemPtr+=1,this}BF_PrevCell_Operation(){return this.MemPtr-=1,this}async BF_Input_Operation(){return this.CurrentCellVal=await this.InputCallback(this),this}async BF_Output_Operation(){return await this.OutputCallback(this.CurrentCellVal,this),this}};Rl=new WeakMap,Bl=new WeakMap,Al=new WeakMap,fi=new WeakMap,Ol=new WeakMap,Ll=new WeakMap,zl=new WeakMap,Nl=new WeakMap,Hl=new WeakMap,Ul=new WeakMap,ei=new WeakSet,Su=function(i,n){return new gu(n,this.CellMinVal,this.CellMaxVal,(a,h,c)=>{this.CellUnderflowCallback(i,a,h,this)},(a,h,c)=>{this.CellOverflowCallback(i,a,h,this)},(a,h,c)=>{this.MemCellOnChangeCallback(i,a,h,this)},(a,h)=>{this.MemCellOnSetCallback(i,a,this)})},uo=function(){let i=!0;return this.MemPtr<0&&(i=!1,this.MemPtrUnderflowCallback(this.MemPtr,this)),this.MemPtr>=this.MemSize&&(i=!1,this.MemPtrOverflowCallback(this.MemPtr,this)),i},yu=function(i,n=void 0){ft(i),so(i,1,pu),n=n??this.CellMinVal,ft(n),so(n,this.CellMinVal,this.CellMaxVal);const a=this.MemSize,h=a-i;if(h<0)for(let c=a;c<i;c++)ie(this,fi).push(Ci(this,ei,Su).call(this,c,n));else h>0&&ie(this,fi).splice(i,h);Ci(this,ei,uo).call(this)},xm=async function(i){let n=this.CIndex;return i==="+"?this.BF_IncrementCellVal_Operation():i==="-"?this.BF_DecrementCellVal_Operation():i===">"?this.BF_NextCell_Operation():i==="<"?this.BF_PrevCell_Operation():i==="."?await this.BF_Output_Operation():i===","?await this.BF_Input_Operation():i==="["?this.LoopPairs[n]!=null&&this.CurrentCellVal===this.ConditionVal&&(n=this.LoopPairs[n]):i==="]"&&this.LoopPairs[n]!=null&&this.CurrentCellVal!==this.ConditionVal&&(n=this.LoopPairs[n]),n+1};let bl=El;const K0=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US"];function eu(e,i){switch(i){case"code":return e<128?`[CTRL ${e}]`:`[U+${e.toString(16).toUpperCase().padStart(4,"0")}]`;case"dec":return e.toString(10);case"hex":return`0x${e.toString(16).toUpperCase()}`;case"oct":return`0o${e.toString(8)}`;case"bin":return`0b${e.toString(2)}`;case"escaped":return e<=255?`\\x${e.toString(16).toUpperCase().padStart(2,"0")}`:e<=65535?`\\u${e.toString(16).toUpperCase().padStart(4,"0")}`:`\\u{${e.toString(16).toUpperCase()}}`;case"named":return e<32?`[${K0[e]}]`:e===127?"[DEL]":`[U+${e.toString(16).toUpperCase().padStart(4,"0")}]`;case"corrupted":default:return""}}function Y0(e,i="corrupted"){return e===10?{output:`
`,isInvalid:!1}:e===13?{output:"\r",isInvalid:!1}:e===9?{output:"	",isInvalid:!1}:e===8?{output:"\b",isInvalid:!1}:e<32?{output:eu(e,i),isInvalid:!0}:e===127||e>=128&&e<=159?{output:eu(e,i),isInvalid:!0}:e>1114111||e>=55296&&e<=57343?{output:eu(e,i),isInvalid:!0}:{output:String.fromCodePoint(e),isInvalid:!1}}const j0=[{value:"corrupted",label:" Corrupted"},{value:"code",label:"[CTRL] Code"},{value:"dec",label:"Dec"},{value:"hex",label:"Hex"},{value:"oct",label:"Oct"},{value:"bin",label:"Bin"},{value:"escaped",label:"\\x Escaped"},{value:"named",label:"[NUL] Named"}],I0=[{value:"keypress",label:"Key Press"},{value:"getchar",label:"getchar()"}];function F0(e,i){const n=oe.useRef();oe.useEffect(()=>{n.current=e},[e]),oe.useEffect(()=>{function a(){n.current&&n.current()}if(i!==null){const h=setInterval(a,i);return()=>clearInterval(h)}},[i])}function X0({bfCode:e,onCodeChange:i,disabled:n}){return Q.jsxs("div",{className:"panel code-editor",children:[Q.jsx("div",{className:"panel-header",children:"Code Editor"}),Q.jsx("textarea",{className:"code-textarea",placeholder:"Enter Brainfuck code here...",value:e,onChange:a=>i(a.target.value),disabled:n,spellCheck:!1})]})}function mg(e,i,n,a){const h=parseInt(e,10);return isNaN(h)?a:Math.max(i,Math.min(n,h))}function G0({isBFRunning:e,isBFPaused:i,onRunStop:n,onContinuePause:a,onStepOnce:h,onReset:c,codeExecIntervalMS:f,setCodeExecIntervalMS:_,bfMemorySize:g,setBFMemorySize:d,maxMemorySize:p,inputMode:S,setInputMode:E,displayMode:k,setDisplayMode:x,executionCount:C}){return Q.jsxs("div",{className:"panel execution-controls",children:[Q.jsxs("div",{className:"controls-row controls-buttons",children:[Q.jsx("button",{onClick:n,className:e?"btn-danger":"btn-primary",children:e?" Stop":" Run"}),Q.jsx("button",{onClick:a,disabled:!e,className:i?"btn-success":"btn-warning",children:i?" Continue":" Pause"}),Q.jsx("button",{onClick:h,className:"btn-secondary",children:" Step"}),Q.jsx("button",{onClick:c,disabled:!i&&e,className:"btn-secondary",children:" Reset"}),Q.jsxs("span",{className:"exec-counter",title:"Execution Count",children:["Steps: ",C]})]}),Q.jsxs("div",{className:"controls-row controls-settings",children:[Q.jsxs("label",{className:"control-group",children:[Q.jsx("span",{className:"control-label",children:"Interval (ms)"}),Q.jsx("input",{type:"number",className:"control-input",value:f,min:1,max:1e4,onChange:T=>_(T.target.value),onBlur:T=>_(mg(T.target.value,1,1e4,10))})]}),Q.jsxs("label",{className:"control-group",children:[Q.jsx("span",{className:"control-label",children:"Memory Size"}),Q.jsx("input",{type:"number",className:"control-input",value:g,min:1,max:p,disabled:e,onChange:T=>d(T.target.value),onBlur:T=>d(mg(T.target.value,1,p,3e3))})]}),Q.jsxs("label",{className:"control-group",children:[Q.jsx("span",{className:"control-label",children:"Input Mode"}),Q.jsx("select",{className:"control-select",value:S,onChange:T=>E(T.target.value),disabled:e,children:I0.map(T=>Q.jsx("option",{value:T.value,children:T.label},T.value))})]}),Q.jsxs("label",{className:"control-group",children:[Q.jsx("span",{className:"control-label",children:"Display Mode"}),Q.jsx("select",{className:"control-select",value:k,onChange:T=>x(T.target.value),disabled:e,children:j0.map(T=>Q.jsx("option",{value:T.value,children:T.label},T.value))})]})]})]})}function $0({bfExecuter:e,cIndex:i,strippedBFCode:n}){const a=oe.useMemo(()=>{const f=(e==null?void 0:e.BFCode)||"",_=[];let g=0;for(const d of f)d==="["?(_.push(g),g++):(d==="]"&&g--,_.push(g));return _},[n]),h=["yellow","magenta","cyan"];function c(f){if(!e)return{};const _={},g=e.BFCode[f],d=e.LoopPairs,p=e.LeftOutLoops;return(g==="["||g==="]")&&(_.color=h[a[f]%h.length]),d[i]===f&&(_.border="1px solid white"),p.includes(f)&&(_.backgroundColor="red",_.color="white"),f===i&&(_.backgroundColor="yellow",_.color="black"),_}return Q.jsxs("div",{className:"panel code-viewer",children:[Q.jsx("div",{className:"panel-header",children:"Code Viewer"}),Q.jsx("div",{className:"code-viewer-content",children:e==null?void 0:e.BFCode.split("").map((f,_)=>Q.jsx("span",{style:c(_),className:"code-char",children:f},_))})]})}function pg(e,i,n,a){const h=parseInt(e,10);return isNaN(h)?a:Math.max(i,Math.min(n,h))}function Z0({bfMemoryChunk:e,memPage:i,setMemPage:n,bfMemoryChunkSize:a,setBFMemoryChunkSize:h,memPtr:c,memSize:f,isBFRunning:_}){const g=Math.max(0,Math.ceil(f/a)-1);function d(){n(S=>Math.max(0,S-1))}function p(){n(S=>Math.min(g,S+1))}return Q.jsxs("div",{className:"panel memory-viewer",children:[Q.jsx("div",{className:"panel-header",children:"Memory"}),Q.jsxs("div",{className:"memory-controls",children:[Q.jsxs("label",{className:"control-group",children:[Q.jsx("span",{className:"control-label",children:"Chunk"}),Q.jsx("input",{type:"number",className:"control-input control-input-sm",value:a,min:1,max:500,disabled:_,onChange:S=>h(S.target.value),onBlur:S=>h(pg(S.target.value,1,500,30))})]}),Q.jsxs("div",{className:"memory-pagination",children:[Q.jsx("button",{onClick:d,disabled:i<=0,className:"btn-sm",children:""}),Q.jsx("input",{type:"number",className:"control-input control-input-sm",value:i,min:0,max:g,onChange:S=>n(S.target.value),onBlur:S=>n(pg(S.target.value,0,g,0))}),Q.jsxs("span",{className:"page-info",children:["/ ",g]}),Q.jsx("button",{onClick:p,disabled:i>=g,className:"btn-sm",children:""})]})]}),Q.jsx("div",{className:"memory-grid",children:e.map((S,E)=>{const k=E+i*a,x=k===c;return Q.jsx("div",{className:`memory-cell ${x?"active":""}`,title:`[${k}]`,children:S},E)})})]})}function bu(){return bu=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bu.apply(null,arguments)}function Sg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cu(e,i){return Cu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Cu(e,i)}function Q0(e,i){e.prototype=Object.create(i.prototype),e.prototype.constructor=e,Cu(e,i)}var yg=Number.isNaN||function(i){return typeof i=="number"&&i!==i};function J0(e,i){return!!(e===i||yg(e)&&yg(i))}function ey(e,i){if(e.length!==i.length)return!1;for(var n=0;n<e.length;n++)if(!J0(e[n],i[n]))return!1;return!0}function tu(e,i){i===void 0&&(i=ey);var n,a=[],h,c=!1;function f(){for(var _=[],g=0;g<arguments.length;g++)_[g]=arguments[g];return c&&n===this&&i(_,a)||(h=e.apply(this,_),c=!0,n=this,a=_),h}return f}var ty=typeof performance=="object"&&typeof performance.now=="function",bg=ty?function(){return performance.now()}:function(){return Date.now()};function Cg(e){cancelAnimationFrame(e.id)}function iy(e,i){var n=bg();function a(){bg()-n>=i?e.call(null):h.id=requestAnimationFrame(a)}var h={id:requestAnimationFrame(a)};return h}var iu=-1;function wg(e){if(e===void 0&&(e=!1),iu===-1||e){var i=document.createElement("div"),n=i.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(i),iu=i.offsetWidth-i.clientWidth,document.body.removeChild(i)}return iu}var sn=null;function Eg(e){if(e===void 0&&(e=!1),sn===null||e){var i=document.createElement("div"),n=i.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var a=document.createElement("div"),h=a.style;return h.width="100px",h.height="100px",i.appendChild(a),document.body.appendChild(i),i.scrollLeft>0?sn="positive-descending":(i.scrollLeft=1,i.scrollLeft===0?sn="negative":sn="positive-ascending"),document.body.removeChild(i),sn}return sn}var sy=150,ry=function(i,n){return i};function ny(e){var i,n=e.getItemOffset,a=e.getEstimatedTotalSize,h=e.getItemSize,c=e.getOffsetForIndexAndAlignment,f=e.getStartIndexForOffset,_=e.getStopIndexForStartIndex,g=e.initInstanceProps,d=e.shouldResetStyleCacheOnItemSizeChange,p=e.validateProps;return i=function(S){Q0(E,S);function E(x){var C;return C=S.call(this,x)||this,C._instanceProps=g(C.props,Sg(C)),C._outerRef=void 0,C._resetIsScrollingTimeoutId=null,C.state={instance:Sg(C),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof C.props.initialScrollOffset=="number"?C.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},C._callOnItemsRendered=void 0,C._callOnItemsRendered=tu(function(T,z,ee,F){return C.props.onItemsRendered({overscanStartIndex:T,overscanStopIndex:z,visibleStartIndex:ee,visibleStopIndex:F})}),C._callOnScroll=void 0,C._callOnScroll=tu(function(T,z,ee){return C.props.onScroll({scrollDirection:T,scrollOffset:z,scrollUpdateWasRequested:ee})}),C._getItemStyle=void 0,C._getItemStyle=function(T){var z=C.props,ee=z.direction,F=z.itemSize,j=z.layout,K=C._getItemStyleCache(d&&F,d&&j,d&&ee),te;if(K.hasOwnProperty(T))te=K[T];else{var ue=n(C.props,T,C._instanceProps),pe=h(C.props,T,C._instanceProps),Te=ee==="horizontal"||j==="horizontal",lt=ee==="rtl",ye=Te?ue:0;K[T]=te={position:"absolute",left:lt?void 0:ye,right:lt?ye:void 0,top:Te?0:ue,height:Te?"100%":pe,width:Te?pe:"100%"}}return te},C._getItemStyleCache=void 0,C._getItemStyleCache=tu(function(T,z,ee){return{}}),C._onScrollHorizontal=function(T){var z=T.currentTarget,ee=z.clientWidth,F=z.scrollLeft,j=z.scrollWidth;C.setState(function(K){if(K.scrollOffset===F)return null;var te=C.props.direction,ue=F;if(te==="rtl")switch(Eg()){case"negative":ue=-F;break;case"positive-descending":ue=j-ee-F;break}return ue=Math.max(0,Math.min(ue,j-ee)),{isScrolling:!0,scrollDirection:K.scrollOffset<ue?"forward":"backward",scrollOffset:ue,scrollUpdateWasRequested:!1}},C._resetIsScrollingDebounced)},C._onScrollVertical=function(T){var z=T.currentTarget,ee=z.clientHeight,F=z.scrollHeight,j=z.scrollTop;C.setState(function(K){if(K.scrollOffset===j)return null;var te=Math.max(0,Math.min(j,F-ee));return{isScrolling:!0,scrollDirection:K.scrollOffset<te?"forward":"backward",scrollOffset:te,scrollUpdateWasRequested:!1}},C._resetIsScrollingDebounced)},C._outerRefSetter=function(T){var z=C.props.outerRef;C._outerRef=T,typeof z=="function"?z(T):z!=null&&typeof z=="object"&&z.hasOwnProperty("current")&&(z.current=T)},C._resetIsScrollingDebounced=function(){C._resetIsScrollingTimeoutId!==null&&Cg(C._resetIsScrollingTimeoutId),C._resetIsScrollingTimeoutId=iy(C._resetIsScrolling,sy)},C._resetIsScrolling=function(){C._resetIsScrollingTimeoutId=null,C.setState({isScrolling:!1},function(){C._getItemStyleCache(-1,null)})},C}E.getDerivedStateFromProps=function(C,T){return ly(C,T),p(C),null};var k=E.prototype;return k.scrollTo=function(C){C=Math.max(0,C),this.setState(function(T){return T.scrollOffset===C?null:{scrollDirection:T.scrollOffset<C?"forward":"backward",scrollOffset:C,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},k.scrollToItem=function(C,T){T===void 0&&(T="auto");var z=this.props,ee=z.itemCount,F=z.layout,j=this.state.scrollOffset;C=Math.max(0,Math.min(C,ee-1));var K=0;if(this._outerRef){var te=this._outerRef;F==="vertical"?K=te.scrollWidth>te.clientWidth?wg():0:K=te.scrollHeight>te.clientHeight?wg():0}this.scrollTo(c(this.props,C,T,j,this._instanceProps,K))},k.componentDidMount=function(){var C=this.props,T=C.direction,z=C.initialScrollOffset,ee=C.layout;if(typeof z=="number"&&this._outerRef!=null){var F=this._outerRef;T==="horizontal"||ee==="horizontal"?F.scrollLeft=z:F.scrollTop=z}this._callPropsCallbacks()},k.componentDidUpdate=function(){var C=this.props,T=C.direction,z=C.layout,ee=this.state,F=ee.scrollOffset,j=ee.scrollUpdateWasRequested;if(j&&this._outerRef!=null){var K=this._outerRef;if(T==="horizontal"||z==="horizontal")if(T==="rtl")switch(Eg()){case"negative":K.scrollLeft=-F;break;case"positive-ascending":K.scrollLeft=F;break;default:var te=K.clientWidth,ue=K.scrollWidth;K.scrollLeft=ue-te-F;break}else K.scrollLeft=F;else K.scrollTop=F}this._callPropsCallbacks()},k.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&Cg(this._resetIsScrollingTimeoutId)},k.render=function(){var C=this.props,T=C.children,z=C.className,ee=C.direction,F=C.height,j=C.innerRef,K=C.innerElementType,te=C.innerTagName,ue=C.itemCount,pe=C.itemData,Te=C.itemKey,lt=Te===void 0?ry:Te,ye=C.layout,G=C.outerElementType,W=C.outerTagName,Z=C.style,I=C.useIsScrolling,M=C.width,H=this.state.isScrolling,L=ee==="horizontal"||ye==="horizontal",he=L?this._onScrollHorizontal:this._onScrollVertical,b=this._getRangeToRender(),U=b[0],$=b[1],Y=[];if(ue>0)for(var J=U;J<=$;J++)Y.push(oe.createElement(T,{data:pe,key:lt(J,pe),index:J,isScrolling:I?H:void 0,style:this._getItemStyle(J)}));var fe=a(this.props,this._instanceProps);return oe.createElement(G||W||"div",{className:z,onScroll:he,ref:this._outerRefSetter,style:bu({position:"relative",height:F,width:M,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:ee},Z)},oe.createElement(K||te||"div",{children:Y,ref:j,style:{height:L?"100%":fe,pointerEvents:H?"none":void 0,width:L?fe:"100%"}}))},k._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var C=this.props.itemCount;if(C>0){var T=this._getRangeToRender(),z=T[0],ee=T[1],F=T[2],j=T[3];this._callOnItemsRendered(z,ee,F,j)}}if(typeof this.props.onScroll=="function"){var K=this.state,te=K.scrollDirection,ue=K.scrollOffset,pe=K.scrollUpdateWasRequested;this._callOnScroll(te,ue,pe)}},k._getRangeToRender=function(){var C=this.props,T=C.itemCount,z=C.overscanCount,ee=this.state,F=ee.isScrolling,j=ee.scrollDirection,K=ee.scrollOffset;if(T===0)return[0,0,0,0];var te=f(this.props,K,this._instanceProps),ue=_(this.props,te,K,this._instanceProps),pe=!F||j==="backward"?Math.max(1,z):1,Te=!F||j==="forward"?Math.max(1,z):1;return[Math.max(0,te-pe),Math.max(0,Math.min(T-1,ue+Te)),te,ue]},E}(oe.PureComponent),i.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},i}var ly=function(i,n){i.children,i.direction,i.height,i.layout,i.innerTagName,i.outerTagName,i.width,n.instance},ay=ny({getItemOffset:function(i,n){var a=i.itemSize;return n*a},getItemSize:function(i,n){var a=i.itemSize;return a},getEstimatedTotalSize:function(i){var n=i.itemCount,a=i.itemSize;return a*n},getOffsetForIndexAndAlignment:function(i,n,a,h,c,f){var _=i.direction,g=i.height,d=i.itemCount,p=i.itemSize,S=i.layout,E=i.width,k=_==="horizontal"||S==="horizontal",x=k?E:g,C=Math.max(0,d*p-x),T=Math.min(C,n*p),z=Math.max(0,n*p-x+p+f);switch(a==="smart"&&(h>=z-x&&h<=T+x?a="auto":a="center"),a){case"start":return T;case"end":return z;case"center":{var ee=Math.round(z+(T-z)/2);return ee<Math.ceil(x/2)?0:ee>C+Math.floor(x/2)?C:ee}case"auto":default:return h>=z&&h<=T?h:h<z?z:T}},getStartIndexForOffset:function(i,n){var a=i.itemCount,h=i.itemSize;return Math.max(0,Math.min(a-1,Math.floor(n/h)))},getStopIndexForStartIndex:function(i,n,a){var h=i.direction,c=i.height,f=i.itemCount,_=i.itemSize,g=i.layout,d=i.width,p=h==="horizontal"||g==="horizontal",S=n*_,E=p?d:c,k=Math.ceil((E+a-S)/_);return Math.max(0,Math.min(f-1,n+k-1))},initInstanceProps:function(i){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(i){i.itemSize}});function oy({index:e,style:i,data:n}){const a=n[e];return Q.jsxs("div",{style:{...i,color:a.textColor},className:"log-row",children:[Q.jsx("span",{className:"log-timestamp",children:a.timestamp.toTimeString().slice(0,8)}),Q.jsx("span",{className:"log-type",children:a.type}),Q.jsx("span",{className:"log-text",children:a.text})]})}function hy({logTexts:e,logShowLog:i,setLogShowLog:n,logShowWarning:a,setLogShowWarning:h,logShowError:c,setLogShowError:f}){const _=oe.useRef(null),g=oe.useRef(null),d=oe.useMemo(()=>e.filter(p=>!(p.type==="Log"&&!i||p.type==="Warning"&&!a||p.type==="Error"&&!c)),[e,i,a,c]);return oe.useEffect(()=>{_.current&&d.length>0&&_.current.scrollToItem(d.length-1)},[d.length]),Q.jsxs("div",{className:"panel log-viewer",children:[Q.jsxs("div",{className:"panel-header",children:["Logs",Q.jsxs("span",{className:"log-count",children:["(",d.length,")"]})]}),Q.jsxs("div",{className:"log-filters",children:[Q.jsxs("label",{className:"log-filter-label",children:[Q.jsx("input",{type:"checkbox",checked:i,onChange:p=>n(p.target.checked)}),Q.jsx("span",{style:{color:"white"},children:"Log"})]}),Q.jsxs("label",{className:"log-filter-label",children:[Q.jsx("input",{type:"checkbox",checked:a,onChange:p=>h(p.target.checked)}),Q.jsx("span",{style:{color:"yellow"},children:"Warn"})]}),Q.jsxs("label",{className:"log-filter-label",children:[Q.jsx("input",{type:"checkbox",checked:c,onChange:p=>f(p.target.checked)}),Q.jsx("span",{style:{color:"#ff6b6b"},children:"Error"})]})]}),Q.jsx("div",{className:"log-list-container",ref:g,children:Q.jsx(ay,{ref:_,height:300,width:"100%",itemCount:d.length,itemSize:24,itemData:d,children:oy})})]})}/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var Mm=Object.defineProperty,cy=Object.getOwnPropertyDescriptor,uy=(e,i)=>{for(var n in i)Mm(e,n,{get:i[n],enumerable:!0})},tt=(e,i,n,a)=>{for(var h=a>1?void 0:a?cy(i,n):i,c=e.length-1,f;c>=0;c--)(f=e[c])&&(h=(a?f(i,n,h):f(h))||h);return a&&h&&Mm(i,n,h),h},re=(e,i)=>(n,a)=>i(n,a,e),xg="Terminal input",wu={get:()=>xg,set:e=>xg=e},Mg="Too much output to announce, navigate to rows manually to read",Eu={get:()=>Mg,set:e=>Mg=e};function fy(e){return e.replace(/\r?\n/g,"\r")}function dy(e,i){return i?"\x1B[200~"+e+"\x1B[201~":e}function _y(e,i){e.clipboardData&&e.clipboardData.setData("text/plain",i.selectionText),e.preventDefault()}function vy(e,i,n,a){if(e.stopPropagation(),e.clipboardData){let h=e.clipboardData.getData("text/plain");Dm(h,i,n,a)}}function Dm(e,i,n,a){e=fy(e),e=dy(e,n.decPrivateModes.bracketedPasteMode&&a.rawOptions.ignoreBracketedPasteMode!==!0),n.triggerDataEvent(e,!0),i.value=""}function km(e,i,n){let a=n.getBoundingClientRect(),h=e.clientX-a.left-10,c=e.clientY-a.top-10;i.style.width="20px",i.style.height="20px",i.style.left=`${h}px`,i.style.top=`${c}px`,i.style.zIndex="1000",i.focus()}function Dg(e,i,n,a,h){km(e,i,n),h&&a.rightClickSelect(e),i.value=a.selectionText,i.select()}function Us(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function Mo(e,i=0,n=e.length){let a="";for(let h=i;h<n;++h){let c=e[h];c>65535?(c-=65536,a+=String.fromCharCode((c>>10)+55296)+String.fromCharCode(c%1024+56320)):a+=String.fromCharCode(c)}return a}var gy=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,i){let n=e.length;if(!n)return 0;let a=0,h=0;if(this._interim){let c=e.charCodeAt(h++);56320<=c&&c<=57343?i[a++]=(this._interim-55296)*1024+c-56320+65536:(i[a++]=this._interim,i[a++]=c),this._interim=0}for(let c=h;c<n;++c){let f=e.charCodeAt(c);if(55296<=f&&f<=56319){if(++c>=n)return this._interim=f,a;let _=e.charCodeAt(c);56320<=_&&_<=57343?i[a++]=(f-55296)*1024+_-56320+65536:(i[a++]=f,i[a++]=_);continue}f!==65279&&(i[a++]=f)}return a}},my=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,i){let n=e.length;if(!n)return 0;let a=0,h,c,f,_,g=0,d=0;if(this.interim[0]){let E=!1,k=this.interim[0];k&=(k&224)===192?31:(k&240)===224?15:7;let x=0,C;for(;(C=this.interim[++x]&63)&&x<4;)k<<=6,k|=C;let T=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,z=T-x;for(;d<z;){if(d>=n)return 0;if(C=e[d++],(C&192)!==128){d--,E=!0;break}else this.interim[x++]=C,k<<=6,k|=C&63}E||(T===2?k<128?d--:i[a++]=k:T===3?k<2048||k>=55296&&k<=57343||k===65279||(i[a++]=k):k<65536||k>1114111||(i[a++]=k)),this.interim.fill(0)}let p=n-4,S=d;for(;S<n;){for(;S<p&&!((h=e[S])&128)&&!((c=e[S+1])&128)&&!((f=e[S+2])&128)&&!((_=e[S+3])&128);)i[a++]=h,i[a++]=c,i[a++]=f,i[a++]=_,S+=4;if(h=e[S++],h<128)i[a++]=h;else if((h&224)===192){if(S>=n)return this.interim[0]=h,a;if(c=e[S++],(c&192)!==128){S--;continue}if(g=(h&31)<<6|c&63,g<128){S--;continue}i[a++]=g}else if((h&240)===224){if(S>=n)return this.interim[0]=h,a;if(c=e[S++],(c&192)!==128){S--;continue}if(S>=n)return this.interim[0]=h,this.interim[1]=c,a;if(f=e[S++],(f&192)!==128){S--;continue}if(g=(h&15)<<12|(c&63)<<6|f&63,g<2048||g>=55296&&g<=57343||g===65279)continue;i[a++]=g}else if((h&248)===240){if(S>=n)return this.interim[0]=h,a;if(c=e[S++],(c&192)!==128){S--;continue}if(S>=n)return this.interim[0]=h,this.interim[1]=c,a;if(f=e[S++],(f&192)!==128){S--;continue}if(S>=n)return this.interim[0]=h,this.interim[1]=c,this.interim[2]=f,a;if(_=e[S++],(_&192)!==128){S--;continue}if(g=(h&7)<<18|(c&63)<<12|(f&63)<<6|_&63,g<65536||g>1114111)continue;i[a++]=g}}return a}},Tm="",Ps=" ",Pl=class Rm{constructor(){this.fg=0,this.bg=0,this.extended=new So}static toColorRGB(i){return[i>>>16&255,i>>>8&255,i&255]}static fromColorRGB(i){return(i[0]&255)<<16|(i[1]&255)<<8|i[2]&255}clone(){let i=new Rm;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},So=class Bm{constructor(i=0,n=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=n}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(i){this._ext&=-67108864,this._ext|=i&67108863}get urlId(){return this._urlId}set urlId(i){this._urlId=i}get underlineVariantOffset(){let i=(this._ext&3758096384)>>29;return i<0?i^4294967288:i}set underlineVariantOffset(i){this._ext&=536870911,this._ext|=i<<29&3758096384}clone(){return new Bm(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},Di=class Am extends Pl{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new So,this.combinedData=""}static fromCharData(i){let n=new Am;return n.setFromCharData(i),n}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?Us(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(i){this.fg=i[0],this.bg=0;let n=!1;if(i[1].length>2)n=!0;else if(i[1].length===2){let a=i[1].charCodeAt(0);if(55296<=a&&a<=56319){let h=i[1].charCodeAt(1);56320<=h&&h<=57343?this.content=(a-55296)*1024+h-56320+65536|i[2]<<22:n=!0}else n=!0}else this.content=i[1].charCodeAt(0)|i[2]<<22;n&&(this.combinedData=i[1],this.content=2097152|i[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},kg="di$target",xu="di$dependencies",su=new Map;function py(e){return e[xu]||[]}function kt(e){if(su.has(e))return su.get(e);let i=function(n,a,h){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");Sy(i,n,h)};return i._id=e,su.set(e,i),i}function Sy(e,i,n){i[kg]===i?i[xu].push({id:e,index:n}):(i[xu]=[{id:e,index:n}],i[kg]=i)}var Yt=kt("BufferService"),Om=kt("CoreMouseService"),vr=kt("CoreService"),yy=kt("CharsetService"),hf=kt("InstantiationService"),Lm=kt("LogService"),jt=kt("OptionsService"),zm=kt("OscLinkService"),by=kt("UnicodeService"),ql=kt("DecorationService"),Mu=class{constructor(e,i,n){this._bufferService=e,this._optionsService=i,this._oscLinkService=n}provideLinks(e,i){var p;let n=this._bufferService.buffer.lines.get(e-1);if(!n){i(void 0);return}let a=[],h=this._optionsService.rawOptions.linkHandler,c=new Di,f=n.getTrimmedLength(),_=-1,g=-1,d=!1;for(let S=0;S<f;S++)if(!(g===-1&&!n.hasContent(S))){if(n.loadCell(S,c),c.hasExtendedAttrs()&&c.extended.urlId)if(g===-1){g=S,_=c.extended.urlId;continue}else d=c.extended.urlId!==_;else g!==-1&&(d=!0);if(d||g!==-1&&S===f-1){let E=(p=this._oscLinkService.getLinkData(_))==null?void 0:p.uri;if(E){let k={start:{x:g+1,y:e},end:{x:S+(!d&&S===f-1?1:0),y:e}},x=!1;if(!(h!=null&&h.allowNonHttpProtocols))try{let C=new URL(E);["http:","https:"].includes(C.protocol)||(x=!0)}catch{x=!0}x||a.push({text:E,range:k,activate:(C,T)=>h?h.activate(C,T,k):Cy(C,T),hover:(C,T)=>{var z;return(z=h==null?void 0:h.hover)==null?void 0:z.call(h,C,T,k)},leave:(C,T)=>{var z;return(z=h==null?void 0:h.leave)==null?void 0:z.call(h,C,T,k)}})}d=!1,c.hasExtendedAttrs()&&c.extended.urlId?(g=S,_=c.extended.urlId):(g=-1,_=-1)}}i(a)}};Mu=tt([re(0,Yt),re(1,jt),re(2,zm)],Mu);function Cy(e,i){if(confirm(`Do you want to navigate to ${i}?

WARNING: This link could potentially be dangerous`)){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=i}else console.warn("Opening link blocked as opener could not be cleared")}}var Do=kt("CharSizeService"),os=kt("CoreBrowserService"),cf=kt("MouseService"),hs=kt("RenderService"),wy=kt("SelectionService"),Nm=kt("CharacterJoinerService"),hn=kt("ThemeService"),Hm=kt("LinkProviderService"),Ey=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Tg.isErrorNoTelemetry(e)?new Tg(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(i=>{i(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},xy=new Ey;function fo(e){My(e)||xy.onUnexpectedError(e)}var Du="Canceled";function My(e){return e instanceof Dy?!0:e instanceof Error&&e.name===Du&&e.message===Du}var Dy=class extends Error{constructor(){super(Du),this.name=this.message}};function ky(e){return new Error(`Illegal argument: ${e}`)}var Tg=class ku extends Error{constructor(i){super(i),this.name="CodeExpectedError"}static fromError(i){if(i instanceof ku)return i;let n=new ku;return n.message=i.message,n.stack=i.stack,n}static isErrorNoTelemetry(i){return i.name==="CodeExpectedError"}},Tu=class Um extends Error{constructor(i){super(i||"An unexpected bug occurred."),Object.setPrototypeOf(this,Um.prototype)}};function ci(e,i=0){return e[e.length-(1+i)]}var Ty;(e=>{function i(c){return c<0}e.isLessThan=i;function n(c){return c<=0}e.isLessThanOrEqual=n;function a(c){return c>0}e.isGreaterThan=a;function h(c){return c===0}e.isNeitherLessOrGreaterThan=h,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(Ty||(Ty={}));function Ry(e,i){let n=this,a=!1,h;return function(){return a||(a=!0,i||(h=e.apply(n,arguments))),h}}var Pm;(e=>{function i(j){return j&&typeof j=="object"&&typeof j[Symbol.iterator]=="function"}e.is=i;let n=Object.freeze([]);function a(){return n}e.empty=a;function*h(j){yield j}e.single=h;function c(j){return i(j)?j:h(j)}e.wrap=c;function f(j){return j||n}e.from=f;function*_(j){for(let K=j.length-1;K>=0;K--)yield j[K]}e.reverse=_;function g(j){return!j||j[Symbol.iterator]().next().done===!0}e.isEmpty=g;function d(j){return j[Symbol.iterator]().next().value}e.first=d;function p(j,K){let te=0;for(let ue of j)if(K(ue,te++))return!0;return!1}e.some=p;function S(j,K){for(let te of j)if(K(te))return te}e.find=S;function*E(j,K){for(let te of j)K(te)&&(yield te)}e.filter=E;function*k(j,K){let te=0;for(let ue of j)yield K(ue,te++)}e.map=k;function*x(j,K){let te=0;for(let ue of j)yield*K(ue,te++)}e.flatMap=x;function*C(...j){for(let K of j)yield*K}e.concat=C;function T(j,K,te){let ue=te;for(let pe of j)ue=K(ue,pe);return ue}e.reduce=T;function*z(j,K,te=j.length){for(K<0&&(K+=j.length),te<0?te+=j.length:te>j.length&&(te=j.length);K<te;K++)yield j[K]}e.slice=z;function ee(j,K=Number.POSITIVE_INFINITY){let te=[];if(K===0)return[te,j];let ue=j[Symbol.iterator]();for(let pe=0;pe<K;pe++){let Te=ue.next();if(Te.done)return[te,e.empty()];te.push(Te.value)}return[te,{[Symbol.iterator](){return ue}}]}e.consume=ee;async function F(j){let K=[];for await(let te of j)K.push(te);return Promise.resolve(K)}e.asyncToArray=F})(Pm||(Pm={}));function dr(e){if(Pm.is(e)){let i=[];for(let n of e)if(n)try{n.dispose()}catch(a){i.push(a)}if(i.length===1)throw i[0];if(i.length>1)throw new AggregateError(i,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function By(...e){return Xe(()=>dr(e))}function Xe(e){return{dispose:Ry(()=>{e()})}}var qm=class Vm{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{dr(this._toDispose)}finally{this._toDispose.clear()}}add(i){if(!i)return i;if(i===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Vm.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(i),i}delete(i){if(i){if(i===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(i),i.dispose()}}deleteAndLeak(i){i&&this._toDispose.has(i)&&(this._toDispose.delete(i),void 0)}};qm.DISABLE_DISPOSED_WARNING=!1;var qs=qm,we=class{constructor(){this._store=new qs,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};we.None=Object.freeze({dispose(){}});var on=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var i;this._isDisposed||e===this._value||((i=this._value)==null||i.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},as=typeof window=="object"?window:globalThis,Ru=class Bu{constructor(i){this.element=i,this.next=Bu.Undefined,this.prev=Bu.Undefined}};Ru.Undefined=new Ru(void 0);var $e=Ru,Rg=class{constructor(){this._first=$e.Undefined,this._last=$e.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===$e.Undefined}clear(){let e=this._first;for(;e!==$e.Undefined;){let i=e.next;e.prev=$e.Undefined,e.next=$e.Undefined,e=i}this._first=$e.Undefined,this._last=$e.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,i){let n=new $e(e);if(this._first===$e.Undefined)this._first=n,this._last=n;else if(i){let h=this._last;this._last=n,n.prev=h,h.next=n}else{let h=this._first;this._first=n,n.next=h,h.prev=n}this._size+=1;let a=!1;return()=>{a||(a=!0,this._remove(n))}}shift(){if(this._first!==$e.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==$e.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==$e.Undefined&&e.next!==$e.Undefined){let i=e.prev;i.next=e.next,e.next.prev=i}else e.prev===$e.Undefined&&e.next===$e.Undefined?(this._first=$e.Undefined,this._last=$e.Undefined):e.next===$e.Undefined?(this._last=this._last.prev,this._last.next=$e.Undefined):e.prev===$e.Undefined&&(this._first=this._first.next,this._first.prev=$e.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==$e.Undefined;)yield e.element,e=e.next}},Ay=globalThis.performance&&typeof globalThis.performance.now=="function",Oy=class Wm{static create(i){return new Wm(i)}constructor(i){this._now=Ay&&i===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},Lt;(e=>{e.None=()=>we.None;function i(G,W){return S(G,()=>{},0,void 0,!0,void 0,W)}e.defer=i;function n(G){return(W,Z=null,I)=>{let M=!1,H;return H=G(L=>{if(!M)return H?H.dispose():M=!0,W.call(Z,L)},null,I),M&&H.dispose(),H}}e.once=n;function a(G,W,Z){return d((I,M=null,H)=>G(L=>I.call(M,W(L)),null,H),Z)}e.map=a;function h(G,W,Z){return d((I,M=null,H)=>G(L=>{W(L),I.call(M,L)},null,H),Z)}e.forEach=h;function c(G,W,Z){return d((I,M=null,H)=>G(L=>W(L)&&I.call(M,L),null,H),Z)}e.filter=c;function f(G){return G}e.signal=f;function _(...G){return(W,Z=null,I)=>{let M=By(...G.map(H=>H(L=>W.call(Z,L))));return p(M,I)}}e.any=_;function g(G,W,Z,I){let M=Z;return a(G,H=>(M=W(M,H),M),I)}e.reduce=g;function d(G,W){let Z,I={onWillAddFirstListener(){Z=G(M.fire,M)},onDidRemoveLastListener(){Z==null||Z.dispose()}},M=new X(I);return W==null||W.add(M),M.event}function p(G,W){return W instanceof Array?W.push(G):W&&W.add(G),G}function S(G,W,Z=100,I=!1,M=!1,H,L){let he,b,U,$=0,Y,J={leakWarningThreshold:H,onWillAddFirstListener(){he=G(le=>{$++,b=W(b,le),I&&!U&&(fe.fire(b),b=void 0),Y=()=>{let Ie=b;b=void 0,U=void 0,(!I||$>1)&&fe.fire(Ie),$=0},typeof Z=="number"?(clearTimeout(U),U=setTimeout(Y,Z)):U===void 0&&(U=0,queueMicrotask(Y))})},onWillRemoveListener(){M&&$>0&&(Y==null||Y())},onDidRemoveLastListener(){Y=void 0,he.dispose()}},fe=new X(J);return L==null||L.add(fe),fe.event}e.debounce=S;function E(G,W=0,Z){return e.debounce(G,(I,M)=>I?(I.push(M),I):[M],W,void 0,!0,void 0,Z)}e.accumulate=E;function k(G,W=(I,M)=>I===M,Z){let I=!0,M;return c(G,H=>{let L=I||!W(H,M);return I=!1,M=H,L},Z)}e.latch=k;function x(G,W,Z){return[e.filter(G,W,Z),e.filter(G,I=>!W(I),Z)]}e.split=x;function C(G,W=!1,Z=[],I){let M=Z.slice(),H=G(b=>{M?M.push(b):he.fire(b)});I&&I.add(H);let L=()=>{M==null||M.forEach(b=>he.fire(b)),M=null},he=new X({onWillAddFirstListener(){H||(H=G(b=>he.fire(b)),I&&I.add(H))},onDidAddFirstListener(){M&&(W?setTimeout(L):L())},onDidRemoveLastListener(){H&&H.dispose(),H=null}});return I&&I.add(he),he.event}e.buffer=C;function T(G,W){return(Z,I,M)=>{let H=W(new ee);return G(function(L){let he=H.evaluate(L);he!==z&&Z.call(I,he)},void 0,M)}}e.chain=T;let z=Symbol("HaltChainable");class ee{constructor(){this.steps=[]}map(W){return this.steps.push(W),this}forEach(W){return this.steps.push(Z=>(W(Z),Z)),this}filter(W){return this.steps.push(Z=>W(Z)?Z:z),this}reduce(W,Z){let I=Z;return this.steps.push(M=>(I=W(I,M),I)),this}latch(W=(Z,I)=>Z===I){let Z=!0,I;return this.steps.push(M=>{let H=Z||!W(M,I);return Z=!1,I=M,H?M:z}),this}evaluate(W){for(let Z of this.steps)if(W=Z(W),W===z)break;return W}}function F(G,W,Z=I=>I){let I=(...he)=>L.fire(Z(...he)),M=()=>G.on(W,I),H=()=>G.removeListener(W,I),L=new X({onWillAddFirstListener:M,onDidRemoveLastListener:H});return L.event}e.fromNodeEventEmitter=F;function j(G,W,Z=I=>I){let I=(...he)=>L.fire(Z(...he)),M=()=>G.addEventListener(W,I),H=()=>G.removeEventListener(W,I),L=new X({onWillAddFirstListener:M,onDidRemoveLastListener:H});return L.event}e.fromDOMEventEmitter=j;function K(G){return new Promise(W=>n(G)(W))}e.toPromise=K;function te(G){let W=new X;return G.then(Z=>{W.fire(Z)},()=>{W.fire(void 0)}).finally(()=>{W.dispose()}),W.event}e.fromPromise=te;function ue(G,W){return G(Z=>W.fire(Z))}e.forward=ue;function pe(G,W,Z){return W(Z),G(I=>W(I))}e.runAndSubscribe=pe;class Te{constructor(W,Z){this._observable=W,this._counter=0,this._hasChanged=!1;let I={onWillAddFirstListener:()=>{W.addObserver(this)},onDidRemoveLastListener:()=>{W.removeObserver(this)}};this.emitter=new X(I),Z&&Z.add(this.emitter)}beginUpdate(W){this._counter++}handlePossibleChange(W){}handleChange(W,Z){this._hasChanged=!0}endUpdate(W){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function lt(G,W){return new Te(G,W).emitter.event}e.fromObservable=lt;function ye(G){return(W,Z,I)=>{let M=0,H=!1,L={beginUpdate(){M++},endUpdate(){M--,M===0&&(G.reportChanges(),H&&(H=!1,W.call(Z)))},handlePossibleChange(){},handleChange(){H=!0}};G.addObserver(L),G.reportChanges();let he={dispose(){G.removeObserver(L)}};return I instanceof qs?I.add(he):Array.isArray(I)&&I.push(he),he}}e.fromObservableLight=ye})(Lt||(Lt={}));var Au=class Ou{constructor(i){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${i}_${Ou._idPool++}`,Ou.all.add(this)}start(i){this._stopWatch=new Oy,this.listenerCount=i}stop(){if(this._stopWatch){let i=this._stopWatch.elapsed();this.durations.push(i),this.elapsedOverall+=i,this.invocationCount+=1,this._stopWatch=void 0}}};Au.all=new Set,Au._idPool=0;var Ly=Au,zy=-1,Km=class Ym{constructor(i,n,a=(Ym._idPool++).toString(16).padStart(3,"0")){this._errorHandler=i,this.threshold=n,this.name=a,this._warnCountdown=0}dispose(){var i;(i=this._stacks)==null||i.clear()}check(i,n){let a=this.threshold;if(a<=0||n<a)return;this._stacks||(this._stacks=new Map);let h=this._stacks.get(i.value)||0;if(this._stacks.set(i.value,h+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=a*.5;let[c,f]=this.getMostFrequentStack(),_=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${f}):`;console.warn(_),console.warn(c);let g=new Uy(_,c);this._errorHandler(g)}return()=>{let c=this._stacks.get(i.value)||0;this._stacks.set(i.value,c-1)}}getMostFrequentStack(){if(!this._stacks)return;let i,n=0;for(let[a,h]of this._stacks)(!i||n<h)&&(i=[a,h],n=h);return i}};Km._idPool=1;var Ny=Km,Hy=class jm{constructor(i){this.value=i}static create(){let i=new Error;return new jm(i.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Uy=class extends Error{constructor(e,i){super(e),this.name="ListenerLeakError",this.stack=i}},Py=class extends Error{constructor(e,i){super(e),this.name="ListenerRefusalError",this.stack=i}},qy=0,ru=class{constructor(e){this.value=e,this.id=qy++}},Vy=2,Wy,X=class{constructor(e){var i,n,a,h;this._size=0,this._options=e,this._leakageMon=(i=this._options)!=null&&i.leakWarningThreshold?new Ny((e==null?void 0:e.onListenerError)??fo,((n=this._options)==null?void 0:n.leakWarningThreshold)??zy):void 0,this._perfMon=(a=this._options)!=null&&a._profName?new Ly(this._options._profName):void 0,this._deliveryQueue=(h=this._options)==null?void 0:h.deliveryQueue}dispose(){var e,i,n,a;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(n=(i=this._options)==null?void 0:i.onDidRemoveLastListener)==null||n.call(i),(a=this._leakageMon)==null||a.dispose())}get event(){return this._event??(this._event=(e,i,n)=>{var f,_,g,d,p;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let S=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(S);let E=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],k=new Py(`${S}. HINT: Stack shows most frequent listener (${E[1]}-times)`,E[0]);return(((f=this._options)==null?void 0:f.onListenerError)||fo)(k),we.None}if(this._disposed)return we.None;i&&(e=e.bind(i));let a=new ru(e),h;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(a.stack=Hy.create(),h=this._leakageMon.check(a.stack,this._size+1)),this._listeners?this._listeners instanceof ru?(this._deliveryQueue??(this._deliveryQueue=new Ky),this._listeners=[this._listeners,a]):this._listeners.push(a):((g=(_=this._options)==null?void 0:_.onWillAddFirstListener)==null||g.call(_,this),this._listeners=a,(p=(d=this._options)==null?void 0:d.onDidAddFirstListener)==null||p.call(d,this)),this._size++;let c=Xe(()=>{h==null||h(),this._removeListener(a)});return n instanceof qs?n.add(c):Array.isArray(n)&&n.push(c),c}),this._event}_removeListener(e){var h,c,f,_;if((c=(h=this._options)==null?void 0:h.onWillRemoveListener)==null||c.call(h,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(_=(f=this._options)==null?void 0:f.onDidRemoveLastListener)==null||_.call(f,this),this._size=0;return}let i=this._listeners,n=i.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,i[n]=void 0;let a=this._deliveryQueue.current===this;if(this._size*Vy<=i.length){let g=0;for(let d=0;d<i.length;d++)i[d]?i[g++]=i[d]:a&&(this._deliveryQueue.end--,g<this._deliveryQueue.i&&this._deliveryQueue.i--);i.length=g}}_deliver(e,i){var a;if(!e)return;let n=((a=this._options)==null?void 0:a.onListenerError)||fo;if(!n){e.value(i);return}try{e.value(i)}catch(h){n(h)}}_deliverQueue(e){let i=e.current._listeners;for(;e.i<e.end;)this._deliver(i[e.i++],e.value);e.reset()}fire(e){var i,n,a,h;if((i=this._deliveryQueue)!=null&&i.current&&(this._deliverQueue(this._deliveryQueue),(n=this._perfMon)==null||n.stop()),(a=this._perfMon)==null||a.start(this._size),this._listeners)if(this._listeners instanceof ru)this._deliver(this._listeners,e);else{let c=this._deliveryQueue;c.enqueue(this,e,this._listeners.length),this._deliverQueue(c)}(h=this._perfMon)==null||h.stop()}hasListeners(){return this._size>0}},Ky=class{constructor(){this.i=-1,this.end=0}enqueue(e,i,n){this.i=0,this.end=n,this.current=e,this.value=i}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Lu=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new X,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new X,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(i){return this.mapWindowIdToZoomLevel.get(this.getWindowId(i))??0}setZoomLevel(i,n){if(this.getZoomLevel(n)===i)return;let a=this.getWindowId(n);this.mapWindowIdToZoomLevel.set(a,i),this._onDidChangeZoomLevel.fire(a)}getZoomFactor(i){return this.mapWindowIdToZoomFactor.get(this.getWindowId(i))??1}setZoomFactor(i,n){this.mapWindowIdToZoomFactor.set(this.getWindowId(n),i)}setFullscreen(i,n){if(this.isFullscreen(n)===i)return;let a=this.getWindowId(n);this.mapWindowIdToFullScreen.set(a,i),this._onDidChangeFullscreen.fire(a)}isFullscreen(i){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(i))}getWindowId(i){return i.vscodeWindowId}};Lu.INSTANCE=new Lu;var uf=Lu;function Yy(e,i,n){typeof i=="string"&&(i=e.matchMedia(i)),i.addEventListener("change",n)}uf.INSTANCE.onDidChangeZoomLevel;function jy(e){return uf.INSTANCE.getZoomFactor(e)}uf.INSTANCE.onDidChangeFullscreen;var cn=typeof navigator=="object"?navigator.userAgent:"",zu=cn.indexOf("Firefox")>=0,Iy=cn.indexOf("AppleWebKit")>=0,ff=cn.indexOf("Chrome")>=0,Fy=!ff&&cn.indexOf("Safari")>=0;cn.indexOf("Electron/")>=0;cn.indexOf("Android")>=0;var nu=!1;if(typeof as.matchMedia=="function"){let e=as.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),i=as.matchMedia("(display-mode: fullscreen)");nu=e.matches,Yy(as,e,({matches:n})=>{nu&&i.matches||(nu=n)})}var ln="en",Nu=!1,Hu=!1,_o=!1,Im=!1,ro,vo=ln,Bg=ln,Xy,Bi,fr=globalThis,Ot,ym;typeof fr.vscode<"u"&&typeof fr.vscode.process<"u"?Ot=fr.vscode.process:typeof process<"u"&&typeof((ym=process==null?void 0:process.versions)==null?void 0:ym.node)=="string"&&(Ot=process);var bm,Gy=typeof((bm=Ot==null?void 0:Ot.versions)==null?void 0:bm.electron)=="string",$y=Gy&&(Ot==null?void 0:Ot.type)==="renderer",Cm;if(typeof Ot=="object"){Nu=Ot.platform==="win32",Hu=Ot.platform==="darwin",_o=Ot.platform==="linux",_o&&Ot.env.SNAP&&Ot.env.SNAP_REVISION,Ot.env.CI||Ot.env.BUILD_ARTIFACTSTAGINGDIRECTORY,ro=ln,vo=ln;let e=Ot.env.VSCODE_NLS_CONFIG;if(e)try{let i=JSON.parse(e);ro=i.userLocale,Bg=i.osLocale,vo=i.resolvedLanguage||ln,Xy=(Cm=i.languagePack)==null?void 0:Cm.translationsConfigFile}catch{}Im=!0}else typeof navigator=="object"&&!$y?(Bi=navigator.userAgent,Nu=Bi.indexOf("Windows")>=0,Hu=Bi.indexOf("Macintosh")>=0,(Bi.indexOf("Macintosh")>=0||Bi.indexOf("iPad")>=0||Bi.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,_o=Bi.indexOf("Linux")>=0,(Bi==null?void 0:Bi.indexOf("Mobi"))>=0,vo=globalThis._VSCODE_NLS_LANGUAGE||ln,ro=navigator.language.toLowerCase(),Bg=ro):console.error("Unable to resolve platform.");var Fm=Nu,Ki=Hu,Zy=_o,Ag=Im,Yi=Bi,zs=vo,Qy;(e=>{function i(){return zs}e.value=i;function n(){return zs.length===2?zs==="en":zs.length>=3?zs[0]==="e"&&zs[1]==="n"&&zs[2]==="-":!1}e.isDefaultVariant=n;function a(){return zs==="en"}e.isDefault=a})(Qy||(Qy={}));var Jy=typeof fr.postMessage=="function"&&!fr.importScripts;(()=>{if(Jy){let e=[];fr.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let a=0,h=e.length;a<h;a++){let c=e[a];if(c.id===n.data.vscodeScheduleAsyncWork){e.splice(a,1),c.callback();return}}});let i=0;return n=>{let a=++i;e.push({id:a,callback:n}),fr.postMessage({vscodeScheduleAsyncWork:a},"*")}}return e=>setTimeout(e)})();var e1=!!(Yi&&Yi.indexOf("Chrome")>=0);Yi&&Yi.indexOf("Firefox")>=0;!e1&&Yi&&Yi.indexOf("Safari")>=0;Yi&&Yi.indexOf("Edg/")>=0;Yi&&Yi.indexOf("Android")>=0;var rn=typeof navigator=="object"?navigator:{};Ag||document.queryCommandSupported&&document.queryCommandSupported("copy")||rn&&rn.clipboard&&rn.clipboard.writeText,Ag||rn&&rn.clipboard&&rn.clipboard.readText;var df=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,i){this._keyCodeToStr[e]=i,this._strToKeyCode[i.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},lu=new df,Og=new df,Lg=new df,t1=new Array(230),Xm;(e=>{function i(_){return lu.keyCodeToStr(_)}e.toString=i;function n(_){return lu.strToKeyCode(_)}e.fromString=n;function a(_){return Og.keyCodeToStr(_)}e.toUserSettingsUS=a;function h(_){return Lg.keyCodeToStr(_)}e.toUserSettingsGeneral=h;function c(_){return Og.strToKeyCode(_)||Lg.strToKeyCode(_)}e.fromUserSettings=c;function f(_){if(_>=98&&_<=113)return null;switch(_){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return lu.keyCodeToStr(_)}e.toElectronAccelerator=f})(Xm||(Xm={}));var i1=class Gm{constructor(i,n,a,h,c){this.ctrlKey=i,this.shiftKey=n,this.altKey=a,this.metaKey=h,this.keyCode=c}equals(i){return i instanceof Gm&&this.ctrlKey===i.ctrlKey&&this.shiftKey===i.shiftKey&&this.altKey===i.altKey&&this.metaKey===i.metaKey&&this.keyCode===i.keyCode}getHashCode(){let i=this.ctrlKey?"1":"0",n=this.shiftKey?"1":"0",a=this.altKey?"1":"0",h=this.metaKey?"1":"0";return`K${i}${n}${a}${h}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new s1([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},s1=class{constructor(e){if(e.length===0)throw ky("chords");this.chords=e}getHashCode(){let e="";for(let i=0,n=this.chords.length;i<n;i++)i!==0&&(e+=";"),e+=this.chords[i].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let i=0;i<this.chords.length;i++)if(!this.chords[i].equals(e.chords[i]))return!1;return!0}};function r1(e){if(e.charCode){let n=String.fromCharCode(e.charCode).toUpperCase();return Xm.fromString(n)}let i=e.keyCode;if(i===3)return 7;if(zu)switch(i){case 59:return 85;case 60:if(Zy)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Ki)return 57;break}else if(Iy&&(Ki&&i===93||!Ki&&i===92))return 57;return t1[i]||0}var n1=Ki?256:2048,l1=512,a1=1024,o1=Ki?2048:256,zg=class{constructor(e){var n;this._standardKeyboardEventBrand=!0;let i=e;this.browserEvent=i,this.target=i.target,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.altGraphKey=(n=i.getModifierState)==null?void 0:n.call(i,"AltGraph"),this.keyCode=r1(i),this.code=i.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let i=0;return this.ctrlKey&&(i|=n1),this.altKey&&(i|=l1),this.shiftKey&&(i|=a1),this.metaKey&&(i|=o1),i|=e,i}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new i1(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},Ng=new WeakMap;function h1(e){if(!e.parent||e.parent===e)return null;try{let i=e.location,n=e.parent.location;if(i.origin!=="null"&&n.origin!=="null"&&i.origin!==n.origin)return null}catch{return null}return e.parent}var c1=class{static getSameOriginWindowChain(e){let i=Ng.get(e);if(!i){i=[],Ng.set(e,i);let n=e,a;do a=h1(n),a?i.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):i.push({window:new WeakRef(n),iframeElement:null}),n=a;while(n)}return i.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,i){if(!i||e===i)return{top:0,left:0};let n=0,a=0,h=this.getSameOriginWindowChain(e);for(let c of h){let f=c.window.deref();if(n+=(f==null?void 0:f.scrollY)??0,a+=(f==null?void 0:f.scrollX)??0,f===i||!c.iframeElement)break;let _=c.iframeElement.getBoundingClientRect();n+=_.top,a+=_.left}return{top:n,left:a}}},no=class{constructor(e,i){this.timestamp=Date.now(),this.browserEvent=i,this.leftButton=i.button===0,this.middleButton=i.button===1,this.rightButton=i.button===2,this.buttons=i.buttons,this.target=i.target,this.detail=i.detail||1,i.type==="dblclick"&&(this.detail=2),this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,typeof i.pageX=="number"?(this.posx=i.pageX,this.posy=i.pageY):(this.posx=i.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=i.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=c1.getPositionOfChildWindowRelativeToAncestorWindow(e,i.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},Hg=class{constructor(e,i=0,n=0){var h;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=i;let a=!1;if(ff){let c=navigator.userAgent.match(/Chrome\/(\d+)/);a=(c?parseInt(c[1]):123)<=122}if(e){let c=e,f=e,_=((h=e.view)==null?void 0:h.devicePixelRatio)||1;if(typeof c.wheelDeltaY<"u")a?this.deltaY=c.wheelDeltaY/(120*_):this.deltaY=c.wheelDeltaY/120;else if(typeof f.VERTICAL_AXIS<"u"&&f.axis===f.VERTICAL_AXIS)this.deltaY=-f.detail/3;else if(e.type==="wheel"){let g=e;g.deltaMode===g.DOM_DELTA_LINE?zu&&!Ki?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof c.wheelDeltaX<"u")Fy&&Fm?this.deltaX=-(c.wheelDeltaX/120):a?this.deltaX=c.wheelDeltaX/(120*_):this.deltaX=c.wheelDeltaX/120;else if(typeof f.HORIZONTAL_AXIS<"u"&&f.axis===f.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let g=e;g.deltaMode===g.DOM_DELTA_LINE?zu&&!Ki?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(a?this.deltaY=e.wheelDelta/(120*_):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}},$m=Object.freeze(function(e,i){let n=setTimeout(e.bind(i),0);return{dispose(){clearTimeout(n)}}}),u1;(e=>{function i(n){return n===e.None||n===e.Cancelled||n instanceof f1?!0:!n||typeof n!="object"?!1:typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"}e.isCancellationToken=i,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Lt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:$m})})(u1||(u1={}));var f1=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?$m:(this._emitter||(this._emitter=new X),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},_f=class{constructor(e,i){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof i=="number"&&this.setIfNotSet(e,i)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,i){if(this._isDisposed)throw new Tu("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},i)}setIfNotSet(e,i){if(this._isDisposed)throw new Tu("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},i))}},d1=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,i,n=globalThis){if(this.isDisposed)throw new Tu("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let a=n.setInterval(()=>{e()},i);this.disposable=Xe(()=>{n.clearInterval(a),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},_1;(e=>{async function i(a){let h,c=await Promise.all(a.map(f=>f.then(_=>_,_=>{h||(h=_)})));if(typeof h<"u")throw h;return c}e.settled=i;function n(a){return new Promise(async(h,c)=>{try{await a(h,c)}catch(f){c(f)}})}e.withAsyncBody=n})(_1||(_1={}));var Ug=class Ei{static fromArray(i){return new Ei(n=>{n.emitMany(i)})}static fromPromise(i){return new Ei(async n=>{n.emitMany(await i)})}static fromPromises(i){return new Ei(async n=>{await Promise.all(i.map(async a=>n.emitOne(await a)))})}static merge(i){return new Ei(async n=>{await Promise.all(i.map(async a=>{for await(let h of a)n.emitOne(h)}))})}constructor(i,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new X,queueMicrotask(async()=>{let a={emitOne:h=>this.emitOne(h),emitMany:h=>this.emitMany(h),reject:h=>this.reject(h)};try{await Promise.resolve(i(a)),this.resolve()}catch(h){this.reject(h)}finally{a.emitOne=void 0,a.emitMany=void 0,a.reject=void 0}})}[Symbol.asyncIterator](){let i=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(i<this._results.length)return{done:!1,value:this._results[i++]};if(this._state===1)return{done:!0,value:void 0};await Lt.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var n;return(n=this._onReturn)==null||n.call(this),{done:!0,value:void 0}}}}static map(i,n){return new Ei(async a=>{for await(let h of i)a.emitOne(n(h))})}map(i){return Ei.map(this,i)}static filter(i,n){return new Ei(async a=>{for await(let h of i)n(h)&&a.emitOne(h)})}filter(i){return Ei.filter(this,i)}static coalesce(i){return Ei.filter(i,n=>!!n)}coalesce(){return Ei.coalesce(this)}static async toPromise(i){let n=[];for await(let a of i)n.push(a);return n}toPromise(){return Ei.toPromise(this)}emitOne(i){this._state===0&&(this._results.push(i),this._onStateChanged.fire())}emitMany(i){this._state===0&&(this._results=this._results.concat(i),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(i){this._state===0&&(this._state=2,this._error=i,this._onStateChanged.fire())}};Ug.EMPTY=Ug.fromArray([]);var{getWindow:Wi,getWindowId:v1,onDidRegisterWindow:g1}=function(){let e=new Map,i={window:as,disposables:new qs};e.set(as.vscodeWindowId,i);let n=new X,a=new X,h=new X;function c(f,_){return(typeof f=="number"?e.get(f):void 0)??(_?i:void 0)}return{onDidRegisterWindow:n.event,onWillUnregisterWindow:h.event,onDidUnregisterWindow:a.event,registerWindow(f){if(e.has(f.vscodeWindowId))return we.None;let _=new qs,g={window:f,disposables:_.add(new qs)};return e.set(f.vscodeWindowId,g),_.add(Xe(()=>{e.delete(f.vscodeWindowId),a.fire(f)})),_.add(ge(f,Et.BEFORE_UNLOAD,()=>{h.fire(f)})),n.fire(g),_},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(f){return f.vscodeWindowId},hasWindow(f){return e.has(f)},getWindowById:c,getWindow(f){var d;let _=f;if((d=_==null?void 0:_.ownerDocument)!=null&&d.defaultView)return _.ownerDocument.defaultView.window;let g=f;return g!=null&&g.view?g.view.window:as},getDocument(f){return Wi(f).document}}}(),m1=class{constructor(e,i,n,a){this._node=e,this._type=i,this._handler=n,this._options=a||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function ge(e,i,n,a){return new m1(e,i,n,a)}var Pg=function(e,i,n,a){return ge(e,i,n,a)},vf,p1=class extends d1{constructor(e){super(),this.defaultTarget=e&&Wi(e)}cancelAndSet(e,i,n){return super.cancelAndSet(e,i,n??this.defaultTarget)}},qg=class{constructor(e,i=0){this._runner=e,this.priority=i,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){fo(e)}}static sort(e,i){return i.priority-e.priority}};(function(){let e=new Map,i=new Map,n=new Map,a=new Map,h=c=>{n.set(c,!1);let f=e.get(c)??[];for(i.set(c,f),e.set(c,[]),a.set(c,!0);f.length>0;)f.sort(qg.sort),f.shift().execute();a.set(c,!1)};vf=(c,f,_=0)=>{let g=v1(c),d=new qg(f,_),p=e.get(g);return p||(p=[],e.set(g,p)),p.push(d),n.get(g)||(n.set(g,!0),c.requestAnimationFrame(()=>h(g))),d}})();function S1(e){let i=e.getBoundingClientRect(),n=Wi(e);return{left:i.left+n.scrollX,top:i.top+n.scrollY,width:i.width,height:i.height}}var Et={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},y1=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let i=Zt(e);this._maxWidth!==i&&(this._maxWidth=i,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let i=Zt(e);this._width!==i&&(this._width=i,this.domNode.style.width=this._width)}setHeight(e){let i=Zt(e);this._height!==i&&(this._height=i,this.domNode.style.height=this._height)}setTop(e){let i=Zt(e);this._top!==i&&(this._top=i,this.domNode.style.top=this._top)}setLeft(e){let i=Zt(e);this._left!==i&&(this._left=i,this.domNode.style.left=this._left)}setBottom(e){let i=Zt(e);this._bottom!==i&&(this._bottom=i,this.domNode.style.bottom=this._bottom)}setRight(e){let i=Zt(e);this._right!==i&&(this._right=i,this.domNode.style.right=this._right)}setPaddingTop(e){let i=Zt(e);this._paddingTop!==i&&(this._paddingTop=i,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let i=Zt(e);this._paddingLeft!==i&&(this._paddingLeft=i,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let i=Zt(e);this._paddingBottom!==i&&(this._paddingBottom=i,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let i=Zt(e);this._paddingRight!==i&&(this._paddingRight=i,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let i=Zt(e);this._fontSize!==i&&(this._fontSize=i,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let i=Zt(e);this._lineHeight!==i&&(this._lineHeight=i,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let i=Zt(e);this._letterSpacing!==i&&(this._letterSpacing=i,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,i){this.domNode.classList.toggle(e,i),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,i){this.domNode.setAttribute(e,i)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function Zt(e){return typeof e=="number"?`${e}px`:e}function Cl(e){return new y1(e)}var Zm=class{constructor(){this._hooks=new qs,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,i){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(i)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,i,n,a,h){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=a,this._onStopCallback=h;let c=e;try{e.setPointerCapture(i),this._hooks.add(Xe(()=>{try{e.releasePointerCapture(i)}catch{}}))}catch{c=Wi(e)}this._hooks.add(ge(c,Et.POINTER_MOVE,f=>{if(f.buttons!==n){this.stopMonitoring(!0);return}f.preventDefault(),this._pointerMoveCallback(f)})),this._hooks.add(ge(c,Et.POINTER_UP,f=>this.stopMonitoring(!0)))}};function b1(e,i,n){let a=null,h=null;if(typeof n.value=="function"?(a="value",h=n.value,h.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof n.get=="function"&&(a="get",h=n.get),!h)throw new Error("not supported");let c=`$memoize$${i}`;n[a]=function(...f){return this.hasOwnProperty(c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!1,value:h.apply(this,f)}),this[c]}}var Vi;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(Vi||(Vi={}));var gl=class Pt extends we{constructor(){super(),this.dispatched=!1,this.targets=new Rg,this.ignoreTargets=new Rg,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Lt.runAndSubscribe(g1,({window:i,disposables:n})=>{n.add(ge(i.document,"touchstart",a=>this.onTouchStart(a),{passive:!1})),n.add(ge(i.document,"touchend",a=>this.onTouchEnd(i,a))),n.add(ge(i.document,"touchmove",a=>this.onTouchMove(a),{passive:!1}))},{window:as,disposables:this._store}))}static addTarget(i){if(!Pt.isTouchDevice())return we.None;Pt.INSTANCE||(Pt.INSTANCE=new Pt);let n=Pt.INSTANCE.targets.push(i);return Xe(n)}static ignoreTarget(i){if(!Pt.isTouchDevice())return we.None;Pt.INSTANCE||(Pt.INSTANCE=new Pt);let n=Pt.INSTANCE.ignoreTargets.push(i);return Xe(n)}static isTouchDevice(){return"ontouchstart"in as||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(i){let n=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let a=0,h=i.targetTouches.length;a<h;a++){let c=i.targetTouches.item(a);this.activeTouches[c.identifier]={id:c.identifier,initialTarget:c.target,initialTimeStamp:n,initialPageX:c.pageX,initialPageY:c.pageY,rollingTimestamps:[n],rollingPageX:[c.pageX],rollingPageY:[c.pageY]};let f=this.newGestureEvent(Vi.Start,c.target);f.pageX=c.pageX,f.pageY=c.pageY,this.dispatchEvent(f)}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)}onTouchEnd(i,n){let a=Date.now(),h=Object.keys(this.activeTouches).length;for(let c=0,f=n.changedTouches.length;c<f;c++){let _=n.changedTouches.item(c);if(!this.activeTouches.hasOwnProperty(String(_.identifier))){console.warn("move of an UNKNOWN touch",_);continue}let g=this.activeTouches[_.identifier],d=Date.now()-g.initialTimeStamp;if(d<Pt.HOLD_DELAY&&Math.abs(g.initialPageX-ci(g.rollingPageX))<30&&Math.abs(g.initialPageY-ci(g.rollingPageY))<30){let p=this.newGestureEvent(Vi.Tap,g.initialTarget);p.pageX=ci(g.rollingPageX),p.pageY=ci(g.rollingPageY),this.dispatchEvent(p)}else if(d>=Pt.HOLD_DELAY&&Math.abs(g.initialPageX-ci(g.rollingPageX))<30&&Math.abs(g.initialPageY-ci(g.rollingPageY))<30){let p=this.newGestureEvent(Vi.Contextmenu,g.initialTarget);p.pageX=ci(g.rollingPageX),p.pageY=ci(g.rollingPageY),this.dispatchEvent(p)}else if(h===1){let p=ci(g.rollingPageX),S=ci(g.rollingPageY),E=ci(g.rollingTimestamps)-g.rollingTimestamps[0],k=p-g.rollingPageX[0],x=S-g.rollingPageY[0],C=[...this.targets].filter(T=>g.initialTarget instanceof Node&&T.contains(g.initialTarget));this.inertia(i,C,a,Math.abs(k)/E,k>0?1:-1,p,Math.abs(x)/E,x>0?1:-1,S)}this.dispatchEvent(this.newGestureEvent(Vi.End,g.initialTarget)),delete this.activeTouches[_.identifier]}this.dispatched&&(n.preventDefault(),n.stopPropagation(),this.dispatched=!1)}newGestureEvent(i,n){let a=document.createEvent("CustomEvent");return a.initEvent(i,!1,!0),a.initialTarget=n,a.tapCount=0,a}dispatchEvent(i){if(i.type===Vi.Tap){let n=new Date().getTime(),a=0;n-this._lastSetTapCountTime>Pt.CLEAR_TAP_COUNT_TIME?a=1:a=2,this._lastSetTapCountTime=n,i.tapCount=a}else(i.type===Vi.Change||i.type===Vi.Contextmenu)&&(this._lastSetTapCountTime=0);if(i.initialTarget instanceof Node){for(let a of this.ignoreTargets)if(a.contains(i.initialTarget))return;let n=[];for(let a of this.targets)if(a.contains(i.initialTarget)){let h=0,c=i.initialTarget;for(;c&&c!==a;)h++,c=c.parentElement;n.push([h,a])}n.sort((a,h)=>a[0]-h[0]);for(let[a,h]of n)h.dispatchEvent(i),this.dispatched=!0}}inertia(i,n,a,h,c,f,_,g,d){this.handle=vf(i,()=>{let p=Date.now(),S=p-a,E=0,k=0,x=!0;h+=Pt.SCROLL_FRICTION*S,_+=Pt.SCROLL_FRICTION*S,h>0&&(x=!1,E=c*h*S),_>0&&(x=!1,k=g*_*S);let C=this.newGestureEvent(Vi.Change);C.translationX=E,C.translationY=k,n.forEach(T=>T.dispatchEvent(C)),x||this.inertia(i,n,p,h,c,f+E,_,g,d+k)})}onTouchMove(i){let n=Date.now();for(let a=0,h=i.changedTouches.length;a<h;a++){let c=i.changedTouches.item(a);if(!this.activeTouches.hasOwnProperty(String(c.identifier))){console.warn("end of an UNKNOWN touch",c);continue}let f=this.activeTouches[c.identifier],_=this.newGestureEvent(Vi.Change,f.initialTarget);_.translationX=c.pageX-ci(f.rollingPageX),_.translationY=c.pageY-ci(f.rollingPageY),_.pageX=c.pageX,_.pageY=c.pageY,this.dispatchEvent(_),f.rollingPageX.length>3&&(f.rollingPageX.shift(),f.rollingPageY.shift(),f.rollingTimestamps.shift()),f.rollingPageX.push(c.pageX),f.rollingPageY.push(c.pageY),f.rollingTimestamps.push(n)}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)}};gl.SCROLL_FRICTION=-.005,gl.HOLD_DELAY=700,gl.CLEAR_TAP_COUNT_TIME=400,tt([b1],gl,"isTouchDevice",1);var C1=gl,gf=class extends we{onclick(e,i){this._register(ge(e,Et.CLICK,n=>i(new no(Wi(e),n))))}onmousedown(e,i){this._register(ge(e,Et.MOUSE_DOWN,n=>i(new no(Wi(e),n))))}onmouseover(e,i){this._register(ge(e,Et.MOUSE_OVER,n=>i(new no(Wi(e),n))))}onmouseleave(e,i){this._register(ge(e,Et.MOUSE_LEAVE,n=>i(new no(Wi(e),n))))}onkeydown(e,i){this._register(ge(e,Et.KEY_DOWN,n=>i(new zg(n))))}onkeyup(e,i){this._register(ge(e,Et.KEY_UP,n=>i(new zg(n))))}oninput(e,i){this._register(ge(e,Et.INPUT,i))}onblur(e,i){this._register(ge(e,Et.BLUR,i))}onfocus(e,i){this._register(ge(e,Et.FOCUS,i))}onchange(e,i){this._register(ge(e,Et.CHANGE,i))}ignoreGesture(e){return C1.ignoreTarget(e)}},Vg=11,w1=class extends gf{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=Vg+"px",this.domNode.style.height=Vg+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Zm),this._register(Pg(this.bgDomNode,Et.POINTER_DOWN,i=>this._arrowPointerDown(i))),this._register(Pg(this.domNode,Et.POINTER_DOWN,i=>this._arrowPointerDown(i))),this._pointerdownRepeatTimer=this._register(new p1),this._pointerdownScheduleRepeatTimer=this._register(new _f)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let i=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Wi(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(i,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},E1=class Uu{constructor(i,n,a,h,c,f,_){this._forceIntegerValues=i,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n=n|0,a=a|0,h=h|0,c=c|0,f=f|0,_=_|0),this.rawScrollLeft=h,this.rawScrollTop=_,n<0&&(n=0),h+n>a&&(h=a-n),h<0&&(h=0),c<0&&(c=0),_+c>f&&(_=f-c),_<0&&(_=0),this.width=n,this.scrollWidth=a,this.scrollLeft=h,this.height=c,this.scrollHeight=f,this.scrollTop=_}equals(i){return this.rawScrollLeft===i.rawScrollLeft&&this.rawScrollTop===i.rawScrollTop&&this.width===i.width&&this.scrollWidth===i.scrollWidth&&this.scrollLeft===i.scrollLeft&&this.height===i.height&&this.scrollHeight===i.scrollHeight&&this.scrollTop===i.scrollTop}withScrollDimensions(i,n){return new Uu(this._forceIntegerValues,typeof i.width<"u"?i.width:this.width,typeof i.scrollWidth<"u"?i.scrollWidth:this.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,typeof i.height<"u"?i.height:this.height,typeof i.scrollHeight<"u"?i.scrollHeight:this.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(i){return new Uu(this._forceIntegerValues,this.width,this.scrollWidth,typeof i.scrollLeft<"u"?i.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof i.scrollTop<"u"?i.scrollTop:this.rawScrollTop)}createScrollEvent(i,n){let a=this.width!==i.width,h=this.scrollWidth!==i.scrollWidth,c=this.scrollLeft!==i.scrollLeft,f=this.height!==i.height,_=this.scrollHeight!==i.scrollHeight,g=this.scrollTop!==i.scrollTop;return{inSmoothScrolling:n,oldWidth:i.width,oldScrollWidth:i.scrollWidth,oldScrollLeft:i.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:i.height,oldScrollHeight:i.scrollHeight,oldScrollTop:i.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:a,scrollWidthChanged:h,scrollLeftChanged:c,heightChanged:f,scrollHeightChanged:_,scrollTopChanged:g}}},x1=class extends we{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new X),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new E1(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,i){var a;let n=this._state.withScrollDimensions(e,i);this._setState(n,!!this._smoothScrolling),(a=this._smoothScrolling)==null||a.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let i=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(i,!1)}setScrollPositionSmooth(e,i){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let a;i?a=new Kg(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):a=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=a}else{let n=this._state.withScrollPosition(e);this._smoothScrolling=Kg.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),i=this._state.withScrollPosition(e);if(this._setState(i,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,i){let n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,i)))}},Wg=class{constructor(e,i,n){this.scrollLeft=e,this.scrollTop=i,this.isDone=n}};function au(e,i){let n=i-e;return function(a){return e+n*k1(a)}}function M1(e,i,n){return function(a){return a<n?e(a/n):i((a-n)/(1-n))}}var Kg=class Pu{constructor(i,n,a,h){this.from=i,this.to=n,this.duration=h,this.startTime=a,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(i,n,a){if(Math.abs(i-n)>2.5*a){let h,c;return i<n?(h=i+.75*a,c=n-.75*a):(h=i-.75*a,c=n+.75*a),M1(au(i,h),au(c,n),.33)}return au(i,n)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(i){this.to=i.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(i){let n=(i-this.startTime)/this.duration;if(n<1){let a=this.scrollLeft(n),h=this.scrollTop(n);return new Wg(a,h,!1)}return new Wg(this.to.scrollLeft,this.to.scrollTop,!0)}combine(i,n,a){return Pu.start(i,n,a)}static start(i,n,a){a=a+10;let h=Date.now()-10;return new Pu(i,n,h,a)}};function D1(e){return Math.pow(e,3)}function k1(e){return 1-D1(1-e)}var T1=class extends we{constructor(e,i,n){super(),this._visibility=e,this._visibleClassName=i,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new _f)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var i;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(i=this._domNode)==null||i.setClassName(this._invisibleClassName+(e?" fade":"")))}},R1=140,Qm=class extends gf{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new T1(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Zm),this._shouldRender=!0,this.domNode=Cl(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(ge(this.domNode.domNode,Et.POINTER_DOWN,i=>this._domNodePointerDown(i)))}_createArrow(e){let i=this._register(new w1(e));this.domNode.domNode.appendChild(i.bgDomNode),this.domNode.domNode.appendChild(i.domNode)}_createSlider(e,i,n,a){this.slider=Cl(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(i),typeof n=="number"&&this.slider.setWidth(n),typeof a=="number"&&this.slider.setHeight(a),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(ge(this.slider.domNode,Et.POINTER_DOWN,h=>{h.button===0&&(h.preventDefault(),this._sliderPointerDown(h))})),this.onclick(this.slider.domNode,h=>{h.leftButton&&h.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let i=this.domNode.domNode.getClientRects()[0].top,n=i+this._scrollbarState.getSliderPosition(),a=i+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),h=this._sliderPointerPosition(e);n<=h&&h<=a?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let i,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")i=e.offsetX,n=e.offsetY;else{let h=S1(this.domNode.domNode);i=e.pageX-h.left,n=e.pageY-h.top}let a=this._pointerDownRelativePosition(i,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(a):this._scrollbarState.getDesiredScrollPositionFromOffset(a)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let i=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),a=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,h=>{let c=this._sliderOrthogonalPointerPosition(h),f=Math.abs(c-n);if(Fm&&f>R1){this._setDesiredScrollPositionNow(a.getScrollPosition());return}let _=this._sliderPointerPosition(h)-i;this._setDesiredScrollPositionNow(a.getDesiredScrollPositionFromDelta(_))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let i={};this.writeScrollPosition(i,e),this._scrollable.setScrollPositionNow(i)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},Jm=class qu{constructor(i,n,a,h,c,f){this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(a),this._arrowSize=Math.round(i),this._visibleSize=h,this._scrollSize=c,this._scrollPosition=f,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new qu(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(i){let n=Math.round(i);return this._visibleSize!==n?(this._visibleSize=n,this._refreshComputedValues(),!0):!1}setScrollSize(i){let n=Math.round(i);return this._scrollSize!==n?(this._scrollSize=n,this._refreshComputedValues(),!0):!1}setScrollPosition(i){let n=Math.round(i);return this._scrollPosition!==n?(this._scrollPosition=n,this._refreshComputedValues(),!0):!1}setScrollbarSize(i){this._scrollbarSize=Math.round(i)}setOppositeScrollbarSize(i){this._oppositeScrollbarSize=Math.round(i)}static _computeValues(i,n,a,h,c){let f=Math.max(0,a-i),_=Math.max(0,f-2*n),g=h>0&&h>a;if(!g)return{computedAvailableSize:Math.round(f),computedIsNeeded:g,computedSliderSize:Math.round(_),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(a*_/h))),p=(_-d)/(h-a),S=c*p;return{computedAvailableSize:Math.round(f),computedIsNeeded:g,computedSliderSize:Math.round(d),computedSliderRatio:p,computedSliderPosition:Math.round(S)}}_refreshComputedValues(){let i=qu._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=i.computedAvailableSize,this._computedIsNeeded=i.computedIsNeeded,this._computedSliderSize=i.computedSliderSize,this._computedSliderRatio=i.computedSliderRatio,this._computedSliderPosition=i.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(i){if(!this._computedIsNeeded)return 0;let n=i-this._arrowSize-this._computedSliderSize/2;return Math.round(n/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(i){if(!this._computedIsNeeded)return 0;let n=i-this._arrowSize,a=this._scrollPosition;return n<this._computedSliderPosition?a-=this._visibleSize:a+=this._visibleSize,a}getDesiredScrollPositionFromDelta(i){if(!this._computedIsNeeded)return 0;let n=this._computedSliderPosition+i;return Math.round(n/this._computedSliderRatio)}},B1=class extends Qm{constructor(e,i,n){let a=e.getScrollDimensions(),h=e.getCurrentScrollPosition();if(super({lazyRender:i.lazyRender,host:n,scrollbarState:new Jm(i.horizontalHasArrows?i.arrowSize:0,i.horizontal===2?0:i.horizontalScrollbarSize,i.vertical===2?0:i.verticalScrollbarSize,a.width,a.scrollWidth,h.scrollLeft),visibility:i.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:i.scrollByPage}),i.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((i.horizontalScrollbarSize-i.horizontalSliderSize)/2),0,void 0,i.horizontalSliderSize)}_updateSlider(e,i){this.slider.setWidth(e),this.slider.setLeft(i)}_renderDomNode(e,i){this.domNode.setWidth(e),this.domNode.setHeight(i),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,i){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,i){e.scrollLeft=i}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},A1=class extends Qm{constructor(e,i,n){let a=e.getScrollDimensions(),h=e.getCurrentScrollPosition();if(super({lazyRender:i.lazyRender,host:n,scrollbarState:new Jm(i.verticalHasArrows?i.arrowSize:0,i.vertical===2?0:i.verticalScrollbarSize,0,a.height,a.scrollHeight,h.scrollTop),visibility:i.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:i.scrollByPage}),i.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((i.verticalScrollbarSize-i.verticalSliderSize)/2),i.verticalSliderSize,void 0)}_updateSlider(e,i){this.slider.setHeight(e),this.slider.setTop(i)}_renderDomNode(e,i){this.domNode.setWidth(i),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,i){return i}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,i){e.scrollTop=i}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},O1=500,Yg=50,L1=class{constructor(e,i,n){this.timestamp=e,this.deltaX=i,this.deltaY=n,this.score=0}},Vu=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let i=1,n=0,a=1,h=this._rear;do{let c=h===this._front?i:Math.pow(2,-a);if(i-=c,n+=this._memory[h].score*c,h===this._front)break;h=(this._capacity+h-1)%this._capacity,a++}while(!0);return n<=.5}acceptStandardWheelEvent(i){if(ff){let n=Wi(i.browserEvent),a=jy(n);this.accept(Date.now(),i.deltaX*a,i.deltaY*a)}else this.accept(Date.now(),i.deltaX,i.deltaY)}accept(i,n,a){let h=null,c=new L1(i,n,a);this._front===-1&&this._rear===-1?(this._memory[0]=c,this._front=0,this._rear=0):(h=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=c),c.score=this._computeScore(c,h)}_computeScore(i,n){if(Math.abs(i.deltaX)>0&&Math.abs(i.deltaY)>0)return 1;let a=.5;if((!this._isAlmostInt(i.deltaX)||!this._isAlmostInt(i.deltaY))&&(a+=.25),n){let h=Math.abs(i.deltaX),c=Math.abs(i.deltaY),f=Math.abs(n.deltaX),_=Math.abs(n.deltaY),g=Math.max(Math.min(h,f),1),d=Math.max(Math.min(c,_),1),p=Math.max(h,f),S=Math.max(c,_);p%g===0&&S%d===0&&(a-=.5)}return Math.min(Math.max(a,0),1)}_isAlmostInt(i){return Math.abs(Math.round(i)-i)<.01}};Vu.INSTANCE=new Vu;var z1=Vu,N1=class extends gf{constructor(e,i,n){super(),this._onScroll=this._register(new X),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new X),this.onWillScroll=this._onWillScroll.event,this._options=U1(i),this._scrollable=n,this._register(this._scrollable.onScroll(h=>{this._onWillScroll.fire(h),this._onDidScroll(h),this._onScroll.fire(h)}));let a={onMouseWheel:h=>this._onMouseWheel(h),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new A1(this._scrollable,this._options,a)),this._horizontalScrollbar=this._register(new B1(this._scrollable,this._options,a)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Cl(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Cl(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Cl(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,h=>this._onMouseOver(h)),this.onmouseleave(this._listenOnDomNode,h=>this._onMouseLeave(h)),this._hideTimeout=this._register(new _f),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=dr(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Ki&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Hg(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=dr(this._mouseWheelToDispose),e)){let i=n=>{this._onMouseWheel(new Hg(n))};this._mouseWheelToDispose.push(ge(this._listenOnDomNode,Et.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){var h;if((h=e.browserEvent)!=null&&h.defaultPrevented)return;let i=z1.INSTANCE;i.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let c=e.deltaY*this._options.mouseWheelScrollSensitivity,f=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&f+c===0?f=c=0:Math.abs(c)>=Math.abs(f)?f=0:c=0),this._options.flipAxes&&([c,f]=[f,c]);let _=!Ki&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||_)&&!f&&(f=c,c=0),e.browserEvent&&e.browserEvent.altKey&&(f=f*this._options.fastScrollSensitivity,c=c*this._options.fastScrollSensitivity);let g=this._scrollable.getFutureScrollPosition(),d={};if(c){let p=Yg*c,S=g.scrollTop-(p<0?Math.floor(p):Math.ceil(p));this._verticalScrollbar.writeScrollPosition(d,S)}if(f){let p=Yg*f,S=g.scrollLeft-(p<0?Math.floor(p):Math.ceil(p));this._horizontalScrollbar.writeScrollPosition(d,S)}d=this._scrollable.validateScrollPosition(d),(g.scrollLeft!==d.scrollLeft||g.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&i.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let a=n;!a&&this._options.alwaysConsumeMouseWheel&&(a=!0),!a&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(a=!0),a&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),i=e.scrollTop>0,n=e.scrollLeft>0,a=n?" left":"",h=i?" top":"",c=n||i?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${a}`),this._topShadowDomNode.setClassName(`shadow${h}`),this._topLeftShadowDomNode.setClassName(`shadow${c}${h}${a}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),O1)}},H1=class extends N1{constructor(e,i,n){super(e,i,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function U1(e){let i={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return i.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:i.horizontalScrollbarSize,i.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:i.verticalScrollbarSize,Ki&&(i.className+=" mac"),i}var Wu=class extends we{constructor(e,i,n,a,h,c,f,_){super(),this._bufferService=n,this._optionsService=f,this._renderService=_,this._onRequestScrollLines=this._register(new X),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let g=this._register(new x1({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:d=>vf(a.window,d)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{g.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new H1(i,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},g)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(h.onProtocolChange(d=>{this._scrollableElement.updateOptions({handleMouseWheel:!(d&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(Lt.runAndSubscribe(c.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=c.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(Xe(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=a.mainDocument.createElement("style"),i.appendChild(this._styleElement),this._register(Xe(()=>this._styleElement.remove())),this._register(Lt.runAndSubscribe(c.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${c.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${c.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${c.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(d=>this._handleScroll(d)))}scrollLines(e){let i=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:i.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,i){i&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!i,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){var e;return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:((e=this._optionsService.rawOptions.overviewRuler)==null?void 0:e.width)||14}}queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let i=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),n=i-this._bufferService.buffer.ydisp;n!==0&&(this._latestYDisp=i,this._onRequestScrollLines.fire(n)),this._isHandlingScroll=!1}};Wu=tt([re(2,Yt),re(3,os),re(4,Om),re(5,hn),re(6,jt),re(7,hs)],Wu);var Ku=class extends we{constructor(e,i,n,a,h){super(),this._screenElement=e,this._bufferService=i,this._coreBrowserService=n,this._decorationService=a,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(c=>this._removeDecoration(c))),this._register(Xe(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var a;let i=this._coreBrowserService.mainDocument.createElement("div");i.classList.add("xterm-decoration"),i.classList.toggle("xterm-decoration-top-layer",((a=e==null?void 0:e.options)==null?void 0:a.layer)==="top"),i.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,i.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,i.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,i.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let n=e.options.x??0;return n&&n>this._bufferService.cols&&(i.style.display="none"),this._refreshXPosition(e,i),i}_refreshStyle(e){let i=e.marker.line-this._bufferService.buffers.active.ydisp;if(i<0||i>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let n=this._decorationElements.get(e);n||(n=this._createElement(e),e.element=n,this._decorationElements.set(e,n),this._container.appendChild(n),e.onDispose(()=>{this._decorationElements.delete(e),n.remove()})),n.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(n.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,n.style.top=`${i*this._renderService.dimensions.css.cell.height}px`,n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(n)}}_refreshXPosition(e,i=e.element){if(!i)return;let n=e.options.x??0;(e.options.anchor||"left")==="right"?i.style.right=n?`${n*this._renderService.dimensions.css.cell.width}px`:"":i.style.left=n?`${n*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){var i;(i=this._decorationElements.get(e))==null||i.remove(),this._decorationElements.delete(e),e.dispose()}};Ku=tt([re(1,Yt),re(2,os),re(3,ql),re(4,hs)],Ku);var P1=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let i of this._zones)if(i.color===e.options.overviewRulerOptions.color&&i.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(i,e.marker.line))return;if(this._lineAdjacentToZone(i,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(i,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,i){return i>=e.startBufferLine&&i<=e.endBufferLine}_lineAdjacentToZone(e,i,n){return i>=e.startBufferLine-this._linePadding[n||"full"]&&i<=e.endBufferLine+this._linePadding[n||"full"]}_addLineToZone(e,i){e.startBufferLine=Math.min(e.startBufferLine,i),e.endBufferLine=Math.max(e.endBufferLine,i)}},Pi={full:0,left:0,center:0,right:0},Ns={full:0,left:0,center:0,right:0},cl={full:0,left:0,center:0,right:0},yo=class extends we{constructor(e,i,n,a,h,c,f,_){var d;super(),this._viewportElement=e,this._screenElement=i,this._bufferService=n,this._decorationService=a,this._renderService=h,this._optionsService=c,this._themeService=f,this._coreBrowserService=_,this._colorZoneStore=new P1,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(d=this._viewportElement.parentElement)==null||d.insertBefore(this._canvas,this._viewportElement),this._register(Xe(()=>{var p;return(p=this._canvas)==null?void 0:p.remove()}));let g=this._canvas.getContext("2d");if(g)this._ctx=g;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){var e;return((e=this._optionsService.options.overviewRuler)==null?void 0:e.width)||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),i=Math.ceil((this._canvas.width-1)/3);Ns.full=this._canvas.width,Ns.left=e,Ns.center=i,Ns.right=e,this._refreshDrawHeightConstants(),cl.full=1,cl.left=1,cl.center=1+Ns.left,cl.right=1+Ns.left+Ns.center}_refreshDrawHeightConstants(){Pi.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,i=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);Pi.left=i,Pi.center=i,Pi.right=i}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pi.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pi.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pi.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Pi.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let i of this._decorationService.decorations)this._colorZoneStore.addDecoration(i);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let i of e)i.position!=="full"&&this._renderColorZone(i);for(let i of e)i.position==="full"&&this._renderColorZone(i);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(cl[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-Pi[e.position||"full"]/2),Ns[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+Pi[e.position||"full"]))}_queueRefresh(e,i){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=i||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};yo=tt([re(2,Yt),re(3,ql),re(4,hs),re(5,jt),re(6,hn),re(7,os)],yo);var q;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(q||(q={}));var go;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(go||(go={}));var ep;(e=>e.ST=`${q.ESC}\\`)(ep||(ep={}));var Yu=class{constructor(e,i,n,a,h,c){this._textarea=e,this._compositionView=i,this._bufferService=n,this._optionsService=a,this._coreService=h,this._renderService=c,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===20||e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let i={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let n;i.start+=this._dataAlreadySent.length,this._isComposing?n=this._textarea.value.substring(i.start,this._compositionPosition.start):n=this._textarea.value.substring(i.start),n.length>0&&this._coreService.triggerDataEvent(n,!0)}},0)}else{this._isSendingComposition=!1;let i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let i=this._textarea.value,n=i.replace(e,"");this._dataAlreadySent=n,i.length>e.length?this._coreService.triggerDataEvent(n,!0):i.length<e.length?this._coreService.triggerDataEvent(`${q.DEL}`,!0):i.length===e.length&&i!==e&&this._coreService.triggerDataEvent(i,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let i=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.css.cell.height,a=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=i*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let c=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(c.width,1)+"px",this._textarea.style.height=Math.max(c.height,1)+"px",this._textarea.style.lineHeight=c.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};Yu=tt([re(2,Yt),re(3,jt),re(4,vr),re(5,hs)],Yu);var xt=0,Mt=0,Dt=0,et=0,jg={css:"#00000000",rgba:0},dt;(e=>{function i(h,c,f,_){return _!==void 0?`#${ar(h)}${ar(c)}${ar(f)}${ar(_)}`:`#${ar(h)}${ar(c)}${ar(f)}`}e.toCss=i;function n(h,c,f,_=255){return(h<<24|c<<16|f<<8|_)>>>0}e.toRgba=n;function a(h,c,f,_){return{css:e.toCss(h,c,f,_),rgba:e.toRgba(h,c,f,_)}}e.toColor=a})(dt||(dt={}));var je;(e=>{function i(g,d){if(et=(d.rgba&255)/255,et===1)return{css:d.css,rgba:d.rgba};let p=d.rgba>>24&255,S=d.rgba>>16&255,E=d.rgba>>8&255,k=g.rgba>>24&255,x=g.rgba>>16&255,C=g.rgba>>8&255;xt=k+Math.round((p-k)*et),Mt=x+Math.round((S-x)*et),Dt=C+Math.round((E-C)*et);let T=dt.toCss(xt,Mt,Dt),z=dt.toRgba(xt,Mt,Dt);return{css:T,rgba:z}}e.blend=i;function n(g){return(g.rgba&255)===255}e.isOpaque=n;function a(g,d,p){let S=mo.ensureContrastRatio(g.rgba,d.rgba,p);if(S)return dt.toColor(S>>24&255,S>>16&255,S>>8&255)}e.ensureContrastRatio=a;function h(g){let d=(g.rgba|255)>>>0;return[xt,Mt,Dt]=mo.toChannels(d),{css:dt.toCss(xt,Mt,Dt),rgba:d}}e.opaque=h;function c(g,d){return et=Math.round(d*255),[xt,Mt,Dt]=mo.toChannels(g.rgba),{css:dt.toCss(xt,Mt,Dt,et),rgba:dt.toRgba(xt,Mt,Dt,et)}}e.opacity=c;function f(g,d){return et=g.rgba&255,c(g,et*d/255)}e.multiplyOpacity=f;function _(g){return[g.rgba>>24&255,g.rgba>>16&255,g.rgba>>8&255]}e.toColorRGB=_})(je||(je={}));var Ze;(e=>{let i,n;try{let h=document.createElement("canvas");h.width=1,h.height=1;let c=h.getContext("2d",{willReadFrequently:!0});c&&(i=c,i.globalCompositeOperation="copy",n=i.createLinearGradient(0,0,1,1))}catch{}function a(h){if(h.match(/#[\da-f]{3,8}/i))switch(h.length){case 4:return xt=parseInt(h.slice(1,2).repeat(2),16),Mt=parseInt(h.slice(2,3).repeat(2),16),Dt=parseInt(h.slice(3,4).repeat(2),16),dt.toColor(xt,Mt,Dt);case 5:return xt=parseInt(h.slice(1,2).repeat(2),16),Mt=parseInt(h.slice(2,3).repeat(2),16),Dt=parseInt(h.slice(3,4).repeat(2),16),et=parseInt(h.slice(4,5).repeat(2),16),dt.toColor(xt,Mt,Dt,et);case 7:return{css:h,rgba:(parseInt(h.slice(1),16)<<8|255)>>>0};case 9:return{css:h,rgba:parseInt(h.slice(1),16)>>>0}}let c=h.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(c)return xt=parseInt(c[1]),Mt=parseInt(c[2]),Dt=parseInt(c[3]),et=Math.round((c[5]===void 0?1:parseFloat(c[5]))*255),dt.toColor(xt,Mt,Dt,et);if(!i||!n)throw new Error("css.toColor: Unsupported css format");if(i.fillStyle=n,i.fillStyle=h,typeof i.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(i.fillRect(0,0,1,1),[xt,Mt,Dt,et]=i.getImageData(0,0,1,1).data,et!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:dt.toRgba(xt,Mt,Dt,et),css:h}}e.toColor=a})(Ze||(Ze={}));var Kt;(e=>{function i(a){return n(a>>16&255,a>>8&255,a&255)}e.relativeLuminance=i;function n(a,h,c){let f=a/255,_=h/255,g=c/255,d=f<=.03928?f/12.92:Math.pow((f+.055)/1.055,2.4),p=_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4),S=g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4);return d*.2126+p*.7152+S*.0722}e.relativeLuminance2=n})(Kt||(Kt={}));var mo;(e=>{function i(f,_){if(et=(_&255)/255,et===1)return _;let g=_>>24&255,d=_>>16&255,p=_>>8&255,S=f>>24&255,E=f>>16&255,k=f>>8&255;return xt=S+Math.round((g-S)*et),Mt=E+Math.round((d-E)*et),Dt=k+Math.round((p-k)*et),dt.toRgba(xt,Mt,Dt)}e.blend=i;function n(f,_,g){let d=Kt.relativeLuminance(f>>8),p=Kt.relativeLuminance(_>>8);if(ls(d,p)<g){if(p<d){let k=a(f,_,g),x=ls(d,Kt.relativeLuminance(k>>8));if(x<g){let C=h(f,_,g),T=ls(d,Kt.relativeLuminance(C>>8));return x>T?k:C}return k}let S=h(f,_,g),E=ls(d,Kt.relativeLuminance(S>>8));if(E<g){let k=a(f,_,g),x=ls(d,Kt.relativeLuminance(k>>8));return E>x?S:k}return S}}e.ensureContrastRatio=n;function a(f,_,g){let d=f>>24&255,p=f>>16&255,S=f>>8&255,E=_>>24&255,k=_>>16&255,x=_>>8&255,C=ls(Kt.relativeLuminance2(E,k,x),Kt.relativeLuminance2(d,p,S));for(;C<g&&(E>0||k>0||x>0);)E-=Math.max(0,Math.ceil(E*.1)),k-=Math.max(0,Math.ceil(k*.1)),x-=Math.max(0,Math.ceil(x*.1)),C=ls(Kt.relativeLuminance2(E,k,x),Kt.relativeLuminance2(d,p,S));return(E<<24|k<<16|x<<8|255)>>>0}e.reduceLuminance=a;function h(f,_,g){let d=f>>24&255,p=f>>16&255,S=f>>8&255,E=_>>24&255,k=_>>16&255,x=_>>8&255,C=ls(Kt.relativeLuminance2(E,k,x),Kt.relativeLuminance2(d,p,S));for(;C<g&&(E<255||k<255||x<255);)E=Math.min(255,E+Math.ceil((255-E)*.1)),k=Math.min(255,k+Math.ceil((255-k)*.1)),x=Math.min(255,x+Math.ceil((255-x)*.1)),C=ls(Kt.relativeLuminance2(E,k,x),Kt.relativeLuminance2(d,p,S));return(E<<24|k<<16|x<<8|255)>>>0}e.increaseLuminance=h;function c(f){return[f>>24&255,f>>16&255,f>>8&255,f&255]}e.toChannels=c})(mo||(mo={}));function ar(e){let i=e.toString(16);return i.length<2?"0"+i:i}function ls(e,i){return e<i?(i+.05)/(e+.05):(e+.05)/(i+.05)}var q1=class extends Pl{constructor(e,i,n){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=i,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},bo=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new Di}register(e){let i={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(i),i.id}deregister(e){for(let i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===e)return this._characterJoiners.splice(i,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let i=this._bufferService.buffer.lines.get(e);if(!i||i.length===0)return[];let n=[],a=i.translateToString(!0),h=0,c=0,f=0,_=i.getFg(0),g=i.getBg(0);for(let d=0;d<i.getTrimmedLength();d++)if(i.loadCell(d,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==_||this._workCell.bg!==g){if(d-h>1){let p=this._getJoinedRanges(a,f,c,i,h);for(let S=0;S<p.length;S++)n.push(p[S])}h=d,f=c,_=this._workCell.fg,g=this._workCell.bg}c+=this._workCell.getChars().length||Ps.length}if(this._bufferService.cols-h>1){let d=this._getJoinedRanges(a,f,c,i,h);for(let p=0;p<d.length;p++)n.push(d[p])}return n}_getJoinedRanges(e,i,n,a,h){let c=e.substring(i,n),f=[];try{f=this._characterJoiners[0].handler(c)}catch(_){console.error(_)}for(let _=1;_<this._characterJoiners.length;_++)try{let g=this._characterJoiners[_].handler(c);for(let d=0;d<g.length;d++)bo._mergeRanges(f,g[d])}catch(g){console.error(g)}return this._stringRangesToCellRanges(f,a,h),f}_stringRangesToCellRanges(e,i,n){let a=0,h=!1,c=0,f=e[a];if(f){for(let _=n;_<this._bufferService.cols;_++){let g=i.getWidth(_),d=i.getString(_).length||Ps.length;if(g!==0){if(!h&&f[0]<=c&&(f[0]=_,h=!0),f[1]<=c){if(f[1]=_,f=e[++a],!f)break;f[0]<=c?(f[0]=_,h=!0):h=!1}c+=d}}f&&(f[1]=this._bufferService.cols)}}static _mergeRanges(e,i){let n=!1;for(let a=0;a<e.length;a++){let h=e[a];if(n){if(i[1]<=h[0])return e[a-1][1]=i[1],e;if(i[1]<=h[1])return e[a-1][1]=Math.max(i[1],h[1]),e.splice(a,1),e;e.splice(a,1),a--}else{if(i[1]<=h[0])return e.splice(a,0,i),e;if(i[1]<=h[1])return h[0]=Math.min(i[0],h[0]),e;i[0]<h[1]&&(h[0]=Math.min(i[0],h[0]),n=!0);continue}}return n?e[e.length-1][1]=i[1]:e.push(i),e}};bo=tt([re(0,Yt)],bo);function V1(e){return 57508<=e&&e<=57558}function W1(e){return 9472<=e&&e<=9631}function K1(e){return V1(e)||W1(e)}function Y1(){return{css:{canvas:lo(),cell:lo()},device:{canvas:lo(),cell:lo(),char:{width:0,height:0,left:0,top:0}}}}function lo(){return{width:0,height:0}}var ju=class{constructor(e,i,n,a,h,c,f){this._document=e,this._characterJoinerService=i,this._optionsService=n,this._coreBrowserService=a,this._coreService=h,this._decorationService=c,this._themeService=f,this._workCell=new Di,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,i,n){this._selectionStart=e,this._selectionEnd=i,this._columnSelectMode=n}createRow(e,i,n,a,h,c,f,_,g,d,p){let S=[],E=this._characterJoinerService.getJoinedCharacters(i),k=this._themeService.colors,x=e.getNoBgTrimmedLength();n&&x<c+1&&(x=c+1);let C,T=0,z="",ee=0,F=0,j=0,K=0,te=!1,ue=0,pe=!1,Te=0,lt=0,ye=[],G=d!==-1&&p!==-1;for(let W=0;W<x;W++){e.loadCell(W,this._workCell);let Z=this._workCell.getWidth();if(Z===0)continue;let I=!1,M=W>=lt,H=W,L=this._workCell;if(E.length>0&&W===E[0][0]&&M){let me=E.shift(),Ai=this._isCellInSelection(me[0],i);for(ee=me[0]+1;ee<me[1];ee++)M&&(M=Ai===this._isCellInSelection(ee,i));M&&(M=!n||c<me[0]||c>=me[1]),M?(I=!0,L=new q1(this._workCell,e.translateToString(!0,me[0],me[1]),me[1]-me[0]),H=me[1]-1,Z=L.getWidth()):lt=me[1]}let he=this._isCellInSelection(W,i),b=n&&W===c,U=G&&W>=d&&W<=p,$=!1;this._decorationService.forEachDecorationAtCell(W,i,void 0,me=>{$=!0});let Y=L.getChars()||Ps;if(Y===" "&&(L.isUnderline()||L.isOverline())&&(Y=""),Te=Z*_-g.get(Y,L.isBold(),L.isItalic()),!C)C=this._document.createElement("span");else if(T&&(he&&pe||!he&&!pe&&L.bg===F)&&(he&&pe&&k.selectionForeground||L.fg===j)&&L.extended.ext===K&&U===te&&Te===ue&&!b&&!I&&!$&&M){L.isInvisible()?z+=Ps:z+=Y,T++;continue}else T&&(C.textContent=z),C=this._document.createElement("span"),T=0,z="";if(F=L.bg,j=L.fg,K=L.extended.ext,te=U,ue=Te,pe=he,I&&c>=W&&c<=H&&(c=W),!this._coreService.isCursorHidden&&b&&this._coreService.isCursorInitialized){if(ye.push("xterm-cursor"),this._coreBrowserService.isFocused)f&&ye.push("xterm-cursor-blink"),ye.push(a==="bar"?"xterm-cursor-bar":a==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(h)switch(h){case"outline":ye.push("xterm-cursor-outline");break;case"block":ye.push("xterm-cursor-block");break;case"bar":ye.push("xterm-cursor-bar");break;case"underline":ye.push("xterm-cursor-underline");break}}if(L.isBold()&&ye.push("xterm-bold"),L.isItalic()&&ye.push("xterm-italic"),L.isDim()&&ye.push("xterm-dim"),L.isInvisible()?z=Ps:z=L.getChars()||Ps,L.isUnderline()&&(ye.push(`xterm-underline-${L.extended.underlineStyle}`),z===" "&&(z=""),!L.isUnderlineColorDefault()))if(L.isUnderlineColorRGB())C.style.textDecorationColor=`rgb(${Pl.toColorRGB(L.getUnderlineColor()).join(",")})`;else{let me=L.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&L.isBold()&&me<8&&(me+=8),C.style.textDecorationColor=k.ansi[me].css}L.isOverline()&&(ye.push("xterm-overline"),z===" "&&(z="")),L.isStrikethrough()&&ye.push("xterm-strikethrough"),U&&(C.style.textDecoration="underline");let J=L.getFgColor(),fe=L.getFgColorMode(),le=L.getBgColor(),Ie=L.getBgColorMode(),Be=!!L.isInverse();if(Be){let me=J;J=le,le=me;let Ai=fe;fe=Ie,Ie=Ai}let Ye,Ae,ti=!1;this._decorationService.forEachDecorationAtCell(W,i,void 0,me=>{me.options.layer!=="top"&&ti||(me.backgroundColorRGB&&(Ie=50331648,le=me.backgroundColorRGB.rgba>>8&16777215,Ye=me.backgroundColorRGB),me.foregroundColorRGB&&(fe=50331648,J=me.foregroundColorRGB.rgba>>8&16777215,Ae=me.foregroundColorRGB),ti=me.options.layer==="top")}),!ti&&he&&(Ye=this._coreBrowserService.isFocused?k.selectionBackgroundOpaque:k.selectionInactiveBackgroundOpaque,le=Ye.rgba>>8&16777215,Ie=50331648,ti=!0,k.selectionForeground&&(fe=50331648,J=k.selectionForeground.rgba>>8&16777215,Ae=k.selectionForeground)),ti&&ye.push("xterm-decoration-top");let at;switch(Ie){case 16777216:case 33554432:at=k.ansi[le],ye.push(`xterm-bg-${le}`);break;case 50331648:at=dt.toColor(le>>16,le>>8&255,le&255),this._addStyle(C,`background-color:#${Ig((le>>>0).toString(16),"0",6)}`);break;case 0:default:Be?(at=k.foreground,ye.push("xterm-bg-257")):at=k.background}switch(Ye||L.isDim()&&(Ye=je.multiplyOpacity(at,.5)),fe){case 16777216:case 33554432:L.isBold()&&J<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(J+=8),this._applyMinimumContrast(C,at,k.ansi[J],L,Ye,void 0)||ye.push(`xterm-fg-${J}`);break;case 50331648:let me=dt.toColor(J>>16&255,J>>8&255,J&255);this._applyMinimumContrast(C,at,me,L,Ye,Ae)||this._addStyle(C,`color:#${Ig(J.toString(16),"0",6)}`);break;case 0:default:this._applyMinimumContrast(C,at,k.foreground,L,Ye,Ae)||Be&&ye.push("xterm-fg-257")}ye.length&&(C.className=ye.join(" "),ye.length=0),!b&&!I&&!$&&M?T++:C.textContent=z,Te!==this.defaultSpacing&&(C.style.letterSpacing=`${Te}px`),S.push(C),W=H}return C&&T&&(C.textContent=z),S}_applyMinimumContrast(e,i,n,a,h,c){if(this._optionsService.rawOptions.minimumContrastRatio===1||K1(a.getCode()))return!1;let f=this._getContrastCache(a),_;if(!h&&!c&&(_=f.getColor(i.rgba,n.rgba)),_===void 0){let g=this._optionsService.rawOptions.minimumContrastRatio/(a.isDim()?2:1);_=je.ensureContrastRatio(h||i,c||n,g),f.setColor((h||i).rgba,(c||n).rgba,_??null)}return _?(this._addStyle(e,`color:${_.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,i){e.setAttribute("style",`${e.getAttribute("style")||""}${i};`)}_isCellInSelection(e,i){let n=this._selectionStart,a=this._selectionEnd;return!n||!a?!1:this._columnSelectMode?n[0]<=a[0]?e>=n[0]&&i>=n[1]&&e<a[0]&&i<=a[1]:e<n[0]&&i>=n[1]&&e>=a[0]&&i<=a[1]:i>n[1]&&i<a[1]||n[1]===a[1]&&i===n[1]&&e>=n[0]&&e<a[0]||n[1]<a[1]&&i===a[1]&&e<a[0]||n[1]<a[1]&&i===n[1]&&e>=n[0]}};ju=tt([re(1,Nm),re(2,jt),re(3,os),re(4,vr),re(5,ql),re(6,hn)],ju);function Ig(e,i,n){for(;e.length<n;)e=i+e;return e}var j1=class{constructor(e,i){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let n=e.createElement("span");n.classList.add("xterm-char-measure-element");let a=e.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontWeight="bold";let h=e.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontStyle="italic";let c=e.createElement("span");c.classList.add("xterm-char-measure-element"),c.style.fontWeight="bold",c.style.fontStyle="italic",this._measureElements=[n,a,h,c],this._container.appendChild(n),this._container.appendChild(a),this._container.appendChild(h),this._container.appendChild(c),i.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,i,n,a){e===this._font&&i===this._fontSize&&n===this._weight&&a===this._weightBold||(this._font=e,this._fontSize=i,this._weight=n,this._weightBold=a,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${n}`,this._measureElements[1].style.fontWeight=`${a}`,this._measureElements[2].style.fontWeight=`${n}`,this._measureElements[3].style.fontWeight=`${a}`,this.clear())}get(e,i,n){let a=0;if(!i&&!n&&e.length===1&&(a=e.charCodeAt(0))<256){if(this._flat[a]!==-9999)return this._flat[a];let f=this._measure(e,0);return f>0&&(this._flat[a]=f),f}let h=e;i&&(h+="B"),n&&(h+="I");let c=this._holey.get(h);if(c===void 0){let f=0;i&&(f|=1),n&&(f|=2),c=this._measure(e,f),c>0&&this._holey.set(h,c)}return c}_measure(e,i){let n=this._measureElements[i];return n.textContent=e.repeat(32),n.offsetWidth/32}},I1=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,i,n,a=!1){if(this.selectionStart=i,this.selectionEnd=n,!i||!n||i[0]===n[0]&&i[1]===n[1]){this.clear();return}let h=e.buffers.active.ydisp,c=i[1]-h,f=n[1]-h,_=Math.max(c,0),g=Math.min(f,e.rows-1);if(_>=e.rows||g<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=a,this.viewportStartRow=c,this.viewportEndRow=f,this.viewportCappedStartRow=_,this.viewportCappedEndRow=g,this.startCol=i[0],this.endCol=n[0]}isCellSelected(e,i,n){return this.hasSelection?(n-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?i>=this.startCol&&n>=this.viewportCappedStartRow&&i<this.endCol&&n<=this.viewportCappedEndRow:i<this.startCol&&n>=this.viewportCappedStartRow&&i>=this.endCol&&n<=this.viewportCappedEndRow:n>this.viewportStartRow&&n<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&n===this.viewportStartRow&&i>=this.startCol&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportEndRow&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportStartRow&&i>=this.startCol):!1}};function F1(){return new I1}var ou="xterm-dom-renderer-owner-",wi="xterm-rows",ao="xterm-fg-",Fg="xterm-bg-",ul="xterm-focus",oo="xterm-selection",X1=1,Iu=class extends we{constructor(e,i,n,a,h,c,f,_,g,d,p,S,E,k){super(),this._terminal=e,this._document=i,this._element=n,this._screenElement=a,this._viewportElement=h,this._helperContainer=c,this._linkifier2=f,this._charSizeService=g,this._optionsService=d,this._bufferService=p,this._coreService=S,this._coreBrowserService=E,this._themeService=k,this._terminalClass=X1++,this._rowElements=[],this._selectionRenderModel=F1(),this.onRequestRedraw=this._register(new X).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(wi),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(oo),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=Y1(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(x=>this._injectCss(x))),this._injectCss(this._themeService.colors),this._rowFactory=_.createInstance(ju,document),this._element.classList.add(ou+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(x=>this._handleLinkHover(x))),this._register(this._linkifier2.onHideLinkUnderline(x=>this._handleLinkLeave(x))),this._register(Xe(()=>{this._element.classList.remove(ou+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new j1(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let n of this._rowElements)n.style.width=`${this.dimensions.css.canvas.width}px`,n.style.height=`${this.dimensions.css.cell.height}px`,n.style.lineHeight=`${this.dimensions.css.cell.height}px`,n.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let i=`${this._terminalSelector} .${wi} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=i,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let i=`${this._terminalSelector} .${wi} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;i+=`${this._terminalSelector} .${wi} .xterm-dim { color: ${je.multiplyOpacity(e.foreground,.5).css};}`,i+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let n=`blink_underline_${this._terminalClass}`,a=`blink_bar_${this._terminalClass}`,h=`blink_block_${this._terminalClass}`;i+=`@keyframes ${n} { 50% {  border-bottom-style: hidden; }}`,i+=`@keyframes ${a} { 50% {  box-shadow: none; }}`,i+=`@keyframes ${h} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,i+=`${this._terminalSelector} .${wi}.${ul} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${wi}.${ul} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${a} 1s step-end infinite;}${this._terminalSelector} .${wi}.${ul} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${h} 1s step-end infinite;}${this._terminalSelector} .${wi} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${wi} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${wi} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${wi} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${wi} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,i+=`${this._terminalSelector} .${oo} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${oo} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${oo} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[c,f]of e.ansi.entries())i+=`${this._terminalSelector} .${ao}${c} { color: ${f.css}; }${this._terminalSelector} .${ao}${c}.xterm-dim { color: ${je.multiplyOpacity(f,.5).css}; }${this._terminalSelector} .${Fg}${c} { background-color: ${f.css}; }`;i+=`${this._terminalSelector} .${ao}257 { color: ${je.opaque(e.background).css}; }${this._terminalSelector} .${ao}257.xterm-dim { color: ${je.multiplyOpacity(je.opaque(e.background),.5).css}; }${this._terminalSelector} .${Fg}257 { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=i}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,i){for(let n=this._rowElements.length;n<=i;n++){let a=this._document.createElement("div");this._rowContainer.appendChild(a),this._rowElements.push(a)}for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,i){this._refreshRowElements(e,i),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(ul),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(ul),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,i,n){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,i,n),this.renderRows(0,this._bufferService.rows-1),!e||!i||(this._selectionRenderModel.update(this._terminal,e,i,n),!this._selectionRenderModel.hasSelection))return;let a=this._selectionRenderModel.viewportStartRow,h=this._selectionRenderModel.viewportEndRow,c=this._selectionRenderModel.viewportCappedStartRow,f=this._selectionRenderModel.viewportCappedEndRow,_=this._document.createDocumentFragment();if(n){let g=e[0]>i[0];_.appendChild(this._createSelectionElement(c,g?i[0]:e[0],g?e[0]:i[0],f-c+1))}else{let g=a===c?e[0]:0,d=c===h?i[0]:this._bufferService.cols;_.appendChild(this._createSelectionElement(c,g,d));let p=f-c-1;if(_.appendChild(this._createSelectionElement(c+1,0,this._bufferService.cols,p)),c!==f){let S=h===f?i[0]:this._bufferService.cols;_.appendChild(this._createSelectionElement(f,0,S))}}this._selectionContainer.appendChild(_)}_createSelectionElement(e,i,n,a=1){let h=this._document.createElement("div"),c=i*this.dimensions.css.cell.width,f=this.dimensions.css.cell.width*(n-i);return c+f>this.dimensions.css.canvas.width&&(f=this.dimensions.css.canvas.width-c),h.style.height=`${a*this.dimensions.css.cell.height}px`,h.style.top=`${e*this.dimensions.css.cell.height}px`,h.style.left=`${c}px`,h.style.width=`${f}px`,h}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,i){let n=this._bufferService.buffer,a=n.ybase+n.y,h=Math.min(n.x,this._bufferService.cols-1),c=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,f=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,_=this._optionsService.rawOptions.cursorInactiveStyle;for(let g=e;g<=i;g++){let d=g+n.ydisp,p=this._rowElements[g],S=n.lines.get(d);if(!p||!S)break;p.replaceChildren(...this._rowFactory.createRow(S,d,d===a,f,_,h,c,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${ou}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,i,n,a,h,c){n<0&&(e=0),a<0&&(i=0);let f=this._bufferService.rows-1;n=Math.max(Math.min(n,f),0),a=Math.max(Math.min(a,f),0),h=Math.min(h,this._bufferService.cols);let _=this._bufferService.buffer,g=_.ybase+_.y,d=Math.min(_.x,h-1),p=this._optionsService.rawOptions.cursorBlink,S=this._optionsService.rawOptions.cursorStyle,E=this._optionsService.rawOptions.cursorInactiveStyle;for(let k=n;k<=a;++k){let x=k+_.ydisp,C=this._rowElements[k],T=_.lines.get(x);if(!C||!T)break;C.replaceChildren(...this._rowFactory.createRow(T,x,x===g,S,E,d,p,this.dimensions.css.cell.width,this._widthCache,c?k===n?e:0:-1,c?(k===a?i:h)-1:-1))}}};Iu=tt([re(7,hf),re(8,Do),re(9,jt),re(10,Yt),re(11,vr),re(12,os),re(13,hn)],Iu);var Fu=class extends we{constructor(e,i,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this._register(new X),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new $1(this._optionsService))}catch{this._measureStrategy=this._register(new G1(e,i,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};Fu=tt([re(2,jt)],Fu);var tp=class extends we{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,i){e!==void 0&&e>0&&i!==void 0&&i>0&&(this._result.width=e,this._result.height=i)}},G1=class extends tp{constructor(e,i,n){super(),this._document=e,this._parentElement=i,this._optionsService=n,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},$1=class extends tp{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let i=this._ctx.measureText("W");if(!("width"in i&&"fontBoundingBoxAscent"in i&&"fontBoundingBoxDescent"in i))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},Z1=class extends we{constructor(e,i,n){super(),this._textarea=e,this._window=i,this.mainDocument=n,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new Q1(this._window)),this._onDprChange=this._register(new X),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new X),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(a=>this._screenDprMonitor.setWindow(a))),this._register(Lt.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(ge(this._textarea,"focus",()=>this._isFocused=!0)),this._register(ge(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},Q1=class extends we{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new on),this._onDprChange=this._register(new X),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(Xe(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=ge(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var e;this._outerListener&&((e=this._resolutionMediaMatchList)==null||e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},J1=class extends we{constructor(){super(),this.linkProviders=[],this._register(Xe(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let i=this.linkProviders.indexOf(e);i!==-1&&this.linkProviders.splice(i,1)}}}};function mf(e,i,n){let a=n.getBoundingClientRect(),h=e.getComputedStyle(n),c=parseInt(h.getPropertyValue("padding-left")),f=parseInt(h.getPropertyValue("padding-top"));return[i.clientX-a.left-c,i.clientY-a.top-f]}function eb(e,i,n,a,h,c,f,_,g){if(!c)return;let d=mf(e,i,n);if(d)return d[0]=Math.ceil((d[0]+(g?f/2:0))/f),d[1]=Math.ceil(d[1]/_),d[0]=Math.min(Math.max(d[0],1),a+(g?1:0)),d[1]=Math.min(Math.max(d[1],1),h),d}var Xu=class{constructor(e,i){this._renderService=e,this._charSizeService=i}getCoords(e,i,n,a,h){return eb(window,e,i,n,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,h)}getMouseReportCoords(e,i){let n=mf(window,e,i);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};Xu=tt([re(0,hs),re(1,Do)],Xu);var tb=class{constructor(e,i){this._renderCallback=e,this._coreBrowserService=i,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(e,i,n){this._rowCount=n,e=e!==void 0?e:0,i=i!==void 0?i:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,i):i,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let e=Math.max(this._rowStart,0),i=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,i),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}},ip={};uy(ip,{getSafariVersion:()=>sb,isChromeOS:()=>lp,isFirefox:()=>sp,isIpad:()=>rb,isIphone:()=>nb,isLegacyEdge:()=>ib,isLinux:()=>pf,isMac:()=>Co,isNode:()=>ko,isSafari:()=>rp,isWindows:()=>np});var ko=typeof process<"u"&&"title"in process,Vl=ko?"node":navigator.userAgent,Wl=ko?"node":navigator.platform,sp=Vl.includes("Firefox"),ib=Vl.includes("Edge"),rp=/^((?!chrome|android).)*safari/i.test(Vl);function sb(){if(!rp)return 0;let e=Vl.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var Co=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(Wl),rb=Wl==="iPad",nb=Wl==="iPhone",np=["Windows","Win16","Win32","WinCE"].includes(Wl),pf=Wl.indexOf("Linux")>=0,lp=/\bCrOS\b/.test(Vl),ap=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let i=0,n=0,a=e.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(i=performance.now(),this._tasks[this._i]()||this._i++,i=Math.max(1,performance.now()-i),n=Math.max(i,n),h=e.timeRemaining(),n*1.5>h){a-i<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-i))}ms`),this._start();return}a=h}this.clear()}},lb=class extends ap{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let i=performance.now()+e;return{timeRemaining:()=>Math.max(0,i-performance.now())}}},ab=class extends ap{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},wo=!ko&&"requestIdleCallback"in window?ab:lb,ob=class{constructor(){this._queue=new wo}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},Gu=class extends we{constructor(e,i,n,a,h,c,f,_,g){super(),this._rowCount=e,this._optionsService=n,this._charSizeService=a,this._coreService=h,this._coreBrowserService=_,this._renderer=this._register(new on),this._pausedResizeTask=new ob,this._observerDisposable=this._register(new on),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new X),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new X),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new X),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new X),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new tb((d,p)=>this._renderRows(d,p),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new hb(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(Xe(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(f.onResize(()=>this._fullRefresh())),this._register(f.buffers.onBufferActivate(()=>{var d;return(d=this._renderer.value)==null?void 0:d.clear()})),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(c.onDecorationRegistered(()=>this._fullRefresh())),this._register(c.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(f.cols,f.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(f.buffer.y,f.buffer.y,!0))),this._register(g.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,i),this._register(this._coreBrowserService.onWindowChange(d=>this._registerIntersectionObserver(d,i)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,i){if("IntersectionObserver"in e){let n=new e.IntersectionObserver(a=>this._handleIntersectionChange(a[a.length-1]),{threshold:0});n.observe(i),this._observerDisposable.value=Xe(()=>n.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,i,n=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,i);return}let a=this._syncOutputHandler.flush();a&&(e=Math.min(e,a.start),i=Math.max(i,a.end)),n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,i,this._rowCount)}_renderRows(e,i){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,i);return}e=Math.min(e,this._rowCount-1),i=Math.min(i,this._rowCount-1),this._renderer.value.renderRows(e,i),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:i}),this._onRender.fire({start:e,end:i}),this._isNextRenderRedrawOnly=!0}}resize(e,i){this._rowCount=i,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(i=>this.refreshRows(i.start,i.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,i;this._renderer.value&&((i=(e=this._renderer.value).clearTextureAtlas)==null||i.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,i){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var n;return(n=this._renderer.value)==null?void 0:n.handleResize(e,i)}):this._renderer.value.handleResize(e,i),this._fullRefresh())}handleCharSizeChanged(){var e;(e=this._renderer.value)==null||e.handleCharSizeChanged()}handleBlur(){var e;(e=this._renderer.value)==null||e.handleBlur()}handleFocus(){var e;(e=this._renderer.value)==null||e.handleFocus()}handleSelectionChanged(e,i,n){var a;this._selectionState.start=e,this._selectionState.end=i,this._selectionState.columnSelectMode=n,(a=this._renderer.value)==null||a.handleSelectionChanged(e,i,n)}handleCursorMove(){var e;(e=this._renderer.value)==null||e.handleCursorMove()}clear(){var e;(e=this._renderer.value)==null||e.clear()}};Gu=tt([re(2,jt),re(3,Do),re(4,vr),re(5,ql),re(6,Yt),re(7,os),re(8,hn)],Gu);var hb=class{constructor(e,i,n){this._coreBrowserService=e,this._coreService=i,this._onTimeout=n,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(e,i){this._isBuffering?(this._start=Math.min(this._start,e),this._end=Math.max(this._end,i)):(this._start=e,this._end=i,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let e={start:this._start,end:this._end};return this._isBuffering=!1,e}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function cb(e,i,n,a){let h=n.buffer.x,c=n.buffer.y;if(!n.buffer.hasScrollback)return db(h,c,e,i,n,a)+To(c,i,n,a)+_b(h,c,e,i,n,a);let f;if(c===i)return f=h>e?"D":"C",Ml(Math.abs(h-e),xl(f,a));f=c>i?"D":"C";let _=Math.abs(c-i),g=fb(c>i?e:h,n)+(_-1)*n.cols+1+ub(c>i?h:e);return Ml(g,xl(f,a))}function ub(e,i){return e-1}function fb(e,i){return i.cols-e}function db(e,i,n,a,h,c){return To(i,a,h,c).length===0?"":Ml(hp(e,i,e,i-_r(i,h),!1,h).length,xl("D",c))}function To(e,i,n,a){let h=e-_r(e,n),c=i-_r(i,n),f=Math.abs(h-c)-vb(e,i,n);return Ml(f,xl(op(e,i),a))}function _b(e,i,n,a,h,c){let f;To(i,a,h,c).length>0?f=a-_r(a,h):f=i;let _=a,g=gb(e,i,n,a,h,c);return Ml(hp(e,f,n,_,g==="C",h).length,xl(g,c))}function vb(e,i,n){var f;let a=0,h=e-_r(e,n),c=i-_r(i,n);for(let _=0;_<Math.abs(h-c);_++){let g=op(e,i)==="A"?-1:1;(f=n.buffer.lines.get(h+g*_))!=null&&f.isWrapped&&a++}return a}function _r(e,i){let n=0,a=i.buffer.lines.get(e),h=a==null?void 0:a.isWrapped;for(;h&&e>=0&&e<i.rows;)n++,a=i.buffer.lines.get(--e),h=a==null?void 0:a.isWrapped;return n}function gb(e,i,n,a,h,c){let f;return To(n,a,h,c).length>0?f=a-_r(a,h):f=i,e<n&&f<=a||e>=n&&f<a?"C":"D"}function op(e,i){return e>i?"A":"B"}function hp(e,i,n,a,h,c){let f=e,_=i,g="";for(;(f!==n||_!==a)&&_>=0&&_<c.buffer.lines.length;)f+=h?1:-1,h&&f>c.cols-1?(g+=c.buffer.translateBufferLineToString(_,!1,e,f),f=0,e=0,_++):!h&&f<0&&(g+=c.buffer.translateBufferLineToString(_,!1,0,e+1),f=c.cols-1,e=f,_--);return g+c.buffer.translateBufferLineToString(_,!1,e,f)}function xl(e,i){let n=i?"O":"[";return q.ESC+n+e}function Ml(e,i){e=Math.floor(e);let n="";for(let a=0;a<e;a++)n+=i;return n}var mb=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,i=this.selectionEnd;return!e||!i?!1:e[1]>i[1]||e[1]===i[1]&&e[0]>i[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function Xg(e,i){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return i*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var Gg=50,pb=15,Sb=50,yb=500,bb="",Cb=new RegExp(bb,"g"),$u=class extends we{constructor(e,i,n,a,h,c,f,_,g){super(),this._element=e,this._screenElement=i,this._linkifier=n,this._bufferService=a,this._coreService=h,this._mouseService=c,this._optionsService=f,this._renderService=_,this._coreBrowserService=g,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new Di,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new X),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new X),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new X),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new X),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=d=>this._handleMouseMove(d),this._mouseUpListener=d=>this._handleMouseUp(d),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(d=>this._handleTrim(d)),this._register(this._bufferService.buffers.onBufferActivate(d=>this._handleBufferActivate(d))),this.enable(),this._model=new mb(this._bufferService),this._activeSelectionMode=0,this._register(Xe(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(d=>{d.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!e||!i?!1:e[0]!==i[0]||e[1]!==i[1]}get selectionText(){let e=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;if(!e||!i)return"";let n=this._bufferService.buffer,a=[];if(this._activeSelectionMode===3){if(e[0]===i[0])return"";let h=e[0]<i[0]?e[0]:i[0],c=e[0]<i[0]?i[0]:e[0];for(let f=e[1];f<=i[1];f++){let _=n.translateBufferLineToString(f,!0,h,c);a.push(_)}}else{let h=e[1]===i[1]?i[0]:void 0;a.push(n.translateBufferLineToString(e[1],!0,e[0],h));for(let c=e[1]+1;c<=i[1]-1;c++){let f=n.lines.get(c),_=n.translateBufferLineToString(c,!0);f!=null&&f.isWrapped?a[a.length-1]+=_:a.push(_)}if(e[1]!==i[1]){let c=n.lines.get(i[1]),f=n.translateBufferLineToString(i[1],!0,0,i[0]);c&&c.isWrapped?a[a.length-1]+=f:a.push(f)}}return a.map(h=>h.replace(Cb," ")).join(np?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),pf&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let i=this._getMouseBufferCoords(e),n=this._model.finalSelectionStart,a=this._model.finalSelectionEnd;return!n||!a||!i?!1:this._areCoordsInSelection(i,n,a)}isCellInSelection(e,i){let n=this._model.finalSelectionStart,a=this._model.finalSelectionEnd;return!n||!a?!1:this._areCoordsInSelection([e,i],n,a)}_areCoordsInSelection(e,i,n){return e[1]>i[1]&&e[1]<n[1]||i[1]===n[1]&&e[1]===i[1]&&e[0]>=i[0]&&e[0]<n[0]||i[1]<n[1]&&e[1]===n[1]&&e[0]<n[0]||i[1]<n[1]&&e[1]===i[1]&&e[0]>=i[0]}_selectWordAtCursor(e,i){var h,c;let n=(c=(h=this._linkifier.currentLink)==null?void 0:h.link)==null?void 0:c.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=Xg(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let a=this._getMouseBufferCoords(e);return a?(this._selectWordAt(a,i),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,i){this._model.clearSelection(),e=Math.max(e,0),i=Math.min(i,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,i],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let i=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(i)return i[0]--,i[1]--,i[1]+=this._bufferService.buffer.ydisp,i}_getMouseEventScrollAmount(e){let i=mf(this._coreBrowserService.window,e,this._screenElement)[1],n=this._renderService.dimensions.css.canvas.height;return i>=0&&i<=n?0:(i>n&&(i-=n),i=Math.min(Math.max(i,-50),Gg),i/=Gg,i/Math.abs(i)+Math.round(i*(pb-1)))}shouldForceSelection(e){return Co?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),Sb)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let i=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);i&&i.length!==this._model.selectionStart[0]&&i.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let i=this._getMouseBufferCoords(e);i&&(this._activeSelectionMode=2,this._selectLineAt(i[1]))}shouldColumnSelect(e){return e.altKey&&!(Co&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let i=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){let a=n.lines.get(this._model.selectionEnd[1]);a&&a.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!i||i[0]!==this._model.selectionEnd[0]||i[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let i=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&i<yb&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let n=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&n[0]!==void 0&&n[1]!==void 0){let a=cb(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(a,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,i=this._model.finalSelectionEnd,n=!!e&&!!i&&(e[0]!==i[0]||e[1]!==i[1]);if(!n){this._oldHasSelection&&this._fireOnSelectionChange(e,i,n);return}!e||!i||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||i[0]!==this._oldSelectionEnd[0]||i[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,i,n)}_fireOnSelectionChange(e,i,n){this._oldSelectionStart=e,this._oldSelectionEnd=i,this._oldHasSelection=n,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(i=>this._handleTrim(i))}_convertViewportColToCharacterIndex(e,i){let n=i;for(let a=0;i>=a;a++){let h=e.loadCell(a,this._workCell).getChars().length;this._workCell.getWidth()===0?n--:h>1&&i!==a&&(n+=h-1)}return n}setSelection(e,i,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,i],this._model.selectionStartLength=n,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,i,n=!0,a=!0){if(e[0]>=this._bufferService.cols)return;let h=this._bufferService.buffer,c=h.lines.get(e[1]);if(!c)return;let f=h.translateBufferLineToString(e[1],!1),_=this._convertViewportColToCharacterIndex(c,e[0]),g=_,d=e[0]-_,p=0,S=0,E=0,k=0;if(f.charAt(_)===" "){for(;_>0&&f.charAt(_-1)===" ";)_--;for(;g<f.length&&f.charAt(g+1)===" ";)g++}else{let T=e[0],z=e[0];c.getWidth(T)===0&&(p++,T--),c.getWidth(z)===2&&(S++,z++);let ee=c.getString(z).length;for(ee>1&&(k+=ee-1,g+=ee-1);T>0&&_>0&&!this._isCharWordSeparator(c.loadCell(T-1,this._workCell));){c.loadCell(T-1,this._workCell);let F=this._workCell.getChars().length;this._workCell.getWidth()===0?(p++,T--):F>1&&(E+=F-1,_-=F-1),_--,T--}for(;z<c.length&&g+1<f.length&&!this._isCharWordSeparator(c.loadCell(z+1,this._workCell));){c.loadCell(z+1,this._workCell);let F=this._workCell.getChars().length;this._workCell.getWidth()===2?(S++,z++):F>1&&(k+=F-1,g+=F-1),g++,z++}}g++;let x=_+d-p+E,C=Math.min(this._bufferService.cols,g-_+p+S-E-k);if(!(!i&&f.slice(_,g).trim()==="")){if(n&&x===0&&c.getCodePoint(0)!==32){let T=h.lines.get(e[1]-1);if(T&&c.isWrapped&&T.getCodePoint(this._bufferService.cols-1)!==32){let z=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(z){let ee=this._bufferService.cols-z.start;x-=ee,C+=ee}}}if(a&&x+C===this._bufferService.cols&&c.getCodePoint(this._bufferService.cols-1)!==32){let T=h.lines.get(e[1]+1);if(T!=null&&T.isWrapped&&T.getCodePoint(0)!==32){let z=this._getWordAt([0,e[1]+1],!1,!1,!0);z&&(C+=z.length)}}return{start:x,length:C}}}_selectWordAt(e,i){let n=this._getWordAt(e,i);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[n.start,e[1]],this._model.selectionStartLength=n.length}}_selectToWordAt(e){let i=this._getWordAt(e,!0);if(i){let n=e[1];for(;i.start<0;)i.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;i.start+i.length>this._bufferService.cols;)i.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?i.start:i.start+i.length,n]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let i=this._bufferService.buffer.getWrappedRangeForLine(e),n={start:{x:0,y:i.first},end:{x:this._bufferService.cols-1,y:i.last}};this._model.selectionStart=[0,i.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=Xg(n,this._bufferService.cols)}};$u=tt([re(3,Yt),re(4,vr),re(5,cf),re(6,jt),re(7,hs),re(8,os)],$u);var $g=class{constructor(){this._data={}}set(e,i,n){this._data[e]||(this._data[e]={}),this._data[e][i]=n}get(e,i){return this._data[e]?this._data[e][i]:void 0}clear(){this._data={}}},Zg=class{constructor(){this._color=new $g,this._css=new $g}setCss(e,i,n){this._css.set(e,i,n)}getCss(e,i){return this._css.get(e,i)}setColor(e,i,n){this._color.set(e,i,n)}getColor(e,i){return this._color.get(e,i)}clear(){this._color.clear(),this._css.clear()}},mt=Object.freeze((()=>{let e=[Ze.toColor("#2e3436"),Ze.toColor("#cc0000"),Ze.toColor("#4e9a06"),Ze.toColor("#c4a000"),Ze.toColor("#3465a4"),Ze.toColor("#75507b"),Ze.toColor("#06989a"),Ze.toColor("#d3d7cf"),Ze.toColor("#555753"),Ze.toColor("#ef2929"),Ze.toColor("#8ae234"),Ze.toColor("#fce94f"),Ze.toColor("#729fcf"),Ze.toColor("#ad7fa8"),Ze.toColor("#34e2e2"),Ze.toColor("#eeeeec")],i=[0,95,135,175,215,255];for(let n=0;n<216;n++){let a=i[n/36%6|0],h=i[n/6%6|0],c=i[n%6];e.push({css:dt.toCss(a,h,c),rgba:dt.toRgba(a,h,c)})}for(let n=0;n<24;n++){let a=8+n*10;e.push({css:dt.toCss(a,a,a),rgba:dt.toRgba(a,a,a)})}return e})()),or=Ze.toColor("#ffffff"),ml=Ze.toColor("#000000"),Qg=Ze.toColor("#ffffff"),Jg=ml,fl={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},wb=or,Zu=class extends we{constructor(e){super(),this._optionsService=e,this._contrastCache=new Zg,this._halfContrastCache=new Zg,this._onChangeColors=this._register(new X),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:or,background:ml,cursor:Qg,cursorAccent:Jg,selectionForeground:void 0,selectionBackgroundTransparent:fl,selectionBackgroundOpaque:je.blend(ml,fl),selectionInactiveBackgroundTransparent:fl,selectionInactiveBackgroundOpaque:je.blend(ml,fl),scrollbarSliderBackground:je.opacity(or,.2),scrollbarSliderHoverBackground:je.opacity(or,.4),scrollbarSliderActiveBackground:je.opacity(or,.5),overviewRulerBorder:or,ansi:mt.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let i=this._colors;if(i.foreground=Pe(e.foreground,or),i.background=Pe(e.background,ml),i.cursor=je.blend(i.background,Pe(e.cursor,Qg)),i.cursorAccent=je.blend(i.background,Pe(e.cursorAccent,Jg)),i.selectionBackgroundTransparent=Pe(e.selectionBackground,fl),i.selectionBackgroundOpaque=je.blend(i.background,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundTransparent=Pe(e.selectionInactiveBackground,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundOpaque=je.blend(i.background,i.selectionInactiveBackgroundTransparent),i.selectionForeground=e.selectionForeground?Pe(e.selectionForeground,jg):void 0,i.selectionForeground===jg&&(i.selectionForeground=void 0),je.isOpaque(i.selectionBackgroundTransparent)&&(i.selectionBackgroundTransparent=je.opacity(i.selectionBackgroundTransparent,.3)),je.isOpaque(i.selectionInactiveBackgroundTransparent)&&(i.selectionInactiveBackgroundTransparent=je.opacity(i.selectionInactiveBackgroundTransparent,.3)),i.scrollbarSliderBackground=Pe(e.scrollbarSliderBackground,je.opacity(i.foreground,.2)),i.scrollbarSliderHoverBackground=Pe(e.scrollbarSliderHoverBackground,je.opacity(i.foreground,.4)),i.scrollbarSliderActiveBackground=Pe(e.scrollbarSliderActiveBackground,je.opacity(i.foreground,.5)),i.overviewRulerBorder=Pe(e.overviewRulerBorder,wb),i.ansi=mt.slice(),i.ansi[0]=Pe(e.black,mt[0]),i.ansi[1]=Pe(e.red,mt[1]),i.ansi[2]=Pe(e.green,mt[2]),i.ansi[3]=Pe(e.yellow,mt[3]),i.ansi[4]=Pe(e.blue,mt[4]),i.ansi[5]=Pe(e.magenta,mt[5]),i.ansi[6]=Pe(e.cyan,mt[6]),i.ansi[7]=Pe(e.white,mt[7]),i.ansi[8]=Pe(e.brightBlack,mt[8]),i.ansi[9]=Pe(e.brightRed,mt[9]),i.ansi[10]=Pe(e.brightGreen,mt[10]),i.ansi[11]=Pe(e.brightYellow,mt[11]),i.ansi[12]=Pe(e.brightBlue,mt[12]),i.ansi[13]=Pe(e.brightMagenta,mt[13]),i.ansi[14]=Pe(e.brightCyan,mt[14]),i.ansi[15]=Pe(e.brightWhite,mt[15]),e.extendedAnsi){let n=Math.min(i.ansi.length-16,e.extendedAnsi.length);for(let a=0;a<n;a++)i.ansi[a+16]=Pe(e.extendedAnsi[a],mt[a+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let i=0;i<this._restoreColors.ansi.length;++i)this._colors.ansi[i]=this._restoreColors.ansi[i];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};Zu=tt([re(0,jt)],Zu);function Pe(e,i){if(e!==void 0)try{return Ze.toColor(e)}catch{}return i}var Eb=class{constructor(...e){this._entries=new Map;for(let[i,n]of e)this.set(i,n)}set(e,i){let n=this._entries.get(e);return this._entries.set(e,i),n}forEach(e){for(let[i,n]of this._entries.entries())e(i,n)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},xb=class{constructor(){this._services=new Eb,this._services.set(hf,this)}setService(e,i){this._services.set(e,i)}getService(e){return this._services.get(e)}createInstance(e,...i){let n=py(e).sort((c,f)=>c.index-f.index),a=[];for(let c of n){let f=this._services.get(c.id);if(!f)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${c.id._id}.`);a.push(f)}let h=n.length>0?n[0].index:i.length;if(i.length!==h)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${h+1} conflicts with ${i.length} static arguments`);return new e(...i,...a)}},Mb={trace:0,debug:1,info:2,warn:3,error:4,off:5},Db="xterm.js: ",Qu=class extends we{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=Mb[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let i=0;i<e.length;i++)typeof e[i]=="function"&&(e[i]=e[i]())}_log(e,i,n){this._evalLazyOptionalParams(n),e.call(console,(this._optionsService.options.logger?"":Db)+i,...n)}trace(e,...i){var n;this._logLevel<=0&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.trace.bind(this._optionsService.options.logger))??console.log,e,i)}debug(e,...i){var n;this._logLevel<=1&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.debug.bind(this._optionsService.options.logger))??console.log,e,i)}info(e,...i){var n;this._logLevel<=2&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.info.bind(this._optionsService.options.logger))??console.info,e,i)}warn(e,...i){var n;this._logLevel<=3&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.warn.bind(this._optionsService.options.logger))??console.warn,e,i)}error(e,...i){var n;this._logLevel<=4&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.error.bind(this._optionsService.options.logger))??console.error,e,i)}};Qu=tt([re(0,jt)],Qu);var em=class extends we{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new X),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new X),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new X),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let i=new Array(e);for(let n=0;n<Math.min(e,this.length);n++)i[n]=this._array[this._getCyclicIndex(n)];this._array=i,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let i=this._length;i<e;i++)this._array[i]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,i){this._array[this._getCyclicIndex(e)]=i}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,i,...n){if(i){for(let a=e;a<this._length-i;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+i)];this._length-=i,this.onDeleteEmitter.fire({index:e,amount:i})}for(let a=this._length-1;a>=e;a--)this._array[this._getCyclicIndex(a+n.length)]=this._array[this._getCyclicIndex(a)];for(let a=0;a<n.length;a++)this._array[this._getCyclicIndex(e+a)]=n[a];if(n.length&&this.onInsertEmitter.fire({index:e,amount:n.length}),this._length+n.length>this._maxLength){let a=this._length+n.length-this._maxLength;this._startIndex+=a,this._length=this._maxLength,this.onTrimEmitter.fire(a)}else this._length+=n.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,i,n){if(!(i<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(let h=i-1;h>=0;h--)this.set(e+h+n,this.get(e+h));let a=e+i+n-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let a=0;a<i;a++)this.set(e+a+n,this.get(e+a))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},Ce=3,ut=Object.freeze(new Pl),ho=0,hu=2,pl=class cp{constructor(i,n,a=!1){this.isWrapped=a,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(i*Ce);let h=n||Di.fromCharData([0,Tm,1,0]);for(let c=0;c<i;++c)this.setCell(c,h);this.length=i}get(i){let n=this._data[i*Ce+0],a=n&2097151;return[this._data[i*Ce+1],n&2097152?this._combined[i]:a?Us(a):"",n>>22,n&2097152?this._combined[i].charCodeAt(this._combined[i].length-1):a]}set(i,n){this._data[i*Ce+1]=n[0],n[1].length>1?(this._combined[i]=n[1],this._data[i*Ce+0]=i|2097152|n[2]<<22):this._data[i*Ce+0]=n[1].charCodeAt(0)|n[2]<<22}getWidth(i){return this._data[i*Ce+0]>>22}hasWidth(i){return this._data[i*Ce+0]&12582912}getFg(i){return this._data[i*Ce+1]}getBg(i){return this._data[i*Ce+2]}hasContent(i){return this._data[i*Ce+0]&4194303}getCodePoint(i){let n=this._data[i*Ce+0];return n&2097152?this._combined[i].charCodeAt(this._combined[i].length-1):n&2097151}isCombined(i){return this._data[i*Ce+0]&2097152}getString(i){let n=this._data[i*Ce+0];return n&2097152?this._combined[i]:n&2097151?Us(n&2097151):""}isProtected(i){return this._data[i*Ce+2]&536870912}loadCell(i,n){return ho=i*Ce,n.content=this._data[ho+0],n.fg=this._data[ho+1],n.bg=this._data[ho+2],n.content&2097152&&(n.combinedData=this._combined[i]),n.bg&268435456&&(n.extended=this._extendedAttrs[i]),n}setCell(i,n){n.content&2097152&&(this._combined[i]=n.combinedData),n.bg&268435456&&(this._extendedAttrs[i]=n.extended),this._data[i*Ce+0]=n.content,this._data[i*Ce+1]=n.fg,this._data[i*Ce+2]=n.bg}setCellFromCodepoint(i,n,a,h){h.bg&268435456&&(this._extendedAttrs[i]=h.extended),this._data[i*Ce+0]=n|a<<22,this._data[i*Ce+1]=h.fg,this._data[i*Ce+2]=h.bg}addCodepointToCell(i,n,a){let h=this._data[i*Ce+0];h&2097152?this._combined[i]+=Us(n):h&2097151?(this._combined[i]=Us(h&2097151)+Us(n),h&=-2097152,h|=2097152):h=n|1<<22,a&&(h&=-12582913,h|=a<<22),this._data[i*Ce+0]=h}insertCells(i,n,a){if(i%=this.length,i&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i-1,0,1,a),n<this.length-i){let h=new Di;for(let c=this.length-i-n-1;c>=0;--c)this.setCell(i+n+c,this.loadCell(i+c,h));for(let c=0;c<n;++c)this.setCell(i+c,a)}else for(let h=i;h<this.length;++h)this.setCell(h,a);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,a)}deleteCells(i,n,a){if(i%=this.length,n<this.length-i){let h=new Di;for(let c=0;c<this.length-i-n;++c)this.setCell(i+c,this.loadCell(i+n+c,h));for(let c=this.length-n;c<this.length;++c)this.setCell(c,a)}else for(let h=i;h<this.length;++h)this.setCell(h,a);i&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i-1,0,1,a),this.getWidth(i)===0&&!this.hasContent(i)&&this.setCellFromCodepoint(i,0,1,a)}replaceCells(i,n,a,h=!1){if(h){for(i&&this.getWidth(i-1)===2&&!this.isProtected(i-1)&&this.setCellFromCodepoint(i-1,0,1,a),n<this.length&&this.getWidth(n-1)===2&&!this.isProtected(n)&&this.setCellFromCodepoint(n,0,1,a);i<n&&i<this.length;)this.isProtected(i)||this.setCell(i,a),i++;return}for(i&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i-1,0,1,a),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n,0,1,a);i<n&&i<this.length;)this.setCell(i++,a)}resize(i,n){if(i===this.length)return this._data.length*4*hu<this._data.buffer.byteLength;let a=i*Ce;if(i>this.length){if(this._data.buffer.byteLength>=a*4)this._data=new Uint32Array(this._data.buffer,0,a);else{let h=new Uint32Array(a);h.set(this._data),this._data=h}for(let h=this.length;h<i;++h)this.setCell(h,n)}else{this._data=this._data.subarray(0,a);let h=Object.keys(this._combined);for(let f=0;f<h.length;f++){let _=parseInt(h[f],10);_>=i&&delete this._combined[_]}let c=Object.keys(this._extendedAttrs);for(let f=0;f<c.length;f++){let _=parseInt(c[f],10);_>=i&&delete this._extendedAttrs[_]}}return this.length=i,a*4*hu<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*hu<this._data.buffer.byteLength){let i=new Uint32Array(this._data.length);return i.set(this._data),this._data=i,1}return 0}fill(i,n=!1){if(n){for(let a=0;a<this.length;++a)this.isProtected(a)||this.setCell(a,i);return}this._combined={},this._extendedAttrs={};for(let a=0;a<this.length;++a)this.setCell(a,i)}copyFrom(i){this.length!==i.length?this._data=new Uint32Array(i._data):this._data.set(i._data),this.length=i.length,this._combined={};for(let n in i._combined)this._combined[n]=i._combined[n];this._extendedAttrs={};for(let n in i._extendedAttrs)this._extendedAttrs[n]=i._extendedAttrs[n];this.isWrapped=i.isWrapped}clone(){let i=new cp(0);i._data=new Uint32Array(this._data),i.length=this.length;for(let n in this._combined)i._combined[n]=this._combined[n];for(let n in this._extendedAttrs)i._extendedAttrs[n]=this._extendedAttrs[n];return i.isWrapped=this.isWrapped,i}getTrimmedLength(){for(let i=this.length-1;i>=0;--i)if(this._data[i*Ce+0]&4194303)return i+(this._data[i*Ce+0]>>22);return 0}getNoBgTrimmedLength(){for(let i=this.length-1;i>=0;--i)if(this._data[i*Ce+0]&4194303||this._data[i*Ce+2]&50331648)return i+(this._data[i*Ce+0]>>22);return 0}copyCellsFrom(i,n,a,h,c){let f=i._data;if(c)for(let g=h-1;g>=0;g--){for(let d=0;d<Ce;d++)this._data[(a+g)*Ce+d]=f[(n+g)*Ce+d];f[(n+g)*Ce+2]&268435456&&(this._extendedAttrs[a+g]=i._extendedAttrs[n+g])}else for(let g=0;g<h;g++){for(let d=0;d<Ce;d++)this._data[(a+g)*Ce+d]=f[(n+g)*Ce+d];f[(n+g)*Ce+2]&268435456&&(this._extendedAttrs[a+g]=i._extendedAttrs[n+g])}let _=Object.keys(i._combined);for(let g=0;g<_.length;g++){let d=parseInt(_[g],10);d>=n&&(this._combined[d-n+a]=i._combined[d])}}translateToString(i,n,a,h){n=n??0,a=a??this.length,i&&(a=Math.min(a,this.getTrimmedLength())),h&&(h.length=0);let c="";for(;n<a;){let f=this._data[n*Ce+0],_=f&2097151,g=f&2097152?this._combined[n]:_?Us(_):Ps;if(c+=g,h)for(let d=0;d<g.length;++d)h.push(n);n+=f>>22||1}return h&&h.push(n),c}};function kb(e,i,n,a,h,c){let f=[];for(let _=0;_<e.length-1;_++){let g=_,d=e.get(++g);if(!d.isWrapped)continue;let p=[e.get(_)];for(;g<e.length&&d.isWrapped;)p.push(d),d=e.get(++g);if(!c&&a>=_&&a<g){_+=p.length-1;continue}let S=0,E=Dl(p,S,i),k=1,x=0;for(;k<p.length;){let T=Dl(p,k,i),z=T-x,ee=n-E,F=Math.min(z,ee);p[S].copyCellsFrom(p[k],x,E,F,!1),E+=F,E===n&&(S++,E=0),x+=F,x===T&&(k++,x=0),E===0&&S!==0&&p[S-1].getWidth(n-1)===2&&(p[S].copyCellsFrom(p[S-1],n-1,E++,1,!1),p[S-1].setCell(n-1,h))}p[S].replaceCells(E,n,h);let C=0;for(let T=p.length-1;T>0&&(T>S||p[T].getTrimmedLength()===0);T--)C++;C>0&&(f.push(_+p.length-C),f.push(C)),_+=p.length-1}return f}function Tb(e,i){let n=[],a=0,h=i[a],c=0;for(let f=0;f<e.length;f++)if(h===f){let _=i[++a];e.onDeleteEmitter.fire({index:f-c,amount:_}),f+=_-1,c+=_,h=i[++a]}else n.push(f);return{layout:n,countRemoved:c}}function Rb(e,i){let n=[];for(let a=0;a<i.length;a++)n.push(e.get(i[a]));for(let a=0;a<n.length;a++)e.set(a,n[a]);e.length=i.length}function Bb(e,i,n){let a=[],h=e.map((g,d)=>Dl(e,d,i)).reduce((g,d)=>g+d),c=0,f=0,_=0;for(;_<h;){if(h-_<n){a.push(h-_);break}c+=n;let g=Dl(e,f,i);c>g&&(c-=g,f++);let d=e[f].getWidth(c-1)===2;d&&c--;let p=d?n-1:n;a.push(p),_+=p}return a}function Dl(e,i,n){if(i===e.length-1)return e[i].getTrimmedLength();let a=!e[i].hasContent(n-1)&&e[i].getWidth(n-1)===1,h=e[i+1].getWidth(0)===2;return a&&h?n-1:n}var up=class fp{constructor(i){this.line=i,this.isDisposed=!1,this._disposables=[],this._id=fp._nextId++,this._onDispose=this.register(new X),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),dr(this._disposables),this._disposables.length=0)}register(i){return this._disposables.push(i),i}};up._nextId=1;var Ab=up,St={},hr=St.B;St[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};St.A={"#":""};St.B=void 0;St[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};St.C=St[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};St.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};St.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};St.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};St.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};St.E=St[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};St.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};St.H=St[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};St["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var tm=4294967295,im=class{constructor(e,i,n){this._hasScrollback=e,this._optionsService=i,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=ut.clone(),this.savedCharset=hr,this.markers=[],this._nullCell=Di.fromCharData([0,Tm,1,0]),this._whitespaceCell=Di.fromCharData([0,Ps,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new wo,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new em(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new So),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new So),this._whitespaceCell}getBlankLine(e,i){return new pl(this._bufferService.cols,this.getNullCell(e),i)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let i=e+this._optionsService.rawOptions.scrollback;return i>tm?tm:i}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=ut);let i=this._rows;for(;i--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new em(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,i){let n=this.getNullCell(ut),a=0,h=this._getCorrectBufferLength(i);if(h>this.lines.maxLength&&(this.lines.maxLength=h),this.lines.length>0){if(this._cols<e)for(let f=0;f<this.lines.length;f++)a+=+this.lines.get(f).resize(e,n);let c=0;if(this._rows<i)for(let f=this._rows;f<i;f++)this.lines.length<i+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new pl(e,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+c+1?(this.ybase--,c++,this.ydisp>0&&this.ydisp--):this.lines.push(new pl(e,n)));else for(let f=this._rows;f>i;f--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(h<this.lines.maxLength){let f=this.lines.length-h;f>0&&(this.lines.trimStart(f),this.ybase=Math.max(this.ybase-f,0),this.ydisp=Math.max(this.ydisp-f,0),this.savedY=Math.max(this.savedY-f,0)),this.lines.maxLength=h}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,i-1),c&&(this.y+=c),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(e,i),this._cols>e))for(let c=0;c<this.lines.length;c++)a+=+this.lines.get(c).resize(e,n);this._cols=e,this._rows=i,this._memoryCleanupQueue.clear(),a>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let i=0;for(;this._memoryCleanupPosition<this.lines.length;)if(i+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),i>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,i){this._cols!==e&&(e>this._cols?this._reflowLarger(e,i):this._reflowSmaller(e,i))}_reflowLarger(e,i){let n=this._optionsService.rawOptions.reflowCursorLine,a=kb(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(ut),n);if(a.length>0){let h=Tb(this.lines,a);Rb(this.lines,h.layout),this._reflowLargerAdjustViewport(e,i,h.countRemoved)}}_reflowLargerAdjustViewport(e,i,n){let a=this.getNullCell(ut),h=n;for(;h-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new pl(e,a))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)}_reflowSmaller(e,i){let n=this._optionsService.rawOptions.reflowCursorLine,a=this.getNullCell(ut),h=[],c=0;for(let f=this.lines.length-1;f>=0;f--){let _=this.lines.get(f);if(!_||!_.isWrapped&&_.getTrimmedLength()<=e)continue;let g=[_];for(;_.isWrapped&&f>0;)_=this.lines.get(--f),g.unshift(_);if(!n){let F=this.ybase+this.y;if(F>=f&&F<f+g.length)continue}let d=g[g.length-1].getTrimmedLength(),p=Bb(g,this._cols,e),S=p.length-g.length,E;this.ybase===0&&this.y!==this.lines.length-1?E=Math.max(0,this.y-this.lines.maxLength+S):E=Math.max(0,this.lines.length-this.lines.maxLength+S);let k=[];for(let F=0;F<S;F++){let j=this.getBlankLine(ut,!0);k.push(j)}k.length>0&&(h.push({start:f+g.length+c,newLines:k}),c+=k.length),g.push(...k);let x=p.length-1,C=p[x];C===0&&(x--,C=p[x]);let T=g.length-S-1,z=d;for(;T>=0;){let F=Math.min(z,C);if(g[x]===void 0)break;if(g[x].copyCellsFrom(g[T],z-F,C-F,F,!0),C-=F,C===0&&(x--,C=p[x]),z-=F,z===0){T--;let j=Math.max(T,0);z=Dl(g,j,this._cols)}}for(let F=0;F<g.length;F++)p[F]<e&&g[F].setCell(p[F],a);let ee=S-E;for(;ee-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+c)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+S,this.ybase+i-1)}if(h.length>0){let f=[],_=[];for(let C=0;C<this.lines.length;C++)_.push(this.lines.get(C));let g=this.lines.length,d=g-1,p=0,S=h[p];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+c);let E=0;for(let C=Math.min(this.lines.maxLength-1,g+c-1);C>=0;C--)if(S&&S.start>d+E){for(let T=S.newLines.length-1;T>=0;T--)this.lines.set(C--,S.newLines[T]);C++,f.push({index:d+1,amount:S.newLines.length}),E+=S.newLines.length,S=h[++p]}else this.lines.set(C,_[d--]);let k=0;for(let C=f.length-1;C>=0;C--)f[C].index+=k,this.lines.onInsertEmitter.fire(f[C]),k+=f[C].amount;let x=Math.max(0,g+c-this.lines.maxLength);x>0&&this.lines.onTrimEmitter.fire(x)}}translateBufferLineToString(e,i,n=0,a){let h=this.lines.get(e);return h?h.translateToString(i,n,a):""}getWrappedRangeForLine(e){let i=e,n=e;for(;i>0&&this.lines.get(i).isWrapped;)i--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:i,last:n}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let i=0;i<this.markers.length;i++)this.markers[i].line===e&&(this.markers[i].dispose(),this.markers.splice(i--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let i=new Ab(e);return this.markers.push(i),i.register(this.lines.onTrim(n=>{i.line-=n,i.line<0&&i.dispose()})),i.register(this.lines.onInsert(n=>{i.line>=n.index&&(i.line+=n.amount)})),i.register(this.lines.onDelete(n=>{i.line>=n.index&&i.line<n.index+n.amount&&i.dispose(),i.line>n.index&&(i.line-=n.amount)})),i.register(i.onDispose(()=>this._removeMarker(i))),i}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},Ob=class extends we{constructor(e,i){super(),this._optionsService=e,this._bufferService=i,this._onBufferActivate=this._register(new X),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new im(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new im(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,i){this._normal.resize(e,i),this._alt.resize(e,i),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},dp=2,_p=1,Ju=class extends we{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new X),this.onResize=this._onResize.event,this._onScroll=this._register(new X),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,dp),this.rows=Math.max(e.rawOptions.rows||0,_p),this.buffers=this._register(new Ob(e,this)),this._register(this.buffers.onBufferActivate(i=>{this._onScroll.fire(i.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(e,i){let n=this.cols!==e,a=this.rows!==i;this.cols=e,this.rows=i,this.buffers.resize(e,i),this._onResize.fire({cols:e,rows:i,colsChanged:n,rowsChanged:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,i=!1){let n=this.buffer,a;a=this._cachedBlankLine,(!a||a.length!==this.cols||a.getFg(0)!==e.fg||a.getBg(0)!==e.bg)&&(a=n.getBlankLine(e,i),this._cachedBlankLine=a),a.isWrapped=i;let h=n.ybase+n.scrollTop,c=n.ybase+n.scrollBottom;if(n.scrollTop===0){let f=n.lines.isFull;c===n.lines.length-1?f?n.lines.recycle().copyFrom(a):n.lines.push(a.clone()):n.lines.splice(c+1,0,a.clone()),f?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{let f=c-h+1;n.lines.shiftElements(h+1,f-1,-1),n.lines.set(c,a.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(e,i){let n=this.buffer;if(e<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else e+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);let a=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+e,n.ybase),0),a!==n.ydisp&&(i||this._onScroll.fire(n.ydisp))}};Ju=tt([re(0,jt)],Ju);var nn={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:Co,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},Lb=["normal","bold","100","200","300","400","500","600","700","800","900"],zb=class extends we{constructor(e){super(),this._onOptionChange=this._register(new X),this.onOptionChange=this._onOptionChange.event;let i={...nn};for(let n in e)if(n in i)try{let a=e[n];i[n]=this._sanitizeAndValidateOption(n,a)}catch(a){console.error(a)}this.rawOptions=i,this.options={...i},this._setupOptions(),this._register(Xe(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,i){return this.onOptionChange(n=>{n===e&&i(this.rawOptions[e])})}onMultipleOptionChange(e,i){return this.onOptionChange(n=>{e.indexOf(n)!==-1&&i()})}_setupOptions(){let e=n=>{if(!(n in nn))throw new Error(`No option with key "${n}"`);return this.rawOptions[n]},i=(n,a)=>{if(!(n in nn))throw new Error(`No option with key "${n}"`);a=this._sanitizeAndValidateOption(n,a),this.rawOptions[n]!==a&&(this.rawOptions[n]=a,this._onOptionChange.fire(n))};for(let n in this.rawOptions){let a={get:e.bind(this,n),set:i.bind(this,n)};Object.defineProperty(this.options,n,a)}}_sanitizeAndValidateOption(e,i){switch(e){case"cursorStyle":if(i||(i=nn[e]),!Nb(i))throw new Error(`"${i}" is not a valid value for ${e}`);break;case"wordSeparator":i||(i=nn[e]);break;case"fontWeight":case"fontWeightBold":if(typeof i=="number"&&1<=i&&i<=1e3)break;i=Lb.includes(i)?i:nn[e];break;case"cursorWidth":i=Math.floor(i);case"lineHeight":case"tabStopWidth":if(i<1)throw new Error(`${e} cannot be less than 1, value: ${i}`);break;case"minimumContrastRatio":i=Math.max(1,Math.min(21,Math.round(i*10)/10));break;case"scrollback":if(i=Math.min(i,4294967295),i<0)throw new Error(`${e} cannot be less than 0, value: ${i}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(i<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${i}`);break;case"rows":case"cols":if(!i&&i!==0)throw new Error(`${e} must be numeric, value: ${i}`);break;case"windowsPty":i=i??{};break}return i}};function Nb(e){return e==="block"||e==="underline"||e==="bar"}function Sl(e,i=5){if(typeof e!="object")return e;let n=Array.isArray(e)?[]:{};for(let a in e)n[a]=i<=1?e[a]:e[a]&&Sl(e[a],i-1);return n}var sm=Object.freeze({insertMode:!1}),rm=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),ef=class extends we{constructor(e,i,n){super(),this._bufferService=e,this._logService=i,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new X),this.onData=this._onData.event,this._onUserInput=this._register(new X),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new X),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new X),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=Sl(sm),this.decPrivateModes=Sl(rm)}reset(){this.modes=Sl(sm),this.decPrivateModes=Sl(rm)}triggerDataEvent(e,i=!1){if(this._optionsService.rawOptions.disableStdin)return;let n=this._bufferService.buffer;i&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),i&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`),this._logService.trace("sending data (codes)",()=>e.split("").map(a=>a.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`),this._logService.trace("sending binary (codes)",()=>e.split("").map(i=>i.charCodeAt(0))),this._onBinary.fire(e))}};ef=tt([re(0,Yt),re(1,Lm),re(2,jt)],ef);var nm={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function cu(e,i){let n=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(n|=64,n|=e.action):(n|=e.button&3,e.button&4&&(n|=64),e.button&8&&(n|=128),e.action===32?n|=32:e.action===0&&!i&&(n|=3)),n}var uu=String.fromCharCode,lm={DEFAULT:e=>{let i=[cu(e,!1)+32,e.col+32,e.row+32];return i[0]>255||i[1]>255||i[2]>255?"":`\x1B[M${uu(i[0])}${uu(i[1])}${uu(i[2])}`},SGR:e=>{let i=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${cu(e,!0)};${e.col};${e.row}${i}`},SGR_PIXELS:e=>{let i=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${cu(e,!0)};${e.x};${e.y}${i}`}},tf=class extends we{constructor(e,i,n){super(),this._bufferService=e,this._coreService=i,this._optionsService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new X),this.onProtocolChange=this._onProtocolChange.event;for(let a of Object.keys(nm))this.addProtocol(a,nm[a]);for(let a of Object.keys(lm))this.addEncoding(a,lm[a]);this.reset()}addProtocol(e,i){this._protocols[e]=i}addEncoding(e,i){this._encodings[e]=i}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(e,i,n){if(e.deltaY===0||e.shiftKey||i===void 0||n===void 0)return 0;let a=i/n,h=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(h/=a+0,Math.abs(e.deltaY)<50&&(h*=.3),this._wheelPartialScroll+=h,h=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._bufferService.rows),h}_applyScrollModifier(e,i){return i.altKey||i.ctrlKey||i.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let i=this._encodings[this._activeEncoding](e);return i&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(i):this._coreService.triggerDataEvent(i,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,i,n){if(n){if(e.x!==i.x||e.y!==i.y)return!1}else if(e.col!==i.col||e.row!==i.row)return!1;return!(e.button!==i.button||e.action!==i.action||e.ctrl!==i.ctrl||e.alt!==i.alt||e.shift!==i.shift)}};tf=tt([re(0,Yt),re(1,vr),re(2,jt)],tf);var fu=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],Hb=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],pt;function Ub(e,i){let n=0,a=i.length-1,h;if(e<i[0][0]||e>i[a][1])return!1;for(;a>=n;)if(h=n+a>>1,e>i[h][1])n=h+1;else if(e<i[h][0])a=h-1;else return!0;return!1}var Pb=class{constructor(){if(this.version="6",!pt){pt=new Uint8Array(65536),pt.fill(1),pt[0]=0,pt.fill(0,1,32),pt.fill(0,127,160),pt.fill(2,4352,4448),pt[9001]=2,pt[9002]=2,pt.fill(2,11904,42192),pt[12351]=1,pt.fill(2,44032,55204),pt.fill(2,63744,64256),pt.fill(2,65040,65050),pt.fill(2,65072,65136),pt.fill(2,65280,65377),pt.fill(2,65504,65511);for(let e=0;e<fu.length;++e)pt.fill(0,fu[e][0],fu[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?pt[e]:Ub(e,Hb)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,i){let n=this.wcwidth(e),a=n===0&&i!==0;if(a){let h=ur.extractWidth(i);h===0?a=!1:h>n&&(n=h)}return ur.createPropertyValue(0,n,a)}},ur=class po{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new X,this.onChange=this._onChange.event;let i=new Pb;this.register(i),this._active=i.version,this._activeProvider=i}static extractShouldJoin(i){return(i&1)!==0}static extractWidth(i){return i>>1&3}static extractCharKind(i){return i>>3}static createPropertyValue(i,n,a=!1){return(i&16777215)<<3|(n&3)<<1|(a?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(i){if(!this._providers[i])throw new Error(`unknown Unicode version "${i}"`);this._active=i,this._activeProvider=this._providers[i],this._onChange.fire(i)}register(i){this._providers[i.version]=i}wcwidth(i){return this._activeProvider.wcwidth(i)}getStringCellWidth(i){let n=0,a=0,h=i.length;for(let c=0;c<h;++c){let f=i.charCodeAt(c);if(55296<=f&&f<=56319){if(++c>=h)return n+this.wcwidth(f);let d=i.charCodeAt(c);56320<=d&&d<=57343?f=(f-55296)*1024+d-56320+65536:n+=this.wcwidth(d)}let _=this.charProperties(f,a),g=po.extractWidth(_);po.extractShouldJoin(_)&&(g-=po.extractWidth(a)),n+=g,a=_}return n}charProperties(i,n){return this._activeProvider.charProperties(i,n)}},qb=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,i){this._charsets[e]=i,this.glevel===e&&(this.charset=i)}};function am(e){var a;let i=(a=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1))==null?void 0:a.get(e.cols-1),n=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);n&&i&&(n.isWrapped=i[3]!==0&&i[3]!==32)}var dl=2147483647,Vb=256,vp=class sf{constructor(i=32,n=32){if(this.maxLength=i,this.maxSubParamsLength=n,n>Vb)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(i),this.length=0,this._subParams=new Int32Array(n),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(i),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(i){let n=new sf;if(!i.length)return n;for(let a=Array.isArray(i[0])?1:0;a<i.length;++a){let h=i[a];if(Array.isArray(h))for(let c=0;c<h.length;++c)n.addSubParam(h[c]);else n.addParam(h)}return n}clone(){let i=new sf(this.maxLength,this.maxSubParamsLength);return i.params.set(this.params),i.length=this.length,i._subParams.set(this._subParams),i._subParamsLength=this._subParamsLength,i._subParamsIdx.set(this._subParamsIdx),i._rejectDigits=this._rejectDigits,i._rejectSubDigits=this._rejectSubDigits,i._digitIsSub=this._digitIsSub,i}toArray(){let i=[];for(let n=0;n<this.length;++n){i.push(this.params[n]);let a=this._subParamsIdx[n]>>8,h=this._subParamsIdx[n]&255;h-a>0&&i.push(Array.prototype.slice.call(this._subParams,a,h))}return i}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(i){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=i>dl?dl:i}addSubParam(i){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=i>dl?dl:i,this._subParamsIdx[this.length-1]++}}hasSubParams(i){return(this._subParamsIdx[i]&255)-(this._subParamsIdx[i]>>8)>0}getSubParams(i){let n=this._subParamsIdx[i]>>8,a=this._subParamsIdx[i]&255;return a-n>0?this._subParams.subarray(n,a):null}getSubParamsAll(){let i={};for(let n=0;n<this.length;++n){let a=this._subParamsIdx[n]>>8,h=this._subParamsIdx[n]&255;h-a>0&&(i[n]=this._subParams.slice(a,h))}return i}addDigit(i){let n;if(this._rejectDigits||!(n=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let a=this._digitIsSub?this._subParams:this.params,h=a[n-1];a[n-1]=~h?Math.min(h*10+i,dl):i}},_l=[],Wb=class{constructor(){this._state=0,this._active=_l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,i){this._handlers[e]===void 0&&(this._handlers[e]=[]);let n=this._handlers[e];return n.push(i),{dispose:()=>{let a=n.indexOf(i);a!==-1&&n.splice(a,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_l}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=_l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||_l,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,i,n){if(!this._active.length)this._handlerFb(this._id,"PUT",Mo(e,i,n));else for(let a=this._active.length-1;a>=0;a--)this._active[a].put(e,i,n)}start(){this.reset(),this._state=1}put(e,i,n){if(this._state!==3){if(this._state===1)for(;i<n;){let a=e[i++];if(a===59){this._state=2,this._start();break}if(a<48||57<a){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+a-48}this._state===2&&n-i>0&&this._put(e,i,n)}}end(e,i=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let n=!1,a=this._active.length-1,h=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,n=i,h=this._stack.fallThrough,this._stack.paused=!1),!h&&n===!1){for(;a>=0&&(n=this._active[a].end(e),n!==!0);a--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,n;a--}for(;a>=0;a--)if(n=this._active[a].end(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,n}this._active=_l,this._id=-1,this._state=0}}},ui=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,i,n){this._hitLimit||(this._data+=Mo(e,i,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let i=!1;if(this._hitLimit)i=!1;else if(e&&(i=this._handler(this._data),i instanceof Promise))return i.then(n=>(this._data="",this._hitLimit=!1,n));return this._data="",this._hitLimit=!1,i}},vl=[],Kb=class{constructor(){this._handlers=Object.create(null),this._active=vl,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=vl}registerHandler(e,i){this._handlers[e]===void 0&&(this._handlers[e]=[]);let n=this._handlers[e];return n.push(i),{dispose:()=>{let a=n.indexOf(i);a!==-1&&n.splice(a,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=vl,this._ident=0}hook(e,i){if(this.reset(),this._ident=e,this._active=this._handlers[e]||vl,!this._active.length)this._handlerFb(this._ident,"HOOK",i);else for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(i)}put(e,i,n){if(!this._active.length)this._handlerFb(this._ident,"PUT",Mo(e,i,n));else for(let a=this._active.length-1;a>=0;a--)this._active[a].put(e,i,n)}unhook(e,i=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let n=!1,a=this._active.length-1,h=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,n=i,h=this._stack.fallThrough,this._stack.paused=!1),!h&&n===!1){for(;a>=0&&(n=this._active[a].unhook(e),n!==!0);a--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,n;a--}for(;a>=0;a--)if(n=this._active[a].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,n}this._active=vl,this._ident=0}},yl=new vp;yl.addParam(0);var om=class{constructor(e){this._handler=e,this._data="",this._params=yl,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():yl,this._data="",this._hitLimit=!1}put(e,i,n){this._hitLimit||(this._data+=Mo(e,i,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let i=!1;if(this._hitLimit)i=!1;else if(e&&(i=this._handler(this._data,this._params),i instanceof Promise))return i.then(n=>(this._params=yl,this._data="",this._hitLimit=!1,n));return this._params=yl,this._data="",this._hitLimit=!1,i}},Yb=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,i){this.table.fill(e<<4|i)}add(e,i,n,a){this.table[i<<8|e]=n<<4|a}addMany(e,i,n,a){for(let h=0;h<e.length;h++)this.table[i<<8|e[h]]=n<<4|a}},Mi=160,jb=function(){let e=new Yb(4095),i=Array.apply(null,Array(256)).map((_,g)=>g),n=(_,g)=>i.slice(_,g),a=n(32,127),h=n(0,24);h.push(25),h.push.apply(h,n(28,32));let c=n(0,14),f;e.setDefault(1,0),e.addMany(a,0,2,0);for(f in c)e.addMany([24,26,153,154],f,3,0),e.addMany(n(128,144),f,3,0),e.addMany(n(144,152),f,3,0),e.add(156,f,0,0),e.add(27,f,11,1),e.add(157,f,4,8),e.addMany([152,158,159],f,0,7),e.add(155,f,11,3),e.add(144,f,11,9);return e.addMany(h,0,3,0),e.addMany(h,1,3,1),e.add(127,1,0,1),e.addMany(h,8,0,8),e.addMany(h,3,3,3),e.add(127,3,0,3),e.addMany(h,4,3,4),e.add(127,4,0,4),e.addMany(h,6,3,6),e.addMany(h,5,3,5),e.add(127,5,0,5),e.addMany(h,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(a,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(n(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(a,7,0,7),e.addMany(h,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(n(64,127),3,7,0),e.addMany(n(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(n(48,60),4,8,4),e.addMany(n(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(n(32,64),6,0,6),e.add(127,6,0,6),e.addMany(n(64,127),6,0,0),e.addMany(n(32,48),3,9,5),e.addMany(n(32,48),5,9,5),e.addMany(n(48,64),5,0,6),e.addMany(n(64,127),5,7,0),e.addMany(n(32,48),4,9,5),e.addMany(n(32,48),1,9,2),e.addMany(n(32,48),2,9,2),e.addMany(n(48,127),2,10,0),e.addMany(n(48,80),1,10,0),e.addMany(n(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(n(96,127),1,10,0),e.add(80,1,11,9),e.addMany(h,9,0,9),e.add(127,9,0,9),e.addMany(n(28,32),9,0,9),e.addMany(n(32,48),9,9,12),e.addMany(n(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(h,11,0,11),e.addMany(n(32,128),11,0,11),e.addMany(n(28,32),11,0,11),e.addMany(h,10,0,10),e.add(127,10,0,10),e.addMany(n(28,32),10,0,10),e.addMany(n(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(n(32,48),10,9,12),e.addMany(h,12,0,12),e.add(127,12,0,12),e.addMany(n(28,32),12,0,12),e.addMany(n(32,48),12,9,12),e.addMany(n(48,64),12,0,11),e.addMany(n(64,127),12,12,13),e.addMany(n(64,127),10,12,13),e.addMany(n(64,127),9,12,13),e.addMany(h,13,13,13),e.addMany(a,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(Mi,0,2,0),e.add(Mi,8,5,8),e.add(Mi,6,0,6),e.add(Mi,11,0,11),e.add(Mi,13,13,13),e}(),Ib=class extends we{constructor(e=jb){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new vp,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(i,n,a)=>{},this._executeHandlerFb=i=>{},this._csiHandlerFb=(i,n)=>{},this._escHandlerFb=i=>{},this._errorHandlerFb=i=>i,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(Xe(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new Wb),this._dcsParser=this._register(new Kb),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,i=[64,126]){let n=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=e.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let h=0;h<e.intermediates.length;++h){let c=e.intermediates.charCodeAt(h);if(32>c||c>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=c}}if(e.final.length!==1)throw new Error("final must be a single byte");let a=e.final.charCodeAt(0);if(i[0]>a||a>i[1])throw new Error(`final must be in range ${i[0]} .. ${i[1]}`);return n<<=8,n|=a,n}identToString(e){let i=[];for(;e;)i.push(String.fromCharCode(e&255)),e>>=8;return i.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,i){let n=this._identifier(e,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);let a=this._escHandlers[n];return a.push(i),{dispose:()=>{let h=a.indexOf(i);h!==-1&&a.splice(h,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,i){this._executeHandlers[e.charCodeAt(0)]=i}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,i){let n=this._identifier(e);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);let a=this._csiHandlers[n];return a.push(i),{dispose:()=>{let h=a.indexOf(i);h!==-1&&a.splice(h,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,i){return this._dcsParser.registerHandler(this._identifier(e),i)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,i){return this._oscParser.registerHandler(e,i)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,i,n,a,h){this._parseStack.state=e,this._parseStack.handlers=i,this._parseStack.handlerPos=n,this._parseStack.transition=a,this._parseStack.chunkPos=h}parse(e,i,n){let a=0,h=0,c=0,f;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,c=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let _=this._parseStack.handlers,g=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&g>-1){for(;g>=0&&(f=_[g](this._params),f!==!0);g--)if(f instanceof Promise)return this._parseStack.handlerPos=g,f}this._parseStack.handlers=[];break;case 4:if(n===!1&&g>-1){for(;g>=0&&(f=_[g](),f!==!0);g--)if(f instanceof Promise)return this._parseStack.handlerPos=g,f}this._parseStack.handlers=[];break;case 6:if(a=e[this._parseStack.chunkPos],f=this._dcsParser.unhook(a!==24&&a!==26,n),f)return f;a===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(a=e[this._parseStack.chunkPos],f=this._oscParser.end(a!==24&&a!==26,n),f)return f;a===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,c=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let _=c;_<i;++_){switch(a=e[_],h=this._transitions.table[this.currentState<<8|(a<160?a:Mi)],h>>4){case 2:for(let E=_+1;;++E){if(E>=i||(a=e[E])<32||a>126&&a<Mi){this._printHandler(e,_,E),_=E-1;break}if(++E>=i||(a=e[E])<32||a>126&&a<Mi){this._printHandler(e,_,E),_=E-1;break}if(++E>=i||(a=e[E])<32||a>126&&a<Mi){this._printHandler(e,_,E),_=E-1;break}if(++E>=i||(a=e[E])<32||a>126&&a<Mi){this._printHandler(e,_,E),_=E-1;break}}break;case 3:this._executeHandlers[a]?this._executeHandlers[a]():this._executeHandlerFb(a),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:_,code:a,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let g=this._csiHandlers[this._collect<<8|a],d=g?g.length-1:-1;for(;d>=0&&(f=g[d](this._params),f!==!0);d--)if(f instanceof Promise)return this._preserveStack(3,g,d,h,_),f;d<0&&this._csiHandlerFb(this._collect<<8|a,this._params),this.precedingJoinState=0;break;case 8:do switch(a){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(a-48)}while(++_<i&&(a=e[_])>47&&a<60);_--;break;case 9:this._collect<<=8,this._collect|=a;break;case 10:let p=this._escHandlers[this._collect<<8|a],S=p?p.length-1:-1;for(;S>=0&&(f=p[S](),f!==!0);S--)if(f instanceof Promise)return this._preserveStack(4,p,S,h,_),f;S<0&&this._escHandlerFb(this._collect<<8|a),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|a,this._params);break;case 13:for(let E=_+1;;++E)if(E>=i||(a=e[E])===24||a===26||a===27||a>127&&a<Mi){this._dcsParser.put(e,_,E),_=E-1;break}break;case 14:if(f=this._dcsParser.unhook(a!==24&&a!==26),f)return this._preserveStack(6,[],0,h,_),f;a===27&&(h|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let E=_+1;;E++)if(E>=i||(a=e[E])<32||a>127&&a<Mi){this._oscParser.put(e,_,E),_=E-1;break}break;case 6:if(f=this._oscParser.end(a!==24&&a!==26),f)return this._preserveStack(5,[],0,h,_),f;a===27&&(h|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=h&15}}},Fb=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,Xb=/^[\da-f]+$/;function hm(e){if(!e)return;let i=e.toLowerCase();if(i.indexOf("rgb:")===0){i=i.slice(4);let n=Fb.exec(i);if(n){let a=n[1]?15:n[4]?255:n[7]?4095:65535;return[Math.round(parseInt(n[1]||n[4]||n[7]||n[10],16)/a*255),Math.round(parseInt(n[2]||n[5]||n[8]||n[11],16)/a*255),Math.round(parseInt(n[3]||n[6]||n[9]||n[12],16)/a*255)]}}else if(i.indexOf("#")===0&&(i=i.slice(1),Xb.exec(i)&&[3,6,9,12].includes(i.length))){let n=i.length/3,a=[0,0,0];for(let h=0;h<3;++h){let c=parseInt(i.slice(n*h,n*h+n),16);a[h]=n===1?c<<4:n===2?c:n===3?c>>4:c>>8}return a}}function du(e,i){let n=e.toString(16),a=n.length<2?"0"+n:n;switch(i){case 4:return n[0];case 8:return a;case 12:return(a+a).slice(0,3);default:return a+a}}function Gb(e,i=16){let[n,a,h]=e;return`rgb:${du(n,i)}/${du(a,i)}/${du(h,i)}`}var $b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Hs=131072,cm=10;function um(e,i){if(e>24)return i.setWinLines||!1;switch(e){case 1:return!!i.restoreWin;case 2:return!!i.minimizeWin;case 3:return!!i.setWinPosition;case 4:return!!i.setWinSizePixels;case 5:return!!i.raiseWin;case 6:return!!i.lowerWin;case 7:return!!i.refreshWin;case 8:return!!i.setWinSizeChars;case 9:return!!i.maximizeWin;case 10:return!!i.fullscreenWin;case 11:return!!i.getWinState;case 13:return!!i.getWinPosition;case 14:return!!i.getWinSizePixels;case 15:return!!i.getScreenSizePixels;case 16:return!!i.getCellSizePixels;case 18:return!!i.getWinSizeChars;case 19:return!!i.getScreenSizeChars;case 20:return!!i.getIconTitle;case 21:return!!i.getWinTitle;case 22:return!!i.pushTitle;case 23:return!!i.popTitle;case 24:return!!i.setWinLines}return!1}var fm=5e3,dm=0,Zb=class extends we{constructor(e,i,n,a,h,c,f,_,g=new Ib){super(),this._bufferService=e,this._charsetService=i,this._coreService=n,this._logService=a,this._optionsService=h,this._oscLinkService=c,this._coreMouseService=f,this._unicodeService=_,this._parser=g,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new gy,this._utf8Decoder=new my,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=ut.clone(),this._eraseAttrDataInternal=ut.clone(),this._onRequestBell=this._register(new X),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new X),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new X),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new X),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new X),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new X),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new X),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new X),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new X),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new X),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new X),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new X),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new X),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new rf(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(d=>this._activeBuffer=d.activeBuffer)),this._parser.setCsiHandlerFallback((d,p)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(d),params:p.toArray()})}),this._parser.setEscHandlerFallback(d=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(d)})}),this._parser.setExecuteHandlerFallback(d=>{this._logService.debug("Unknown EXECUTE code: ",{code:d})}),this._parser.setOscHandlerFallback((d,p,S)=>{this._logService.debug("Unknown OSC code: ",{identifier:d,action:p,data:S})}),this._parser.setDcsHandlerFallback((d,p,S)=>{p==="HOOK"&&(S=S.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(d),action:p,payload:S})}),this._parser.setPrintHandler((d,p,S)=>this.print(d,p,S)),this._parser.registerCsiHandler({final:"@"},d=>this.insertChars(d)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},d=>this.scrollLeft(d)),this._parser.registerCsiHandler({final:"A"},d=>this.cursorUp(d)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},d=>this.scrollRight(d)),this._parser.registerCsiHandler({final:"B"},d=>this.cursorDown(d)),this._parser.registerCsiHandler({final:"C"},d=>this.cursorForward(d)),this._parser.registerCsiHandler({final:"D"},d=>this.cursorBackward(d)),this._parser.registerCsiHandler({final:"E"},d=>this.cursorNextLine(d)),this._parser.registerCsiHandler({final:"F"},d=>this.cursorPrecedingLine(d)),this._parser.registerCsiHandler({final:"G"},d=>this.cursorCharAbsolute(d)),this._parser.registerCsiHandler({final:"H"},d=>this.cursorPosition(d)),this._parser.registerCsiHandler({final:"I"},d=>this.cursorForwardTab(d)),this._parser.registerCsiHandler({final:"J"},d=>this.eraseInDisplay(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},d=>this.eraseInDisplay(d,!0)),this._parser.registerCsiHandler({final:"K"},d=>this.eraseInLine(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},d=>this.eraseInLine(d,!0)),this._parser.registerCsiHandler({final:"L"},d=>this.insertLines(d)),this._parser.registerCsiHandler({final:"M"},d=>this.deleteLines(d)),this._parser.registerCsiHandler({final:"P"},d=>this.deleteChars(d)),this._parser.registerCsiHandler({final:"S"},d=>this.scrollUp(d)),this._parser.registerCsiHandler({final:"T"},d=>this.scrollDown(d)),this._parser.registerCsiHandler({final:"X"},d=>this.eraseChars(d)),this._parser.registerCsiHandler({final:"Z"},d=>this.cursorBackwardTab(d)),this._parser.registerCsiHandler({final:"`"},d=>this.charPosAbsolute(d)),this._parser.registerCsiHandler({final:"a"},d=>this.hPositionRelative(d)),this._parser.registerCsiHandler({final:"b"},d=>this.repeatPrecedingCharacter(d)),this._parser.registerCsiHandler({final:"c"},d=>this.sendDeviceAttributesPrimary(d)),this._parser.registerCsiHandler({prefix:">",final:"c"},d=>this.sendDeviceAttributesSecondary(d)),this._parser.registerCsiHandler({final:"d"},d=>this.linePosAbsolute(d)),this._parser.registerCsiHandler({final:"e"},d=>this.vPositionRelative(d)),this._parser.registerCsiHandler({final:"f"},d=>this.hVPosition(d)),this._parser.registerCsiHandler({final:"g"},d=>this.tabClear(d)),this._parser.registerCsiHandler({final:"h"},d=>this.setMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"h"},d=>this.setModePrivate(d)),this._parser.registerCsiHandler({final:"l"},d=>this.resetMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"l"},d=>this.resetModePrivate(d)),this._parser.registerCsiHandler({final:"m"},d=>this.charAttributes(d)),this._parser.registerCsiHandler({final:"n"},d=>this.deviceStatus(d)),this._parser.registerCsiHandler({prefix:"?",final:"n"},d=>this.deviceStatusPrivate(d)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},d=>this.softReset(d)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},d=>this.setCursorStyle(d)),this._parser.registerCsiHandler({final:"r"},d=>this.setScrollRegion(d)),this._parser.registerCsiHandler({final:"s"},d=>this.saveCursor(d)),this._parser.registerCsiHandler({final:"t"},d=>this.windowOptions(d)),this._parser.registerCsiHandler({final:"u"},d=>this.restoreCursor(d)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},d=>this.insertColumns(d)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},d=>this.deleteColumns(d)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},d=>this.selectProtected(d)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},d=>this.requestMode(d,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},d=>this.requestMode(d,!1)),this._parser.setExecuteHandler(q.BEL,()=>this.bell()),this._parser.setExecuteHandler(q.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(q.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(q.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(q.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(q.BS,()=>this.backspace()),this._parser.setExecuteHandler(q.HT,()=>this.tab()),this._parser.setExecuteHandler(q.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(q.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(go.IND,()=>this.index()),this._parser.setExecuteHandler(go.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(go.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new ui(d=>(this.setTitle(d),this.setIconName(d),!0))),this._parser.registerOscHandler(1,new ui(d=>this.setIconName(d))),this._parser.registerOscHandler(2,new ui(d=>this.setTitle(d))),this._parser.registerOscHandler(4,new ui(d=>this.setOrReportIndexedColor(d))),this._parser.registerOscHandler(8,new ui(d=>this.setHyperlink(d))),this._parser.registerOscHandler(10,new ui(d=>this.setOrReportFgColor(d))),this._parser.registerOscHandler(11,new ui(d=>this.setOrReportBgColor(d))),this._parser.registerOscHandler(12,new ui(d=>this.setOrReportCursorColor(d))),this._parser.registerOscHandler(104,new ui(d=>this.restoreIndexedColor(d))),this._parser.registerOscHandler(110,new ui(d=>this.restoreFgColor(d))),this._parser.registerOscHandler(111,new ui(d=>this.restoreBgColor(d))),this._parser.registerOscHandler(112,new ui(d=>this.restoreCursorColor(d))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let d in St)this._parser.registerEscHandler({intermediates:"(",final:d},()=>this.selectCharset("("+d)),this._parser.registerEscHandler({intermediates:")",final:d},()=>this.selectCharset(")"+d)),this._parser.registerEscHandler({intermediates:"*",final:d},()=>this.selectCharset("*"+d)),this._parser.registerEscHandler({intermediates:"+",final:d},()=>this.selectCharset("+"+d)),this._parser.registerEscHandler({intermediates:"-",final:d},()=>this.selectCharset("-"+d)),this._parser.registerEscHandler({intermediates:".",final:d},()=>this.selectCharset("."+d)),this._parser.registerEscHandler({intermediates:"/",final:d},()=>this.selectCharset("/"+d));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(d=>(this._logService.error("Parsing error: ",d),d)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new om((d,p)=>this.requestStatusString(d,p)))}getAttrData(){return this._curAttrData}_preserveStack(e,i,n,a){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=i,this._parseStack.decodedLength=n,this._parseStack.position=a}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((i,n)=>setTimeout(()=>n("#SLOW_TIMEOUT"),fm))]).catch(i=>{if(i!=="#SLOW_TIMEOUT")throw i;console.warn(`async parser handler taking longer than ${fm} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,i){let n,a=this._activeBuffer.x,h=this._activeBuffer.y,c=0,f=this._parseStack.paused;if(f){if(n=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,i))return this._logSlowResolvingAsync(n),n;a=this._parseStack.cursorStartX,h=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>Hs&&(c=this._parseStack.position+Hs)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,d=>String.fromCharCode(d)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof e=="string"?e.split("").map(d=>d.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<Hs&&(this._parseBuffer=new Uint32Array(Math.min(e.length,Hs))),f||this._dirtyRowTracker.clearRange(),e.length>Hs)for(let d=c;d<e.length;d+=Hs){let p=d+Hs<e.length?d+Hs:e.length,S=typeof e=="string"?this._stringDecoder.decode(e.substring(d,p),this._parseBuffer):this._utf8Decoder.decode(e.subarray(d,p),this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,S))return this._preserveStack(a,h,S,d),this._logSlowResolvingAsync(n),n}else if(!f){let d=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,d))return this._preserveStack(a,h,d,0),this._logSlowResolvingAsync(n),n}(this._activeBuffer.x!==a||this._activeBuffer.y!==h)&&this._onCursorMove.fire();let _=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),g=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);g<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(g,this._bufferService.rows-1),end:Math.min(_,this._bufferService.rows-1)})}print(e,i,n){let a,h,c=this._charsetService.charset,f=this._optionsService.rawOptions.screenReaderMode,_=this._bufferService.cols,g=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,p=this._curAttrData,S=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&n-i>0&&S.getWidth(this._activeBuffer.x-1)===2&&S.setCellFromCodepoint(this._activeBuffer.x-1,0,1,p);let E=this._parser.precedingJoinState;for(let k=i;k<n;++k){if(a=e[k],a<127&&c){let z=c[String.fromCharCode(a)];z&&(a=z.charCodeAt(0))}let x=this._unicodeService.charProperties(a,E);h=ur.extractWidth(x);let C=ur.extractShouldJoin(x),T=C?ur.extractWidth(E):0;if(E=x,f&&this._onA11yChar.fire(Us(a)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+h-T>_){if(g){let z=S,ee=this._activeBuffer.x-T;for(this._activeBuffer.x=T,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),S=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),T>0&&S instanceof pl&&S.copyCellsFrom(z,ee,0,T,!1);ee<_;)z.setCellFromCodepoint(ee++,0,1,p)}else if(this._activeBuffer.x=_-1,h===2)continue}if(C&&this._activeBuffer.x){let z=S.getWidth(this._activeBuffer.x-1)?1:2;S.addCodepointToCell(this._activeBuffer.x-z,a,h);for(let ee=h-T;--ee>=0;)S.setCellFromCodepoint(this._activeBuffer.x++,0,0,p);continue}if(d&&(S.insertCells(this._activeBuffer.x,h-T,this._activeBuffer.getNullCell(p)),S.getWidth(_-1)===2&&S.setCellFromCodepoint(_-1,0,1,p)),S.setCellFromCodepoint(this._activeBuffer.x++,a,h,p),h>0)for(;--h;)S.setCellFromCodepoint(this._activeBuffer.x++,0,0,p)}this._parser.precedingJoinState=E,this._activeBuffer.x<_&&n-i>0&&S.getWidth(this._activeBuffer.x)===0&&!S.hasContent(this._activeBuffer.x)&&S.setCellFromCodepoint(this._activeBuffer.x,0,1,p),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,i){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,n=>um(n.params[0],this._optionsService.rawOptions.windowOptions)?i(n):!0):this._parser.registerCsiHandler(e,i)}registerDcsHandler(e,i){return this._parser.registerDcsHandler(e,new om(i))}registerEscHandler(e,i){return this._parser.registerEscHandler(e,i)}registerOscHandler(e,i){return this._parser.registerOscHandler(e,new ui(i))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);i.hasWidth(this._activeBuffer.x)&&!i.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,i){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+i):(this._activeBuffer.x=e,this._activeBuffer.y=i),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,i){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+i)}cursorUp(e){let i=this._activeBuffer.y-this._activeBuffer.scrollTop;return i>=0?this._moveCursor(0,-Math.min(i,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let i=this._activeBuffer.scrollBottom-this._activeBuffer.y;return i>=0?this._moveCursor(0,Math.min(i,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let i=e.params[0];return i===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:i===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let i=e.params[0]||1;for(;i--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let i=e.params[0]||1;for(;i--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let i=e.params[0];return i===1&&(this._curAttrData.bg|=536870912),(i===2||i===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,i,n,a=!1,h=!1){let c=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);c.replaceCells(i,n,this._activeBuffer.getNullCell(this._eraseAttrData()),h),a&&(c.isWrapped=!1)}_resetBufferLine(e,i=!1){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n&&(n.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),i),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),n.isWrapped=!1)}eraseInDisplay(e,i=!1){var a;this._restrictCursor(this._bufferService.cols);let n;switch(e.params[0]){case 0:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,i);n<this._bufferService.rows;n++)this._resetBufferLine(n,i);this._dirtyRowTracker.markDirty(n);break;case 1:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n,0,this._activeBuffer.x+1,!0,i),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(n+1).isWrapped=!1);n--;)this._resetBufferLine(n,i);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(n=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,n-1);n--&&!((a=this._activeBuffer.lines.get(this._activeBuffer.ybase+n))!=null&&a.getTrimmedLength()););for(;n>=0;n--)this._bufferService.scroll(this._eraseAttrData())}else{for(n=this._bufferService.rows,this._dirtyRowTracker.markDirty(n-1);n--;)this._resetBufferLine(n,i);this._dirtyRowTracker.markDirty(0)}break;case 3:let h=this._activeBuffer.lines.length-this._bufferService.rows;h>0&&(this._activeBuffer.lines.trimStart(h),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-h,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-h,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,i=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,i);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,i);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,i);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let i=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,a=this._bufferService.rows-1-this._activeBuffer.scrollBottom,h=this._bufferService.rows-1+this._activeBuffer.ybase-a+1;for(;i--;)this._activeBuffer.lines.splice(h-1,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let i=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,a;for(a=this._bufferService.rows-1-this._activeBuffer.scrollBottom,a=this._bufferService.rows-1+this._activeBuffer.ybase-a;i--;)this._activeBuffer.lines.splice(n,1),this._activeBuffer.lines.splice(a,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return i&&(i.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return i&&(i.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let i=e.params[0]||1;for(;i--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let i=e.params[0]||1;for(;i--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(ut));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);a.deleteCells(0,i,this._activeBuffer.getNullCell(this._eraseAttrData())),a.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);a.insertCells(0,i,this._activeBuffer.getNullCell(this._eraseAttrData())),a.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);a.insertCells(this._activeBuffer.x,i,this._activeBuffer.getNullCell(this._eraseAttrData())),a.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);a.deleteCells(this._activeBuffer.x,i,this._activeBuffer.getNullCell(this._eraseAttrData())),a.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return i&&(i.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let i=this._parser.precedingJoinState;if(!i)return!0;let n=e.params[0]||1,a=ur.extractWidth(i),h=this._activeBuffer.x-a,c=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(h),f=new Uint32Array(c.length*n),_=0;for(let d=0;d<c.length;){let p=c.codePointAt(d)||0;f[_++]=p,d+=p>65535?2:1}let g=_;for(let d=1;d<n;++d)f.copyWithin(g,0,_),g+=_;return this.print(f,0,g),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(q.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(q.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(q.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(q.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(q.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,hr),this._charsetService.setgCharset(1,hr),this._charsetService.setgCharset(2,hr),this._charsetService.setgCharset(3,hr);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[i]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(e,i){(C=>(C[C.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",C[C.SET=1]="SET",C[C.RESET=2]="RESET",C[C.PERMANENTLY_SET=3]="PERMANENTLY_SET",C[C.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(void 0||(n={}));let a=this._coreService.decPrivateModes,{activeProtocol:h,activeEncoding:c}=this._coreMouseService,f=this._coreService,{buffers:_,cols:g}=this._bufferService,{active:d,alt:p}=_,S=this._optionsService.rawOptions,E=(C,T)=>(f.triggerDataEvent(`${q.ESC}[${i?"":"?"}${C};${T}$y`),!0),k=C=>C?1:2,x=e.params[0];return i?x===2?E(x,4):x===4?E(x,k(f.modes.insertMode)):x===12?E(x,3):x===20?E(x,k(S.convertEol)):E(x,0):x===1?E(x,k(a.applicationCursorKeys)):x===3?E(x,S.windowOptions.setWinLines?g===80?2:g===132?1:0:0):x===6?E(x,k(a.origin)):x===7?E(x,k(a.wraparound)):x===8?E(x,3):x===9?E(x,k(h==="X10")):x===12?E(x,k(S.cursorBlink)):x===25?E(x,k(!f.isCursorHidden)):x===45?E(x,k(a.reverseWraparound)):x===66?E(x,k(a.applicationKeypad)):x===67?E(x,4):x===1e3?E(x,k(h==="VT200")):x===1002?E(x,k(h==="DRAG")):x===1003?E(x,k(h==="ANY")):x===1004?E(x,k(a.sendFocus)):x===1005?E(x,4):x===1006?E(x,k(c==="SGR")):x===1015?E(x,4):x===1016?E(x,k(c==="SGR_PIXELS")):x===1048?E(x,1):x===47||x===1047||x===1049?E(x,k(d===p)):x===2004?E(x,k(a.bracketedPasteMode)):x===2026?E(x,k(a.synchronizedOutput)):E(x,0)}_updateAttrColor(e,i,n,a,h){return i===2?(e|=50331648,e&=-16777216,e|=Pl.fromColorRGB([n,a,h])):i===5&&(e&=-50331904,e|=33554432|n&255),e}_extractColor(e,i,n){let a=[0,0,-1,0,0,0],h=0,c=0;do{if(a[c+h]=e.params[i+c],e.hasSubParams(i+c)){let f=e.getSubParams(i+c),_=0;do a[1]===5&&(h=1),a[c+_+1+h]=f[_];while(++_<f.length&&_+c+1+h<a.length);break}if(a[1]===5&&c+h>=2||a[1]===2&&c+h>=5)break;a[1]&&(h=1)}while(++c+i<e.length&&c+h<a.length);for(let f=2;f<a.length;++f)a[f]===-1&&(a[f]=0);switch(a[0]){case 38:n.fg=this._updateAttrColor(n.fg,a[1],a[3],a[4],a[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,a[1],a[3],a[4],a[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,a[1],a[3],a[4],a[5])}return c}_processUnderline(e,i){i.extended=i.extended.clone(),(!~e||e>5)&&(e=1),i.extended.underlineStyle=e,i.fg|=268435456,e===0&&(i.fg&=-268435457),i.updateExtended()}_processSGR0(e){e.fg=ut.fg,e.bg=ut.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let i=e.length,n,a=this._curAttrData;for(let h=0;h<i;h++)n=e.params[h],n>=30&&n<=37?(a.fg&=-50331904,a.fg|=16777216|n-30):n>=40&&n<=47?(a.bg&=-50331904,a.bg|=16777216|n-40):n>=90&&n<=97?(a.fg&=-50331904,a.fg|=16777216|n-90|8):n>=100&&n<=107?(a.bg&=-50331904,a.bg|=16777216|n-100|8):n===0?this._processSGR0(a):n===1?a.fg|=134217728:n===3?a.bg|=67108864:n===4?(a.fg|=268435456,this._processUnderline(e.hasSubParams(h)?e.getSubParams(h)[0]:1,a)):n===5?a.fg|=536870912:n===7?a.fg|=67108864:n===8?a.fg|=1073741824:n===9?a.fg|=2147483648:n===2?a.bg|=134217728:n===21?this._processUnderline(2,a):n===22?(a.fg&=-134217729,a.bg&=-134217729):n===23?a.bg&=-67108865:n===24?(a.fg&=-268435457,this._processUnderline(0,a)):n===25?a.fg&=-536870913:n===27?a.fg&=-67108865:n===28?a.fg&=-1073741825:n===29?a.fg&=2147483647:n===39?(a.fg&=-67108864,a.fg|=ut.fg&16777215):n===49?(a.bg&=-67108864,a.bg|=ut.bg&16777215):n===38||n===48||n===58?h+=this._extractColor(e,h,a):n===53?a.bg|=1073741824:n===55?a.bg&=-1073741825:n===59?(a.extended=a.extended.clone(),a.extended.underlineColor=-1,a.updateExtended()):n===100?(a.fg&=-67108864,a.fg|=ut.fg&16777215,a.bg&=-67108864,a.bg|=ut.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",n);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${q.ESC}[0n`);break;case 6:let i=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${q.ESC}[${i};${n}R`);break}return!0}deviceStatusPrivate(e){switch(e.params[0]){case 6:let i=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${q.ESC}[?${i};${n}R`);break}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=ut.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let i=e.length===0?1:e.params[0];if(i===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(i){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let n=i%2===1;this._coreService.decPrivateModes.cursorBlink=n}return!0}setScrollRegion(e){let i=e.params[0]||1,n;return(e.length<2||(n=e.params[1])>this._bufferService.rows||n===0)&&(n=this._bufferService.rows),n>i&&(this._activeBuffer.scrollTop=i-1,this._activeBuffer.scrollBottom=n-1,this._setCursor(0,0)),!0}windowOptions(e){if(!um(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let i=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:i!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${q.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(i===0||i===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>cm&&this._windowTitleStack.shift()),(i===0||i===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>cm&&this._iconNameStack.shift());break;case 23:(i===0||i===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(i===0||i===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let i=[],n=e.split(";");for(;n.length>1;){let a=n.shift(),h=n.shift();if(/^\d+$/.exec(a)){let c=parseInt(a);if(_m(c))if(h==="?")i.push({type:0,index:c});else{let f=hm(h);f&&i.push({type:1,index:c,color:f})}}}return i.length&&this._onColor.fire(i),!0}setHyperlink(e){let i=e.indexOf(";");if(i===-1)return!0;let n=e.slice(0,i).trim(),a=e.slice(i+1);return a?this._createHyperlink(n,a):n.trim()?!1:this._finishHyperlink()}_createHyperlink(e,i){this._getCurrentLinkId()&&this._finishHyperlink();let n=e.split(":"),a,h=n.findIndex(c=>c.startsWith("id="));return h!==-1&&(a=n[h].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:a,uri:i}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,i){let n=e.split(";");for(let a=0;a<n.length&&!(i>=this._specialColors.length);++a,++i)if(n[a]==="?")this._onColor.fire([{type:0,index:this._specialColors[i]}]);else{let h=hm(n[a]);h&&this._onColor.fire([{type:1,index:this._specialColors[i],color:h}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let i=[],n=e.split(";");for(let a=0;a<n.length;++a)if(/^\d+$/.exec(n[a])){let h=parseInt(n[a]);_m(h)&&i.push({type:2,index:h})}return i.length&&this._onColor.fire(i),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,hr),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset($b[e[0]],St[e[1]]||hr),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=ut.clone(),this._eraseAttrDataInternal=ut.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new Di;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let i=0;i<this._bufferService.rows;++i){let n=this._activeBuffer.ybase+this._activeBuffer.y+i,a=this._activeBuffer.lines.get(n);a&&(a.fill(e),a.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,i){let n=f=>(this._coreService.triggerDataEvent(`${q.ESC}${f}${q.ESC}\\`),!0),a=this._bufferService.buffer,h=this._optionsService.rawOptions;return n(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${a.scrollTop+1};${a.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[h.cursorStyle]-(h.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,i){this._dirtyRowTracker.markRangeDirty(e,i)}},rf=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,i){e>i&&(dm=e,e=i,i=dm),e<this.start&&(this.start=e),i>this.end&&(this.end=i)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};rf=tt([re(0,Yt)],rf);function _m(e){return 0<=e&&e<256}var Qb=5e7,vm=12,Jb=50,eC=class extends we{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new X),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,i){if(i!==void 0&&this._syncCalls>i){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let n;for(;n=this._writeBuffer.shift();){this._action(n);let a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,i){if(this._pendingData>Qb)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(i),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(i)}_innerWrite(e=0,i=!0){let n=e||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let a=this._writeBuffer[this._bufferOffset],h=this._action(a,i);if(h){let f=_=>performance.now()-n>=vm?setTimeout(()=>this._innerWrite(0,_)):this._innerWrite(n,_);h.catch(_=>(queueMicrotask(()=>{throw _}),Promise.resolve(!1))).then(f);return}let c=this._callbacks[this._bufferOffset];if(c&&c(),this._bufferOffset++,this._pendingData-=a.length,performance.now()-n>=vm)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>Jb&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},nf=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let i=this._bufferService.buffer;if(e.id===void 0){let _=i.addMarker(i.ybase+i.y),g={data:e,id:this._nextId++,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(g,_)),this._dataByLinkId.set(g.id,g),g.id}let n=e,a=this._getEntryIdKey(n),h=this._entriesWithId.get(a);if(h)return this.addLineToLink(h.id,i.ybase+i.y),h.id;let c=i.addMarker(i.ybase+i.y),f={id:this._nextId++,key:this._getEntryIdKey(n),data:n,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(f,c)),this._entriesWithId.set(f.key,f),this._dataByLinkId.set(f.id,f),f.id}addLineToLink(e,i){let n=this._dataByLinkId.get(e);if(n&&n.lines.every(a=>a.line!==i)){let a=this._bufferService.buffer.addMarker(i);n.lines.push(a),a.onDispose(()=>this._removeMarkerFromLink(n,a))}}getLinkData(e){var i;return(i=this._dataByLinkId.get(e))==null?void 0:i.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,i){let n=e.lines.indexOf(i);n!==-1&&(e.lines.splice(n,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};nf=tt([re(0,Yt)],nf);var gm=!1,tC=class extends we{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new on),this._onBinary=this._register(new X),this.onBinary=this._onBinary.event,this._onData=this._register(new X),this.onData=this._onData.event,this._onLineFeed=this._register(new X),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new X),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new X),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new X),this._instantiationService=new xb,this.optionsService=this._register(new zb(e)),this._instantiationService.setService(jt,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(Ju)),this._instantiationService.setService(Yt,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(Qu)),this._instantiationService.setService(Lm,this._logService),this.coreService=this._register(this._instantiationService.createInstance(ef)),this._instantiationService.setService(vr,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(tf)),this._instantiationService.setService(Om,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(ur)),this._instantiationService.setService(by,this.unicodeService),this._charsetService=this._instantiationService.createInstance(qb),this._instantiationService.setService(yy,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(nf),this._instantiationService.setService(zm,this._oscLinkService),this._inputHandler=this._register(new Zb(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(Lt.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(Lt.forward(this._bufferService.onResize,this._onResize)),this._register(Lt.forward(this.coreService.onData,this._onData)),this._register(Lt.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new eC((i,n)=>this._inputHandler.parse(i,n))),this._register(Lt.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new X),this._onScroll.event(e=>{var i;(i=this._onScrollApi)==null||i.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let i in e)this.optionsService.options[i]=e[i]}write(e,i){this._writeBuffer.write(e,i)}writeSync(e,i){this._logService.logLevel<=3&&!gm&&(this._logService.warn("writeSync is unreliable and will be removed soon."),gm=!0),this._writeBuffer.writeSync(e,i)}input(e,i=!0){this.coreService.triggerDataEvent(e,i)}resize(e,i){isNaN(e)||isNaN(i)||(e=Math.max(e,dp),i=Math.max(i,_p),this._bufferService.resize(e,i))}scroll(e,i=!1){this._bufferService.scroll(e,i)}scrollLines(e,i){this._bufferService.scrollLines(e,i)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let i=e-this._bufferService.buffer.ydisp;i!==0&&this.scrollLines(i)}registerEscHandler(e,i){return this._inputHandler.registerEscHandler(e,i)}registerDcsHandler(e,i){return this._inputHandler.registerDcsHandler(e,i)}registerCsiHandler(e,i){return this._inputHandler.registerCsiHandler(e,i)}registerOscHandler(e,i){return this._inputHandler.registerOscHandler(e,i)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,i=this.optionsService.rawOptions.windowsPty;i&&i.buildNumber!==void 0&&i.buildNumber!==void 0?e=i.backend==="conpty"&&i.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(am.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(am(this._bufferService),!1))),this._windowsWrappingHeuristics.value=Xe(()=>{for(let i of e)i.dispose()})}}},iC={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function sC(e,i,n,a){var f;let h={type:0,cancel:!1,key:void 0},c=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?i?h.key=q.ESC+"OA":h.key=q.ESC+"[A":e.key==="UIKeyInputLeftArrow"?i?h.key=q.ESC+"OD":h.key=q.ESC+"[D":e.key==="UIKeyInputRightArrow"?i?h.key=q.ESC+"OC":h.key=q.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(i?h.key=q.ESC+"OB":h.key=q.ESC+"[B");break;case 8:h.key=e.ctrlKey?"\b":q.DEL,e.altKey&&(h.key=q.ESC+h.key);break;case 9:if(e.shiftKey){h.key=q.ESC+"[Z";break}h.key=q.HT,h.cancel=!0;break;case 13:h.key=e.altKey?q.ESC+q.CR:q.CR,h.cancel=!0;break;case 27:h.key=q.ESC,e.altKey&&(h.key=q.ESC+q.ESC),h.cancel=!0;break;case 37:if(e.metaKey)break;c?h.key=q.ESC+"[1;"+(c+1)+"D":i?h.key=q.ESC+"OD":h.key=q.ESC+"[D";break;case 39:if(e.metaKey)break;c?h.key=q.ESC+"[1;"+(c+1)+"C":i?h.key=q.ESC+"OC":h.key=q.ESC+"[C";break;case 38:if(e.metaKey)break;c?h.key=q.ESC+"[1;"+(c+1)+"A":i?h.key=q.ESC+"OA":h.key=q.ESC+"[A";break;case 40:if(e.metaKey)break;c?h.key=q.ESC+"[1;"+(c+1)+"B":i?h.key=q.ESC+"OB":h.key=q.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(h.key=q.ESC+"[2~");break;case 46:c?h.key=q.ESC+"[3;"+(c+1)+"~":h.key=q.ESC+"[3~";break;case 36:c?h.key=q.ESC+"[1;"+(c+1)+"H":i?h.key=q.ESC+"OH":h.key=q.ESC+"[H";break;case 35:c?h.key=q.ESC+"[1;"+(c+1)+"F":i?h.key=q.ESC+"OF":h.key=q.ESC+"[F";break;case 33:e.shiftKey?h.type=2:e.ctrlKey?h.key=q.ESC+"[5;"+(c+1)+"~":h.key=q.ESC+"[5~";break;case 34:e.shiftKey?h.type=3:e.ctrlKey?h.key=q.ESC+"[6;"+(c+1)+"~":h.key=q.ESC+"[6~";break;case 112:c?h.key=q.ESC+"[1;"+(c+1)+"P":h.key=q.ESC+"OP";break;case 113:c?h.key=q.ESC+"[1;"+(c+1)+"Q":h.key=q.ESC+"OQ";break;case 114:c?h.key=q.ESC+"[1;"+(c+1)+"R":h.key=q.ESC+"OR";break;case 115:c?h.key=q.ESC+"[1;"+(c+1)+"S":h.key=q.ESC+"OS";break;case 116:c?h.key=q.ESC+"[15;"+(c+1)+"~":h.key=q.ESC+"[15~";break;case 117:c?h.key=q.ESC+"[17;"+(c+1)+"~":h.key=q.ESC+"[17~";break;case 118:c?h.key=q.ESC+"[18;"+(c+1)+"~":h.key=q.ESC+"[18~";break;case 119:c?h.key=q.ESC+"[19;"+(c+1)+"~":h.key=q.ESC+"[19~";break;case 120:c?h.key=q.ESC+"[20;"+(c+1)+"~":h.key=q.ESC+"[20~";break;case 121:c?h.key=q.ESC+"[21;"+(c+1)+"~":h.key=q.ESC+"[21~";break;case 122:c?h.key=q.ESC+"[23;"+(c+1)+"~":h.key=q.ESC+"[23~";break;case 123:c?h.key=q.ESC+"[24;"+(c+1)+"~":h.key=q.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?h.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?h.key=q.NUL:e.keyCode>=51&&e.keyCode<=55?h.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?h.key=q.DEL:e.keyCode===219?h.key=q.ESC:e.keyCode===220?h.key=q.FS:e.keyCode===221&&(h.key=q.GS);else if((!n||a)&&e.altKey&&!e.metaKey){let _=(f=iC[e.keyCode])==null?void 0:f[e.shiftKey?1:0];if(_)h.key=q.ESC+_;else if(e.keyCode>=65&&e.keyCode<=90){let g=e.ctrlKey?e.keyCode-64:e.keyCode+32,d=String.fromCharCode(g);e.shiftKey&&(d=d.toUpperCase()),h.key=q.ESC+d}else if(e.keyCode===32)h.key=q.ESC+(e.ctrlKey?q.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let g=e.code.slice(3,4);e.shiftKey||(g=g.toLowerCase()),h.key=q.ESC+g,h.cancel=!0}}else n&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(h.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?h.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(h.key=q.US),e.key==="@"&&(h.key=q.NUL));break}return h}var nt=0,rC=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new wo,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new wo,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((h,c)=>this._getKey(h)-this._getKey(c)),i=0,n=0,a=new Array(this._array.length+this._insertedValues.length);for(let h=0;h<a.length;h++)n>=this._array.length||this._getKey(e[i])<=this._getKey(this._array[n])?(a[h]=e[i],i++):a[h]=this._array[n++];this._array=a,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let i=this._getKey(e);if(i===void 0||(nt=this._search(i),nt===-1)||this._getKey(this._array[nt])!==i)return!1;do if(this._array[nt]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(nt),!0;while(++nt<this._array.length&&this._getKey(this._array[nt])===i);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((h,c)=>h-c),i=0,n=new Array(this._array.length-e.length),a=0;for(let h=0;h<this._array.length;h++)e[i]===h?i++:n[a++]=this._array[h];this._array=n,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(nt=this._search(e),!(nt<0||nt>=this._array.length)&&this._getKey(this._array[nt])===e))do yield this._array[nt];while(++nt<this._array.length&&this._getKey(this._array[nt])===e)}forEachByKey(e,i){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(nt=this._search(e),!(nt<0||nt>=this._array.length)&&this._getKey(this._array[nt])===e))do i(this._array[nt]);while(++nt<this._array.length&&this._getKey(this._array[nt])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let i=0,n=this._array.length-1;for(;n>=i;){let a=i+n>>1,h=this._getKey(this._array[a]);if(h>e)n=a-1;else if(h<e)i=a+1;else{for(;a>0&&this._getKey(this._array[a-1])===e;)a--;return a}}return i}},_u=0,mm=0,nC=class extends we{constructor(){super(),this._decorations=new rC(e=>e==null?void 0:e.marker.line),this._onDecorationRegistered=this._register(new X),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new X),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(Xe(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let i=new lC(e);if(i){let n=i.marker.onDispose(()=>i.dispose()),a=i.onDispose(()=>{a.dispose(),i&&(this._decorations.delete(i)&&this._onDecorationRemoved.fire(i),n.dispose())});this._decorations.insert(i),this._onDecorationRegistered.fire(i)}return i}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,i,n){let a=0,h=0;for(let c of this._decorations.getKeyIterator(i))a=c.options.x??0,h=a+(c.options.width??1),e>=a&&e<h&&(!n||(c.options.layer??"bottom")===n)&&(yield c)}forEachDecorationAtCell(e,i,n,a){this._decorations.forEachByKey(i,h=>{_u=h.options.x??0,mm=_u+(h.options.width??1),e>=_u&&e<mm&&(!n||(h.options.layer??"bottom")===n)&&a(h)})}},lC=class extends qs{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new X),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new X),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Ze.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Ze.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},aC=1e3,oC=class{constructor(e,i=aC){this._renderCallback=e,this._debounceThresholdMS=i,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,i,n){this._rowCount=n,e=e!==void 0?e:0,i=i!==void 0?i:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,i):i;let a=performance.now();if(a-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=a,this._innerRefresh();else if(!this._additionalRefreshRequested){let h=a-this._lastRefreshMs,c=this._debounceThresholdMS-h;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},c)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),i=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,i)}},pm=20,Eo=class extends we{constructor(e,i,n,a){super(),this._terminal=e,this._coreBrowserService=n,this._renderService=a,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let h=this._coreBrowserService.mainDocument;this._accessibilityContainer=h.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=h.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let c=0;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);if(this._topBoundaryFocusListener=c=>this._handleBoundaryFocus(c,0),this._bottomBoundaryFocusListener=c=>this._handleBoundaryFocus(c,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=h.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new oC(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(c=>this._handleResize(c.rows))),this._register(this._terminal.onRender(c=>this._refreshRows(c.start,c.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(c=>this._handleChar(c))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(c=>this._handleTab(c))),this._register(this._terminal.onKey(c=>this._handleKey(c.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(ge(h,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(Xe(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let i=0;i<e;i++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<pm+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===pm+1&&(this._liveRegion.textContent+=Eu.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,i){this._liveRegionDebouncer.refresh(e,i,this._terminal.rows)}_renderRows(e,i){let n=this._terminal.buffer,a=n.lines.length.toString();for(let h=e;h<=i;h++){let c=n.lines.get(n.ydisp+h),f=[],_=(c==null?void 0:c.translateToString(!0,void 0,void 0,f))||"",g=(n.ydisp+h+1).toString(),d=this._rowElements[h];d&&(_.length===0?(d.textContent="",this._rowColumns.set(d,[0,1])):(d.textContent=_,this._rowColumns.set(d,f)),d.setAttribute("aria-posinset",g),d.setAttribute("aria-setsize",a),this._alignRowWidth(d))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,i){let n=e.target,a=this._rowElements[i===0?1:this._rowElements.length-2],h=n.getAttribute("aria-posinset"),c=i===0?"1":`${this._terminal.buffer.lines.length}`;if(h===c||e.relatedTarget!==a)return;let f,_;if(i===0?(f=n,_=this._rowElements.pop(),this._rowContainer.removeChild(_)):(f=this._rowElements.shift(),_=n,this._rowContainer.removeChild(f)),f.removeEventListener("focus",this._topBoundaryFocusListener),_.removeEventListener("focus",this._bottomBoundaryFocusListener),i===0){let g=this._createAccessibilityTreeNode();this._rowElements.unshift(g),this._rowContainer.insertAdjacentElement("afterbegin",g)}else{let g=this._createAccessibilityTreeNode();this._rowElements.push(g),this._rowContainer.appendChild(g)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(i===0?-1:1),this._rowElements[i===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){var _;if(this._rowElements.length===0)return;let e=this._coreBrowserService.mainDocument.getSelection();if(!e)return;if(e.isCollapsed){this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection();return}if(!e.anchorNode||!e.focusNode){console.error("anchorNode and/or focusNode are null");return}let i={node:e.anchorNode,offset:e.anchorOffset},n={node:e.focusNode,offset:e.focusOffset};if((i.node.compareDocumentPosition(n.node)&Node.DOCUMENT_POSITION_PRECEDING||i.node===n.node&&i.offset>n.offset)&&([i,n]=[n,i]),i.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(i={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(i.node))return;let a=this._rowElements.slice(-1)[0];if(n.node.compareDocumentPosition(a)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(n={node:a,offset:((_=a.textContent)==null?void 0:_.length)??0}),!this._rowContainer.contains(n.node))return;let h=({node:g,offset:d})=>{let p=g instanceof Text?g.parentNode:g,S=parseInt(p==null?void 0:p.getAttribute("aria-posinset"),10)-1;if(isNaN(S))return console.warn("row is invalid. Race condition?"),null;let E=this._rowColumns.get(p);if(!E)return console.warn("columns is null. Race condition?"),null;let k=d<E.length?E[d]:E.slice(-1)[0]+1;return k>=this._terminal.cols&&(++S,k=0),{row:S,column:k}},c=h(i),f=h(n);if(!(!c||!f)){if(c.row>f.row||c.row===f.row&&c.column>=f.column)throw new Error("invalid range");this._terminal.select(c.column,c.row,(f.row-c.row)*this._terminal.cols-c.column+f.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let i=this._rowContainer.children.length;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){var h,c;e.style.transform="";let i=e.getBoundingClientRect().width,n=(c=(h=this._rowColumns.get(e))==null?void 0:h.slice(-1))==null?void 0:c[0];if(!n)return;let a=n*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${a/i})`}};Eo=tt([re(1,hf),re(2,os),re(3,hs)],Eo);var lf=class extends we{constructor(e,i,n,a,h){super(),this._element=e,this._mouseService=i,this._renderService=n,this._bufferService=a,this._linkProviderService=h,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new X),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new X),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(Xe(()=>{var c;dr(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,(c=this._activeProviderReplies)==null||c.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(ge(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(ge(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(ge(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(ge(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let i=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!i)return;this._isMouseOut=!1;let n=e.composedPath();for(let a=0;a<n.length;a++){let h=n[a];if(h.classList.contains("xterm"))break;if(h.classList.contains("xterm-hover"))return}(!this._lastBufferCell||i.x!==this._lastBufferCell.x||i.y!==this._lastBufferCell.y)&&(this._handleHover(i),this._lastBufferCell=i)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,i){var a,h;(!this._activeProviderReplies||!i)&&((a=this._activeProviderReplies)==null||a.forEach(c=>{c==null||c.forEach(f=>{f.link.dispose&&f.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let n=!1;for(let[c,f]of this._linkProviderService.linkProviders.entries())i?(h=this._activeProviderReplies)!=null&&h.get(c)&&(n=this._checkLinkProviderResult(c,e,n)):f.provideLinks(e.y,_=>{var d,p;if(this._isMouseOut)return;let g=_==null?void 0:_.map(S=>({link:S}));(d=this._activeProviderReplies)==null||d.set(c,g),n=this._checkLinkProviderResult(c,e,n),((p=this._activeProviderReplies)==null?void 0:p.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,i){let n=new Set;for(let a=0;a<i.size;a++){let h=i.get(a);if(h)for(let c=0;c<h.length;c++){let f=h[c],_=f.link.range.start.y<e?0:f.link.range.start.x,g=f.link.range.end.y>e?this._bufferService.cols:f.link.range.end.x;for(let d=_;d<=g;d++){if(n.has(d)){h.splice(c--,1);break}n.add(d)}}}}_checkLinkProviderResult(e,i,n){var c;if(!this._activeProviderReplies)return n;let a=this._activeProviderReplies.get(e),h=!1;for(let f=0;f<e;f++)(!this._activeProviderReplies.has(f)||this._activeProviderReplies.get(f))&&(h=!0);if(!h&&a){let f=a.find(_=>this._linkAtPosition(_.link,i));f&&(n=!0,this._handleNewLink(f))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let f=0;f<this._activeProviderReplies.size;f++){let _=(c=this._activeProviderReplies.get(f))==null?void 0:c.find(g=>this._linkAtPosition(g.link,i));if(_){n=!0,this._handleNewLink(_);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let i=this._positionFromMouseEvent(e,this._element,this._mouseService);i&&this._mouseDownLink&&hC(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,i){!this._currentLink||!this._lastMouseEvent||(!e||!i||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,dr(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(e.link,i)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var n,a;return(a=(n=this._currentLink)==null?void 0:n.state)==null?void 0:a.decorations.pointerCursor},set:n=>{var a;(a=this._currentLink)!=null&&a.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>{var n,a;return(a=(n=this._currentLink)==null?void 0:n.state)==null?void 0:a.decorations.underline},set:n=>{var a,h,c;(a=this._currentLink)!=null&&a.state&&((c=(h=this._currentLink)==null?void 0:h.state)==null?void 0:c.decorations.underline)!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;let a=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,h=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=h&&(this._clearCurrentLink(a,h),this._lastMouseEvent)){let c=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);c&&this._askForLink(c,!1)}})))}_linkHover(e,i,n){var a;(a=this._currentLink)!=null&&a.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(n,i.text)}_fireUnderlineEvent(e,i){let n=e.range,a=this._bufferService.buffer.ydisp,h=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-a-1,n.end.x,n.end.y-a-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(h)}_linkLeave(e,i,n){var a;(a=this._currentLink)!=null&&a.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(n,i.text)}_linkAtPosition(e,i){let n=e.range.start.y*this._bufferService.cols+e.range.start.x,a=e.range.end.y*this._bufferService.cols+e.range.end.x,h=i.y*this._bufferService.cols+i.x;return n<=h&&h<=a}_positionFromMouseEvent(e,i,n){let a=n.getCoords(e,i,this._bufferService.cols,this._bufferService.rows);if(a)return{x:a[0],y:a[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,i,n,a,h){return{x1:e,y1:i,x2:n,y2:a,cols:this._bufferService.cols,fg:h}}};lf=tt([re(1,cf),re(2,hs),re(3,Yt),re(4,Hm)],lf);function hC(e,i){return e.text===i.text&&e.range.start.x===i.range.start.x&&e.range.start.y===i.range.start.y&&e.range.end.x===i.range.end.x&&e.range.end.y===i.range.end.y}var cC=class extends tC{constructor(e={}){super(e),this._linkifier=this._register(new on),this.browser=ip,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new on),this._onCursorMove=this._register(new X),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new X),this.onKey=this._onKey.event,this._onRender=this._register(new X),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new X),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new X),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new X),this.onBell=this._onBell.event,this._onFocus=this._register(new X),this._onBlur=this._register(new X),this._onA11yCharEmitter=this._register(new X),this._onA11yTabEmitter=this._register(new X),this._onWillOpen=this._register(new X),this._setup(),this._decorationService=this._instantiationService.createInstance(nC),this._instantiationService.setService(ql,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(J1),this._instantiationService.setService(Hm,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(Mu)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(i=>this.refresh((i==null?void 0:i.start)??0,(i==null?void 0:i.end)??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(i=>this._reportWindowsOptions(i))),this._register(this._inputHandler.onColor(i=>this._handleColorEvent(i))),this._register(Lt.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(Lt.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(Lt.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(Lt.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(i=>this._afterResize(i.cols,i.rows))),this._register(Xe(()=>{var i,n;this._customKeyEventHandler=void 0,(n=(i=this.element)==null?void 0:i.parentNode)==null||n.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let i of e){let n,a="";switch(i.index){case 256:n="foreground",a="10";break;case 257:n="background",a="11";break;case 258:n="cursor",a="12";break;default:n="ansi",a="4;"+i.index}switch(i.type){case 0:let h=je.toColorRGB(n==="ansi"?this._themeService.colors.ansi[i.index]:this._themeService.colors[n]);this.coreService.triggerDataEvent(`${q.ESC}]${a};${Gb(h)}${ep.ST}`);break;case 1:if(n==="ansi")this._themeService.modifyColors(c=>c.ansi[i.index]=dt.toColor(...i.color));else{let c=n;this._themeService.modifyColors(f=>f[c]=dt.toColor(...i.color))}break;case 2:this._themeService.restoreColor(i.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Eo,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return(e=this.textarea)==null?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,i=this.buffer.lines.get(e);if(!i)return;let n=Math.min(this.buffer.x,this.cols-1),a=this._renderService.dimensions.css.cell.height,h=i.getWidth(n),c=this._renderService.dimensions.css.cell.width*h,f=this.buffer.y*this._renderService.dimensions.css.cell.height,_=n*this._renderService.dimensions.css.cell.width;this.textarea.style.left=_+"px",this.textarea.style.top=f+"px",this.textarea.style.width=c+"px",this.textarea.style.height=a+"px",this.textarea.style.lineHeight=a+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(ge(this.element,"copy",i=>{this.hasSelection()&&_y(i,this._selectionService)}));let e=i=>vy(i,this.textarea,this.coreService,this.optionsService);this._register(ge(this.textarea,"paste",e)),this._register(ge(this.element,"paste",e)),sp?this._register(ge(this.element,"mousedown",i=>{i.button===2&&Dg(i,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(ge(this.element,"contextmenu",i=>{Dg(i,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),pf&&this._register(ge(this.element,"auxclick",i=>{i.button===1&&km(i,this.textarea,this.screenElement)}))}_bindKeys(){this._register(ge(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(ge(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(ge(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(ge(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(ge(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(ge(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(ge(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){var h;if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((h=this.element)==null?void 0:h.ownerDocument.defaultView)&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let i=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),i.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(ge(this.screenElement,"mousemove",c=>this.updateCursorStyle(c))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),i.appendChild(this.screenElement);let n=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",wu.get()),lp||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>n.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(Z1,this.textarea,e.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(os,this._coreBrowserService),this._register(ge(this.textarea,"focus",c=>this._handleTextAreaFocus(c))),this._register(ge(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(Fu,this._document,this._helperContainer),this._instantiationService.setService(Do,this._charSizeService),this._themeService=this._instantiationService.createInstance(Zu),this._instantiationService.setService(hn,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(bo),this._instantiationService.setService(Nm,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(Gu,this.rows,this.screenElement)),this._instantiationService.setService(hs,this._renderService),this._register(this._renderService.onRenderedViewportChange(c=>this._onRender.fire(c))),this.onResize(c=>this._renderService.resize(c.cols,c.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(Yu,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(Xu),this._instantiationService.setService(cf,this._mouseService);let a=this._linkifier.value=this._register(this._instantiationService.createInstance(lf,this.screenElement));this.element.appendChild(i);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(Wu,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(c=>{super.scrollLines(c,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance($u,this.element,this.screenElement,a)),this._instantiationService.setService(wy,this._selectionService),this._register(this._selectionService.onRequestScrollLines(c=>this.scrollLines(c.amount,c.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(c=>this._renderService.handleSelectionChanged(c.start,c.end,c.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(c=>{this.textarea.value=c,this.textarea.focus(),this.textarea.select()})),this._register(Lt.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{var c;this._selectionService.refresh(),(c=this._viewport)==null||c.queueSync()})),this._register(this._instantiationService.createInstance(Ku,this.screenElement)),this._register(ge(this.element,"mousedown",c=>this._selectionService.handleMouseDown(c))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Eo,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",c=>this._handleScreenReaderModeOptionChange(c))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(yo,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",c=>{!this._overviewRulerRenderer&&c&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(yo,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(Iu,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,i=this.element;function n(c){var d,p,S,E,k;let f=e._mouseService.getMouseReportCoords(c,e.screenElement);if(!f)return!1;let _,g;switch(c.overrideType||c.type){case"mousemove":g=32,c.buttons===void 0?(_=3,c.button!==void 0&&(_=c.button<3?c.button:3)):_=c.buttons&1?0:c.buttons&4?1:c.buttons&2?2:3;break;case"mouseup":g=0,_=c.button<3?c.button:3;break;case"mousedown":g=1,_=c.button<3?c.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(c)===!1)return!1;let x=c.deltaY;if(x===0||e.coreMouseService.consumeWheelEvent(c,(E=(S=(p=(d=e._renderService)==null?void 0:d.dimensions)==null?void 0:p.device)==null?void 0:S.cell)==null?void 0:E.height,(k=e._coreBrowserService)==null?void 0:k.dpr)===0)return!1;g=x<0?0:1,_=4;break;default:return!1}return g===void 0||_===void 0||_>4?!1:e.coreMouseService.triggerMouseEvent({col:f.col,row:f.row,x:f.x,y:f.y,button:_,action:g,ctrl:c.ctrlKey,alt:c.altKey,shift:c.shiftKey})}let a={mouseup:null,wheel:null,mousedrag:null,mousemove:null},h={mouseup:c=>(n(c),c.buttons||(this._document.removeEventListener("mouseup",a.mouseup),a.mousedrag&&this._document.removeEventListener("mousemove",a.mousedrag)),this.cancel(c)),wheel:c=>(n(c),this.cancel(c,!0)),mousedrag:c=>{c.buttons&&n(c)},mousemove:c=>{c.buttons||n(c)}};this._register(this.coreMouseService.onProtocolChange(c=>{c?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(c)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),c&8?a.mousemove||(i.addEventListener("mousemove",h.mousemove),a.mousemove=h.mousemove):(i.removeEventListener("mousemove",a.mousemove),a.mousemove=null),c&16?a.wheel||(i.addEventListener("wheel",h.wheel,{passive:!1}),a.wheel=h.wheel):(i.removeEventListener("wheel",a.wheel),a.wheel=null),c&2?a.mouseup||(a.mouseup=h.mouseup):(this._document.removeEventListener("mouseup",a.mouseup),a.mouseup=null),c&4?a.mousedrag||(a.mousedrag=h.mousedrag):(this._document.removeEventListener("mousemove",a.mousedrag),a.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(ge(i,"mousedown",c=>{if(c.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(c)))return n(c),a.mouseup&&this._document.addEventListener("mouseup",a.mouseup),a.mousedrag&&this._document.addEventListener("mousemove",a.mousedrag),this.cancel(c)})),this._register(ge(i,"wheel",c=>{var f,_,g,d,p;if(!a.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(c)===!1)return!1;if(!this.buffer.hasScrollback){if(c.deltaY===0)return!1;if(e.coreMouseService.consumeWheelEvent(c,(d=(g=(_=(f=e._renderService)==null?void 0:f.dimensions)==null?void 0:_.device)==null?void 0:g.cell)==null?void 0:d.height,(p=e._coreBrowserService)==null?void 0:p.dpr)===0)return this.cancel(c,!0);let S=q.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(c.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(S,!0),this.cancel(c,!0)}}},{passive:!1}))}refresh(e,i){var n;(n=this._renderService)==null||n.refreshRows(e,i)}updateCursorStyle(e){var i;(i=this._selectionService)!=null&&i.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,i){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,i),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let i=e-this._bufferService.buffer.ydisp;i!==0&&this.scrollLines(i)}paste(e){Dm(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let i=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),i}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,i,n){this._selectionService.setSelection(e,i,n)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;(e=this._selectionService)==null||e.clearSelection()}selectAll(){var e;(e=this._selectionService)==null||e.selectAll()}selectLines(e,i){var n;(n=this._selectionService)==null||n.selectLines(e,i)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let i=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!i&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!i&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let n=sC(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),n.type===3||n.type===2){let a=this.rows-1;return this.scrollLines(n.type===2?-a:a),this.cancel(e,!0)}if(n.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(n.cancel&&this.cancel(e,!0),!n.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((n.key===q.ETX||n.key===q.CR)&&(this.textarea.value=""),this._onKey.fire({key:n.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(n.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,i){let n=e.isMac&&!this.options.macOptionIsMeta&&i.altKey&&!i.ctrlKey&&!i.metaKey||e.isWindows&&i.altKey&&i.ctrlKey&&!i.metaKey||e.isWindows&&i.getModifierState("AltGraph");return i.type==="keypress"?n:n&&(!i.keyCode||i.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&(uC(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let i;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)i=e.charCode;else if(e.which===null||e.which===void 0)i=e.keyCode;else if(e.which!==0&&e.charCode!==0)i=e.which;else return!1;return!i||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(i=String.fromCharCode(i),this._onKey.fire({key:i,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let i=e.data;return this.coreService.triggerDataEvent(i,!0),this.cancel(e),!0}return!1}resize(e,i){if(e===this.cols&&i===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,i)}_afterResize(e,i){var n;(n=this._charSizeService)==null||n.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(ut));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){var i;this.options.rows=this.rows,this.options.cols=this.cols;let e=this._customKeyEventHandler;this._setup(),super.reset(),(i=this._selectionService)==null||i.reset(),this._decorationService.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;(e=this._renderService)==null||e.clearTextureAtlas()}_reportFocus(){var e;(e=this.element)!=null&&e.classList.contains("focus")?this.coreService.triggerDataEvent(q.ESC+"[I"):this.coreService.triggerDataEvent(q.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let i=this._renderService.dimensions.css.canvas.width.toFixed(0),n=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${q.ESC}[4;${n};${i}t`);break;case 1:let a=this._renderService.dimensions.css.cell.width.toFixed(0),h=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${q.ESC}[6;${h};${a}t`);break}}cancel(e,i){if(!(!this.options.cancelEvents&&!i))return e.preventDefault(),e.stopPropagation(),!1}};function uC(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var fC=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,i){let n={instance:i,dispose:i.dispose,isDisposed:!1};this._addons.push(n),i.dispose=()=>this._wrappedAddonDispose(n),i.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let i=-1;for(let n=0;n<this._addons.length;n++)if(this._addons[n]===e){i=n;break}if(i===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(i,1)}},dC=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,i){if(!(e<0||e>=this._line.length))return i?(this._line.loadCell(e,i),i):this._line.loadCell(e,new Di)}translateToString(e,i,n){return this._line.translateToString(e,i,n)}},Sm=class{constructor(e,i){this._buffer=e,this.type=i}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let i=this._buffer.lines.get(e);if(i)return new dC(i)}getNullCell(){return new Di}},_C=class extends we{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new X),this.onBufferChange=this._onBufferChange.event,this._normal=new Sm(this._core.buffers.normal,"normal"),this._alternate=new Sm(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},vC=class{constructor(e){this._core=e}registerCsiHandler(e,i){return this._core.registerCsiHandler(e,n=>i(n.toArray()))}addCsiHandler(e,i){return this.registerCsiHandler(e,i)}registerDcsHandler(e,i){return this._core.registerDcsHandler(e,(n,a)=>i(n,a.toArray()))}addDcsHandler(e,i){return this.registerDcsHandler(e,i)}registerEscHandler(e,i){return this._core.registerEscHandler(e,i)}addEscHandler(e,i){return this.registerEscHandler(e,i)}registerOscHandler(e,i){return this._core.registerOscHandler(e,i)}addOscHandler(e,i){return this.registerOscHandler(e,i)}},gC=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},mC=["cols","rows"],qi=0,pC=class extends we{constructor(e){super(),this._core=this._register(new cC(e)),this._addonManager=this._register(new fC),this._publicOptions={...this._core.options};let i=a=>this._core.options[a],n=(a,h)=>{this._checkReadonlyOptions(a),this._core.options[a]=h};for(let a in this._core.options){let h={get:i.bind(this,a),set:n.bind(this,a)};Object.defineProperty(this._publicOptions,a,h)}}_checkReadonlyOptions(e){if(mC.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new vC(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new gC(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new _C(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,i="none";switch(this._core.coreMouseService.activeProtocol){case"X10":i="x10";break;case"VT200":i="vt200";break;case"DRAG":i="drag";break;case"ANY":i="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:i,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,synchronizedOutputMode:e.synchronizedOutput,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let i in e)this._publicOptions[i]=e[i]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,i=!0){this._core.input(e,i)}resize(e,i){this._verifyIntegers(e,i),this._core.resize(e,i)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,i,n){this._verifyIntegers(e,i,n),this._core.select(e,i,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,i){this._verifyIntegers(e,i),this._core.selectLines(e,i)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,i){this._core.write(e,i)}writeln(e,i){this._core.write(e),this._core.write(`\r
`,i)}paste(e){this._core.paste(e)}refresh(e,i){this._verifyIntegers(e,i),this._core.refresh(e,i)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return wu.get()},set promptLabel(e){wu.set(e)},get tooMuchOutput(){return Eu.get()},set tooMuchOutput(e){Eu.set(e)}}}_verifyIntegers(...e){for(qi of e)if(qi===1/0||isNaN(qi)||qi%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(qi of e)if(qi&&(qi===1/0||isNaN(qi)||qi%1!==0||qi<0))throw new Error("This API only accepts positive integers")}};const SC=oe.forwardRef(function({onData:i,inputBuffer:n,onInputBufferChange:a,showInputBuffer:h},c){const f=oe.useRef(null),_=oe.useRef(null),g=oe.useRef(i);return oe.useEffect(()=>{g.current=i}),oe.useImperativeHandle(c,()=>({write:d=>{var p;return(p=_.current)==null?void 0:p.write(d)},reset:()=>{var d;return(d=_.current)==null?void 0:d.reset()},setCursorBlink:d=>{_.current&&(_.current.options.cursorBlink=d)},focus:()=>{var d;return(d=f.current)==null?void 0:d.focus()}})),oe.useEffect(()=>{const d=new pC;return d.open(f.current),d.options.cursorBlink=!1,d.options.autoWrap=!0,d.onData(p=>g.current(p)),_.current=d,()=>d.dispose()},[]),Q.jsxs("div",{className:"panel terminal-panel",children:[Q.jsx("div",{className:"panel-header",children:"Terminal"}),Q.jsx("div",{className:"terminal-wrapper",ref:f}),h&&Q.jsxs("div",{className:"input-buffer-container",children:[Q.jsx("label",{className:"control-label",children:"Input Buffer"}),Q.jsx("textarea",{className:"input-buffer-textarea",value:n,onChange:d=>a(d.target.value),placeholder:"Pre-load input characters...",rows:2})]})]})});function vu(e,i,n){return{textColor:e,type:i,text:n,timestamp:new Date}}function yC(){var Ws,Ks;const e=oe.useRef(null),i=oe.useRef(null),n=oe.useRef(null),a=oe.useRef(null),h=oe.useRef(""),[c,f]=oe.useState(""),[_,g]=oe.useState(""),[d,p]=oe.useState(3e3),[S,E]=oe.useState(10),[k,x]=oe.useState(!1),[C,T]=oe.useState(!1),[z,ee]=oe.useState(100),[F,j]=oe.useState([]),[K,te]=oe.useState(0),[ue,pe]=oe.useState(0),[Te,lt]=oe.useState({index:null,fromVal:null,toVal:null}),[ye,G]=oe.useState([]),[W,Z]=oe.useState(!0),[I,M]=oe.useState(!0),[H,L]=oe.useState(!0),[he,b]=oe.useState(0),[U,$]=oe.useState("keypress"),[Y,J]=oe.useState("corrupted"),[fe,le]=oe.useState(""),Ie=oe.useRef(Y);oe.useEffect(()=>{Ie.current=Y},[Y]);const Be=oe.useRef(U);oe.useEffect(()=>{Be.current=U},[U]);const Ye=oe.useRef(fe);oe.useEffect(()=>{Ye.current=fe},[fe]);function Ae(se){G(ae=>[...ae,vu("white","Log",se)])}function ti(se){G(ae=>[...ae,vu("yellow","Warning",se)])}function at(se){G(ae=>[...ae,vu("red","Error",se)])}const me=oe.useRef(Ae),Ai=oe.useRef(ti),Ro=oe.useRef(at);oe.useEffect(()=>{me.current=Ae,Ai.current=ti,Ro.current=at});function Kl(se){var ae;(ae=a.current)==null||ae.write(`\x1B[36m${se}\x1B[0m`)}function zt(se){var ae;(ae=a.current)==null||ae.write(`\x1B[30;41m${se}\x1B[0m`)}function Bo(){const se=e.current,ae=se.CIndex,De=se.BFCode[ae];if(De===".")Ae(`[${ae}] . -> Outputing`);else if(De===",")Ae(`[${ae}] , -> Waiting for input`);else if(De==="+")Ae(`[${ae}] + -> Incrementing`);else if(De==="-")Ae(`[${ae}] - -> Decrementing`);else if(De===">")Ae(`[${ae}] > -> Moving Right`);else if(De==="<")Ae(`[${ae}] < -> Moving Left`);else if(De==="["){const Ve=se.LoopPairs[ae],it=Ve===void 0,ot=se.CurrentCellVal===se.ConditionVal;Ae(`[${ae}] [${it?" -> Has no tail (skipped)":` -> Tail at ${Ve} (val=${se.CurrentCellVal} ${ot?"skipped to tail":"enter loop"})`}`)}else if(De==="]"){const Ve=se.LoopPairs[ae],it=Ve===void 0,ot=se.CurrentCellVal===se.ConditionVal;Ae(`[${ae}] ]${it?" -> Has no head (skipped)":` -> Head at ${Ve} (val=${se.CurrentCellVal} ${ot?"exit loop":"back to head"})`}`)}}function un(){i.current=null,x(!1),Ae("Brainfuck execution stopped"),Ae(`CIndex: ${e.current.CIndex}`),Ae(`MemPtr: ${e.current.MemPtr}`)}async function fn(){if(i.current||(i.current=e.current.BF_Execute_Generator()),n.current){pe(e.current.CIndex);return}try{Bo();const{done:se}=await i.current.next();b(ae=>ae+1),se&&un()}catch(se){if(pe(e.current.CIndex),se instanceof mu){const ae=se.Identifier;ae==="MemPtrUnderflow"?(zt("[MEMPTR_UNDERFLOW]"),at(`MemPtr Underflow (${se.Val})`)):ae==="MemPtrOverflow"?(zt("[MEMPTR_OVERFLOW]"),at(`MemPtr Overflow (${se.Val})`)):(zt(`[${ae}]`),at(`[${ae}]`))}else se instanceof wm?(zt(`[${se.Identifier}]`),at(`[${se.Identifier}]`)):(zt(se.message),at(se.message));un()}}function cs(){var se;e.current.Reset(),(se=a.current)==null||se.reset(),n.current=null,h.current="",G([]),pe(e.current.CIndex),lt({index:null,fromVal:null,toVal:null}),i.current=null,b(0)}function Yl(){const se=bl.StripBFCode(c);e.current.BFCode=se,pe(e.current.CIndex),Ae("Starting Brainfuck execution"),Ae(`Code: ${e.current.BFCode}`),Ae(`CIndex: ${e.current.CIndex}`),Ae(`Cell Size: ${e.current.CellMaxVal-e.current.CellMinVal+1} (${e.current.CellMinVal} - ${e.current.CellMaxVal})`),Ae(`ConditionVal: ${e.current.ConditionVal}`),Ae(`MemSize: ${e.current.MemSize}`),Ae(`MemPtr: ${e.current.MemPtr}`),i.current||(i.current=e.current.BF_Execute_Generator())}function jl(){cs(),Yl(),x(!0),T(!1)}function Ao(){window.confirm("Are you sure you want to stop the Brainfuck execution?")&&(x(!1),T(!0),i.current=null)}function Oo(){k?Ao():jl()}function Vs(){T(se=>!se)}async function qt(){i.current?(await fn(),T(!0)):(cs(),Yl(),x(!0),T(!0))}function Oi(){cs(),x(!1)}function Vt(se){var ae,De,Ve,it;if(n.current)if(Be.current==="keypress"){Kl(se);const ot=se.charCodeAt(0);Ae(`Read input: ${ot} (${se})`),n.current(ot),(ae=a.current)==null||ae.setCursorBlink(!1),n.current=null}else if(se==="\r"||se===`
`){const ot=h.current;if(ot.length===0)return;(De=a.current)==null||De.write(`\r
`);const gr=ot.charCodeAt(0),us=ot.slice(1);if(Ae(`Read input: ${gr} (${ot[0]})`),us.length>0){const Il=Ye.current+us;Ye.current=Il,le(Il)}h.current="",n.current(gr),(Ve=a.current)==null||Ve.setCursorBlink(!1),n.current=null}else se===""?h.current.length>0&&(h.current=h.current.slice(0,-1),(it=a.current)==null||it.write("\b \b")):(h.current+=se,Kl(se))}function Lo(se,ae,De){j(se.slice(ae,ae+De))}oe.useEffect(()=>{try{e.current&&(e.current.MemSize=Number.parseInt(d))}catch(se){alert(se.message),p(e.current.MemSize)}},[d]),oe.useEffect(()=>{if(e.current){const se=bl.StripBFCode(c);e.current.BFCode=se,g(se)}},[c]),oe.useEffect(()=>{e.current&&Lo(e.current.MemArr,K*z,z)},[z,k,K,Te,d]),F0(async()=>{i.current&&await fn()},k&&!C?S:null),oe.useEffect(()=>{const se=new bl(c,d);e.current=se,se.InputCallback=()=>{var ae,De;if(Ye.current.length>0){const Ve=Ye.current.charCodeAt(0),it=Ye.current.slice(1);return Ye.current=it,le(it),me.current(`Read input from buffer: ${Ve} (${String.fromCharCode(Ve)})`),Ve}return(ae=a.current)==null||ae.focus(),(De=a.current)==null||De.setCursorBlink(!0),new Promise(Ve=>{n.current=Ve})},se.OutputCallback=ae=>{var it;const{output:De,isInvalid:Ve}=Y0(ae,Ie.current);Ve&&Ai.current(`Invalid output: ${ae} (${De})`),me.current(`	Output: ${ae} (${De})`),(it=a.current)==null||it.write(De)},se.CIndexOnChangeCallback=ae=>{pe(ae)},se.MemPtrOnChangeCallback=(ae,De,Ve)=>{const it=Ve.BFCode[Ve.CIndex],ot=Ve.CurrentCellVal;it==="<"?me.current(`	MemPtr moving left: ${ae} -> ${De}`):it===">"?me.current(`	MemPtr moving right: ${ae} -> ${De}`):me.current(`	MemPtr changed: ${ae} -> ${De}`),lt({index:De,fromVal:ot,toVal:ot})},se.MemCellOnChangeCallback=(ae,De,Ve,it)=>{const ot=it.BFCode[it.CIndex];ot==="+"?me.current(`	Cell[${ae}] incremented: ${De} -> ${Ve}`):ot==="-"?me.current(`	Cell[${ae}] decremented: ${De} -> ${Ve}`):me.current(`	Cell[${ae}] changed: ${De} -> ${Ve}`),lt({index:ae,fromVal:De,toVal:Ve})}},[]);const zo=((Ws=e.current)==null?void 0:Ws.MemPtr)??0,No=((Ks=e.current)==null?void 0:Ks.MemSize)??d;return Q.jsxs("div",{className:"app-layout",children:[Q.jsx(G0,{isBFRunning:k,isBFPaused:C,onRunStop:Oo,onContinuePause:Vs,onStepOnce:qt,onReset:Oi,codeExecIntervalMS:S,setCodeExecIntervalMS:E,bfMemorySize:d,setBFMemorySize:p,maxMemorySize:pu,inputMode:U,setInputMode:$,displayMode:Y,setDisplayMode:J,executionCount:he}),Q.jsx(X0,{bfCode:c,onCodeChange:f,disabled:k}),Q.jsx($0,{bfExecuter:e.current,cIndex:ue,strippedBFCode:_}),Q.jsx(Z0,{bfMemoryChunk:F,memPage:K,setMemPage:te,bfMemoryChunkSize:z,setBFMemoryChunkSize:ee,memPtr:zo,memSize:No,isBFRunning:k}),Q.jsx(SC,{ref:a,onData:Vt,inputBuffer:fe,onInputBufferChange:le,showInputBuffer:!0}),Q.jsx(hy,{logTexts:ye,logShowLog:W,setLogShowLog:Z,logShowWarning:I,setLogShowWarning:M,logShowError:H,setLogShowError:L})]})}U0.createRoot(document.getElementById("root")).render(Q.jsx(oe.StrictMode,{children:Q.jsx(yC,{})}));
